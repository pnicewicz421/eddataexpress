<html><head><meta name="color-scheme" content="light dark"></head><body><pre style="word-wrap: break-word; white-space: pre-wrap;">/* @license GNU-GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function(_,$,Drupal,drupalSettings){'use strict';var Bootstrap={processedOnce:{},settings:drupalSettings.bootstrap||{}};Bootstrap.checkPlain=function(str){return str&amp;&amp;Drupal.checkPlain(str)||'';};Bootstrap.createPlugin=function(id,plugin,noConflict){if($.fn[id]!==void 0)return this.fatal('Specified jQuery plugin identifier already exists: @id. Use Drupal.bootstrap.replacePlugin() instead.',{'@id':id});if(typeof plugin!=='function')return this.fatal('You must provide a constructor function to create a jQuery plugin "@id": @plugin',{'@id':id,'@plugin':plugin});this.pluginNoConflict(id,plugin,noConflict);$.fn[id]=plugin;};Bootstrap.diffObjects=function(objects){var args=Array.prototype.slice.call(arguments);return _.pick(args[0],_.difference.apply(_,_.map(args,function(obj){return Object.keys(obj);})));};Bootstrap.eventMap={Event:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvent:/^(?:click|dblclick|mouse(?:down|enter|leave|up|over|move|out))$/,KeyboardEvent:/^(?:key(?:down|press|up))$/,TouchEvent:/^(?:touch(?:start|end|move|cancel))$/};Bootstrap.extendPlugin=function(id,callback){if(typeof $.fn[id]!=='function')return this.fatal('Specified jQuery plugin identifier does not exist: @id',{'@id':id});if(typeof callback!=='function')return this.fatal('You must provide a callback function to extend the jQuery plugin "@id": @callback',{'@id':id,'@callback':callback});var constructor=$.fn[id]&amp;&amp;$.fn[id].Constructor||$.fn[id];var plugin=callback.apply(constructor,[this.settings]);if(!$.isPlainObject(plugin))return this.fatal('Returned value from callback is not a plain object that can be used to extend the jQuery plugin "@id": @obj',{'@obj':plugin});this.wrapPluginConstructor(constructor,plugin,true);return $.fn[id];};Bootstrap.superWrapper=function(parent,fn){return function(){var previousSuper=this.super;this.super=parent;var ret=fn.apply(this,arguments);if(previousSuper)this.super=previousSuper;else delete this.super;return ret;};};Bootstrap.fatal=function(message,args){if(this.settings.dev&amp;&amp;console.warn){for(var name in args)if(args.hasOwnProperty(name)&amp;&amp;typeof args[name]==='object')args[name]=JSON.stringify(args[name]);Drupal.throwError(new Error(Drupal.formatString(message,args)));}return false;};Bootstrap.intersectObjects=function(objects){var args=Array.prototype.slice.call(arguments);return _.pick(args[0],_.intersection.apply(_,_.map(args,function(obj){return Object.keys(obj);})));};Bootstrap.normalizeObject=function(obj){if(!$.isPlainObject(obj))return obj;for(var k in obj)if(typeof obj[k]==='string')if(obj[k]==='true')obj[k]=true;else if(obj[k]==='false')obj[k]=false;else{if(obj[k].match(/^[\d-.]$/))obj[k]=parseFloat(obj[k]);}else{if($.isPlainObject(obj[k]))obj[k]=Bootstrap.normalizeObject(obj[k]);}return obj;};Bootstrap.once=function(id,callback){if(this.processedOnce[id])return this;callback.call(this,this.settings);this.processedOnce[id]=true;return this;};Bootstrap.option=function(key,value){var options=$.isPlainObject(key)?$.extend({},key):{};if(arguments.length===0)return $.extend({},this.options);if(typeof key==="string"){var parts=key.split('.');key=parts.shift();var obj=options;if(parts.length){for(var i=0;i&lt;parts.length-1;i++){obj[parts[i]]=obj[parts[i]]||{};obj=obj[parts[i]];}key=parts.pop();}if(arguments.length===1)return obj[key]===void 0?null:obj[key];obj[key]=value;}$.extend(true,this.options,options);};Bootstrap.pluginNoConflict=function(id,plugin,noConflict){if(plugin.noConflict===void 0&amp;&amp;(noConflict===void 0||noConflict)){var old=$.fn[id];plugin.noConflict=function(){$.fn[id]=old;return this;};}};Bootstrap.relayEvent=function(target,name,stopPropagation){return function(e){if(stopPropagation===void 0||stopPropagation)e.stopPropagation();var $target=$(target);var parts=name.split('.').filter(Boolean);var type=parts.shift();e.target=$target[0];e.currentTarget=$target[0];e.namespace=parts.join('.');e.type=type;$target.trigger(e);};};Bootstrap.replacePlugin=function(id,callback,noConflict){if(typeof $.fn[id]!=='function')return this.fatal('Specified jQuery plugin identifier does not exist: @id',{'@id':id});if(typeof callback!=='function')return this.fatal('You must provide a valid callback function to replace a jQuery plugin: @callback',{'@callback':callback});var constructor=$.fn[id]&amp;&amp;$.fn[id].Constructor||$.fn[id];var plugin=callback.apply(constructor,[this.settings]);if(typeof plugin!=='function')return this.fatal('Returned value from callback is not a usable function to replace a jQuery plugin "@id": @plugin',{'@id':id,'@plugin':plugin});this.wrapPluginConstructor(constructor,plugin);this.pluginNoConflict(id,plugin,noConflict);$.fn[id]=plugin;};Bootstrap.simulate=function(element,type,options){var ret=true;if(element instanceof $){element.each(function(){if(!Bootstrap.simulate(this,type,options))ret=false;});return ret;}if(!(element instanceof HTMLElement))this.fatal('Passed element must be an instance of HTMLElement, got "@type" instead.',{'@type':typeof element});if(typeof $.simulate==='function'){new $.simulate(element,type,options);return true;}var event;var ctor;var types=[].concat(type);for(var i=0,l=types.length;i&lt;l;i++){type=types[i];for(var name in this.eventMap)if(this.eventMap[name].test(type)){ctor=name;break;}if(!ctor)throw new SyntaxError('Only rudimentary HTMLEvents, KeyboardEvents and MouseEvents are supported: '+type);var opts={bubbles:true,cancelable:true};if(ctor==='KeyboardEvent'||ctor==='MouseEvent')$.extend(opts,{ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1});if(ctor==='MouseEvent')$.extend(opts,{button:0,pointerX:0,pointerY:0,view:window});if(options)$.extend(opts,options);if(typeof window[ctor]==='function'){event=new window[ctor](type,opts);if(!element.dispatchEvent(event))ret=false;}else if(document.createEvent){event=document.createEvent(ctor);event.initEvent(type,opts.bubbles,opts.cancelable);if(!element.dispatchEvent(event))ret=false;}else if(typeof element.fireEvent==='function'){event=$.extend(document.createEventObject(),opts);if(!element.fireEvent('on'+type,event))ret=false;}else{if(typeof element[type])element[type]();}}return ret;};Bootstrap.stripHtml=function(html){if(html instanceof $)html=html.html();else{if(html instanceof Element)html=html.innerHTML;}var tmp=document.createElement('DIV');tmp.innerHTML=html;return (tmp.textContent||tmp.innerText||'').replace(/^[\s\n\t]*|[\s\n\t]*$/,'');};Bootstrap.unsupported=function(type,name,value){Bootstrap.warn('Unsupported by Drupal Bootstrap: (@type) @name -&gt; @value',{'@type':type,'@name':name,'@value':typeof value==='object'?JSON.stringify(value):value});};Bootstrap.warn=function(message,args){if(this.settings.dev&amp;&amp;console.warn)console.warn(Drupal.formatString(message,args));};Bootstrap.wrapPluginConstructor=function(constructor,plugin,extend){var proto=constructor.prototype;var option=this.option;if(proto.option===void (0))proto.option=function(){return option.apply(this,arguments);};if(extend){if(plugin.prototype!==void 0)for(var key in plugin.prototype){if(!plugin.prototype.hasOwnProperty(key))continue;var value=plugin.prototype[key];if(typeof value==='function')proto[key]=this.superWrapper(proto[key]||function(){},value);else proto[key]=$.isPlainObject(value)?$.extend(true,{},proto[key],value):value;}delete plugin.prototype;for(key in plugin){if(!plugin.hasOwnProperty(key))continue;value=plugin[key];if(typeof value==='function')constructor[key]=this.superWrapper(constructor[key]||function(){},value);else constructor[key]=$.isPlainObject(value)?$.extend(true,{},constructor[key],value):value;}}};Drupal.bootstrap=Drupal.bootstrap||Bootstrap;})(window._,window.jQuery,window.Drupal,window.drupalSettings);;
(function($,_){var Attributes=function(attributes){this.data={};this.data['class']=[];this.merge(attributes);};Attributes.prototype.toString=function(){var output='';var name,value;var checkPlain=function(str){return str&amp;&amp;str.toString().replace(/&amp;/g,'&amp;amp;').replace(/"/g,'&amp;quot;').replace(/&lt;/g,'&amp;lt;').replace(/&gt;/g,'&amp;gt;')||'';};var data=this.getData();for(name in data){if(!data.hasOwnProperty(name))continue;value=data[name];if(_.isFunction(value))value=value();if(_.isObject(value))value=_.values(value);if(_.isArray(value))value=value.join(' ');output+=' '+checkPlain(name)+'="'+checkPlain(value)+'"';}return output;};Attributes.prototype.toPlainObject=function(){var object={};var name,value;var data=this.getData();for(name in data){if(!data.hasOwnProperty(name))continue;value=data[name];if(_.isFunction(value))value=value();if(_.isObject(value))value=_.values(value);if(_.isArray(value))value=value.join(' ');object[name]=value;}return object;};Attributes.prototype.addClass=function(value){var args=Array.prototype.slice.call(arguments);this.data['class']=this.sanitizeClasses(this.data['class'].concat(args));return this;};Attributes.prototype.exists=function(name){return this.data[name]!==void (0)&amp;&amp;this.data[name]!==null;};Attributes.prototype.get=function(name,defaultValue){if(!this.exists(name))this.data[name]=defaultValue;return this.data[name];};Attributes.prototype.getData=function(){return _.extend({},this.data);};Attributes.prototype.getClasses=function(){return this.get('class',[]);};Attributes.prototype.hasClass=function(className){className=this.sanitizeClasses(Array.prototype.slice.call(arguments));var classes=this.getClasses();for(var i=0,l=className.length;i&lt;l;i++)if(_.indexOf(classes,className[i])===-1)return false;return true;};Attributes.prototype.merge=function(object,recursive){if(!object)return this;if(object instanceof $)object=object[0];if(object instanceof Node)object=Array.prototype.slice.call(object.attributes).reduce(function(attributes,attribute){attributes[attribute.name]=attribute.value;return attributes;},{});else if(object instanceof Attributes)object=object.getData();else object=_.extend({},object);if(!$.isPlainObject(object)){setTimeout(function(){throw new Error('Passed object is not supported: '+object);});return this;}if(object&amp;&amp;object['class']!==void 0){this.addClass(object['class']);delete object['class'];}if(recursive===void 0||recursive)this.data=$.extend(true,{},this.data,object);else this.data=$.extend({},this.data,object);return this;};Attributes.prototype.remove=function(name){if(this.exists(name))delete this.data[name];return this;};Attributes.prototype.removeClass=function(className){var remove=this.sanitizeClasses(Array.prototype.slice.apply(arguments));this.data['class']=_.without(this.getClasses(),remove);return this;};Attributes.prototype.replaceClass=function(oldValue,newValue){var classes=this.getClasses();var i=_.indexOf(this.sanitizeClasses(oldValue),classes);if(i&gt;=0){classes[i]=newValue;this.set('class',classes);}return this;};Attributes.prototype.sanitizeClasses=function(classes){return _.chain(Array.prototype.slice.call(arguments)).flatten().map(function(string){return string.split(' ');}).flatten().filter().map(function(value){return Attributes.cleanClass(value);}).uniq().value();};Attributes.prototype.set=function(name,value){var obj=$.isPlainObject(name)?name:{};if(typeof name==='string')obj[name]=value;return this.merge(obj);};Attributes.cleanClass=function(identifier,filter){filter=filter||{' ':'-','_':'-','/':'-','[':'-',']':''};identifier=identifier.toLowerCase();if(filter['__']===void 0)identifier=identifier.replace('__','#DOUBLE_UNDERSCORE#');identifier=identifier.replace(Object.keys(filter),Object.keys(filter).map(function(key){return filter[key];}));if(filter['__']===void 0)identifier=identifier.replace('#DOUBLE_UNDERSCORE#','__');identifier=identifier.replace(/[^\u002D\u0030-\u0039\u0041-\u005A\u005F\u0061-\u007A\u00A1-\uFFFF]/g,'');identifier=identifier.replace(['/^[0-9]/','/^(-[0-9])|^(--)/'],['_','__']);return identifier;};Attributes.create=function(attributes){return new Attributes(attributes);};window.Attributes=Attributes;})(window.jQuery,window._);;
(function($,Drupal,Bootstrap,Attributes){if(!Drupal.icon)Drupal.icon={bundles:{}};if(!Drupal.theme.icon||Drupal.theme.prototype.icon)$.extend(Drupal.theme,{icon:function(bundle,icon,attributes){if(!Drupal.icon.bundles[bundle])return '';attributes=Attributes.create(attributes).addClass('icon').set('aria-hidden','true');icon=Drupal.icon.bundles[bundle](icon,attributes);return '&lt;span'+attributes+'&gt;&lt;/span&gt;';}});Drupal.icon.bundles.bootstrap=function(icon,attributes){attributes.addClass(['glyphicon','glyphicon-'+icon]);};$.extend(Drupal.theme,{ajaxThrobber:function(){return Drupal.theme('bootstrapIcon','refresh',{'class':['ajax-throbber','glyphicon-spin']});},button:function(attributes){attributes=Attributes.create(attributes).addClass('btn');var context=attributes.get('context','default');var label=attributes.get('value','');attributes.remove('context').remove('value');if(!attributes.hasClass(['btn-default','btn-primary','btn-success','btn-info','btn-warning','btn-danger','btn-link']))attributes.addClass('btn-'+Bootstrap.checkPlain(context));if(!attributes.exists('type'))attributes.set('type',attributes.hasClass('form-submit')?'submit':'button');return '&lt;button'+attributes+'&gt;'+label+'&lt;/button&gt;';},btn:function(attributes){return Drupal.theme('button',attributes);},'btn-block':function(attributes){return Drupal.theme('button',Attributes.create(attributes).addClass('btn-block'));},'btn-lg':function(attributes){return Drupal.theme('button',Attributes.create(attributes).addClass('btn-lg'));},'btn-sm':function(attributes){return Drupal.theme('button',Attributes.create(attributes).addClass('btn-sm'));},'btn-xs':function(attributes){return Drupal.theme('button',Attributes.create(attributes).addClass('btn-xs'));},bootstrapIcon:function(name,attributes){return Drupal.theme('icon','bootstrap',name,attributes);}});})(window.jQuery,window.Drupal,window.Drupal.bootstrap,window.Attributes);;
var Drupal=Drupal||{};(function($,Drupal,Bootstrap){"use strict";var $document=$(document);Bootstrap.extendPlugin('popover',function(settings){return {DEFAULTS:{animation:!!settings.popover_animation,autoClose:!!settings.popover_auto_close,enabled:settings.popover_enabled,html:!!settings.popover_html,placement:settings.popover_placement,selector:settings.popover_selector,trigger:settings.popover_trigger,title:settings.popover_title,content:settings.popover_content,delay:parseInt(settings.popover_delay,10),container:settings.popover_container}};});Drupal.behaviors.bootstrapPopovers={$activePopover:null,attach:function(context){if(!$.fn.popover||!$.fn.popover.Constructor.DEFAULTS.enabled)return;var _this=this;$document.on('show.bs.popover','[data-toggle=popover]',function(){var $trigger=$(this);var popover=$trigger.data('bs.popover');if(popover.options.originalTrigger==='click'){if(_this.$activePopover&amp;&amp;_this.getOption('autoClose')&amp;&amp;!_this.$activePopover.is($trigger))_this.$activePopover.popover('hide');_this.$activePopover=$trigger;}}).on('focus.bs.popover',':visible',function(e){var $target=$(e.target);if(_this.$activePopover&amp;&amp;_this.getOption('autoClose')&amp;&amp;!_this.$activePopover.is($target)&amp;&amp;!$target.closest('.popover.in')[0]){_this.$activePopover.popover('hide');_this.$activePopover=null;}}).on('click.bs.popover',function(e){var $target=$(e.target);if(_this.$activePopover&amp;&amp;_this.getOption('autoClose')&amp;&amp;!$target.is('[data-toggle=popover]')&amp;&amp;!$target.closest('.popover.in')[0]){_this.$activePopover.popover('hide');_this.$activePopover=null;}}).on('keyup.bs.popover',function(e){if(_this.$activePopover&amp;&amp;_this.getOption('autoClose')&amp;&amp;e.which===27){_this.$activePopover.popover('hide');_this.$activePopover=null;}});;var elements=$(context).find('[data-toggle=popover]').toArray();for(var i=0;i&lt;elements.length;i++){var $element=$(elements[i]);var options=$.extend({},$.fn.popover.Constructor.DEFAULTS,$element.data());options.originalTrigger=options.trigger;if(options.trigger==='click')options.trigger='manual';var target=options.target||$element.is('a[href^="#"]')&amp;&amp;$element.attr('href');var $target=$document.find(target).clone();if(!options.content&amp;&amp;$target[0]){$target.removeClass('visually-hidden hidden').removeAttr('aria-hidden');options.content=$target.wrap('&lt;div/&gt;').parent()[options.html?'html':'text']()||'';}$element.popover(options);if(options.originalTrigger==='click'){$element.off('click.drupal.bootstrap.popover').on('click.drupal.bootstrap.popover',function(e){$(this).popover('toggle');e.preventDefault();e.stopPropagation();});;}}},detach:function(context){if(!$.fn.popover||!$.fn.popover.Constructor.DEFAULTS.enabled)return;$(context).find('[data-toggle="popover"]').off('click.drupal.bootstrap.popover').popover('destroy');;},getOption:function(name,defaultValue,element){var $element=element?$(element):this.$activePopover;var options=$.extend(true,{},$.fn.popover.Constructor.DEFAULTS,($element&amp;&amp;$element.data('bs.popover')||{}).options);if(options[name]!==void 0)return options[name];return defaultValue!==void 0?defaultValue:void 0;}};})(window.jQuery,window.Drupal,window.Drupal.bootstrap);;
var Drupal=Drupal||{};(function($,Drupal,Bootstrap){"use strict";Bootstrap.extendPlugin('tooltip',function(settings){return {DEFAULTS:{animation:!!settings.tooltip_animation,enabled:settings.tooltip_enabled,html:!!settings.tooltip_html,placement:settings.tooltip_placement,selector:settings.tooltip_selector,trigger:settings.tooltip_trigger,delay:parseInt(settings.tooltip_delay,10),container:settings.tooltip_container}};});Drupal.behaviors.bootstrapTooltips={attach:function(context){if(!$.fn.tooltip||!$.fn.tooltip.Constructor.DEFAULTS.enabled)return;var elements=$(context).find('[data-toggle="tooltip"]').toArray();for(var i=0;i&lt;elements.length;i++){var $element=$(elements[i]);var options=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,$element.data());$element.tooltip(options);}},detach:function(context){if(!$.fn.tooltip||!$.fn.tooltip.Constructor.DEFAULTS.enabled)return;$(context).find('[data-toggle="tooltip"]').tooltip('destroy');}};})(window.jQuery,window.Drupal,window.Drupal.bootstrap);;
/* @license GNU-GPL-2.0-or-later https://raw.githubusercontent.com/jquery-form/form/master/LICENSE */
/*!
 * jQuery Form Plugin
 * version: 4.3.0
 * Requires jQuery v1.7.2 or later
 * Project repository: https://github.com/jquery-form/form

 * Copyright 2017 Kevin Morris
 * Copyright 2006 M. Alsup

 * Dual licensed under the LGPL-2.1+ or MIT licenses
 * https://github.com/jquery-form/form#license

 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 */
!function(r){"function"==typeof define&amp;&amp;define.amd?define(["jquery"],r):"object"==typeof module&amp;&amp;module.exports?module.exports=function(e,t){return void 0===t&amp;&amp;(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),r(t),t}:r(jQuery)}(function(q){"use strict";var m=/\r?\n/g,S={};S.fileapi=void 0!==q('&lt;input type="file"&gt;').get(0).files,S.formdata=void 0!==window.FormData;var _=!!q.fn.prop;function o(e){var t=e.data;e.isDefaultPrevented()||(e.preventDefault(),q(e.target).closest("form").ajaxSubmit(t))}function i(e){var t=e.target,r=q(t);if(!r.is("[type=submit],[type=image]")){var a=r.closest("[type=submit]");if(0===a.length)return;t=a[0]}var n,o=t.form;"image"===(o.clk=t).type&amp;&amp;(void 0!==e.offsetX?(o.clk_x=e.offsetX,o.clk_y=e.offsetY):"function"==typeof q.fn.offset?(n=r.offset(),o.clk_x=e.pageX-n.left,o.clk_y=e.pageY-n.top):(o.clk_x=e.pageX-t.offsetLeft,o.clk_y=e.pageY-t.offsetTop)),setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function N(){var e;q.fn.ajaxSubmit.debug&amp;&amp;(e="[jquery.form] "+Array.prototype.join.call(arguments,""),window.console&amp;&amp;window.console.log?window.console.log(e):window.opera&amp;&amp;window.opera.postError&amp;&amp;window.opera.postError(e))}q.fn.attr2=function(){if(!_)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&amp;&amp;e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},q.fn.ajaxSubmit=function(M,e,t,r){if(!this.length)return N("ajaxSubmit: skipping submit process - no element selected"),this;var O,a,n,o,X=this;"function"==typeof M?M={success:M}:"string"==typeof M||!1===M&amp;&amp;0&lt;arguments.length?(M={url:M,data:e,dataType:t},"function"==typeof r&amp;&amp;(M.success=r)):void 0===M&amp;&amp;(M={}),O=M.method||M.type||this.attr2("method"),n=(n=(n="string"==typeof(a=M.url||this.attr2("action"))?q.trim(a):"")||window.location.href||"")&amp;&amp;(n.match(/^([^#]+)/)||[])[1],o=/(MSIE|Trident)/.test(navigator.userAgent||"")&amp;&amp;/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",M=q.extend(!0,{url:n,success:q.ajaxSettings.success,type:O||q.ajaxSettings.type,iframeSrc:o},M);var i={};if(this.trigger("form-pre-serialize",[this,M,i]),i.veto)return N("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(M.beforeSerialize&amp;&amp;!1===M.beforeSerialize(this,M))return N("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var s=M.traditional;void 0===s&amp;&amp;(s=q.ajaxSettings.traditional);var u,c,C=[],l=this.formToArray(M.semantic,C,M.filtering);if(M.data&amp;&amp;(c=q.isFunction(M.data)?M.data(l):M.data,M.extraData=c,u=q.param(c,s)),M.beforeSubmit&amp;&amp;!1===M.beforeSubmit(l,this,M))return N("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[l,this,M,i]),i.veto)return N("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var f=q.param(l,s);u&amp;&amp;(f=f?f+"&amp;"+u:u),"GET"===M.type.toUpperCase()?(M.url+=(0&lt;=M.url.indexOf("?")?"&amp;":"?")+f,M.data=null):M.data=f;var d,m,p,h=[];M.resetForm&amp;&amp;h.push(function(){X.resetForm()}),M.clearForm&amp;&amp;h.push(function(){X.clearForm(M.includeHidden)}),!M.dataType&amp;&amp;M.target?(d=M.success||function(){},h.push(function(e,t,r){var a=arguments,n=M.replaceTarget?"replaceWith":"html";q(M.target)[n](e).each(function(){d.apply(this,a)})})):M.success&amp;&amp;(q.isArray(M.success)?q.merge(h,M.success):h.push(M.success)),M.success=function(e,t,r){for(var a=M.context||this,n=0,o=h.length;n&lt;o;n++)h[n].apply(a,[e,t,r||X,X])},M.error&amp;&amp;(m=M.error,M.error=function(e,t,r){var a=M.context||this;m.apply(a,[e,t,r,X])}),M.complete&amp;&amp;(p=M.complete,M.complete=function(e,t){var r=M.context||this;p.apply(r,[e,t,X])});var v=0&lt;q("input[type=file]:enabled",this).filter(function(){return""!==q(this).val()}).length,g="multipart/form-data",x=X.attr("enctype")===g||X.attr("encoding")===g,y=S.fileapi&amp;&amp;S.formdata;N("fileAPI :"+y);var b,T=(v||x)&amp;&amp;!y;!1!==M.iframe&amp;&amp;(M.iframe||T)?M.closeKeepAlive?q.get(M.closeKeepAlive,function(){b=w(l)}):b=w(l):b=(v||x)&amp;&amp;y?function(e){for(var r=new FormData,t=0;t&lt;e.length;t++)r.append(e[t].name,e[t].value);if(M.extraData){var a=function(e){var t,r,a=q.param(e,M.traditional).split("&amp;"),n=a.length,o=[];for(t=0;t&lt;n;t++)a[t]=a[t].replace(/\+/g," "),r=a[t].split("="),o.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return o}(M.extraData);for(t=0;t&lt;a.length;t++)a[t]&amp;&amp;r.append(a[t][0],a[t][1])}M.data=null;var n=q.extend(!0,{},q.ajaxSettings,M,{contentType:!1,processData:!1,cache:!1,type:O||"POST"});M.uploadProgress&amp;&amp;(n.xhr=function(){var e=q.ajaxSettings.xhr();return e.upload&amp;&amp;e.upload.addEventListener("progress",function(e){var t=0,r=e.loaded||e.position,a=e.total;e.lengthComputable&amp;&amp;(t=Math.ceil(r/a*100)),M.uploadProgress(e,r,a,t)},!1),e});n.data=null;var o=n.beforeSend;return n.beforeSend=function(e,t){M.formData?t.data=M.formData:t.data=r,o&amp;&amp;o.call(this,e,t)},q.ajax(n)}(l):q.ajax(M),X.removeData("jqxhr").data("jqxhr",b);for(var j=0;j&lt;C.length;j++)C[j]=null;return this.trigger("form-submit-notify",[this,M]),this;function w(e){var t,r,l,f,o,d,m,p,a,n,h,v,i=X[0],g=q.Deferred();if(g.abort=function(e){p.abort(e)},e)for(r=0;r&lt;C.length;r++)t=q(C[r]),_?t.prop("disabled",!1):t.removeAttr("disabled");(l=q.extend(!0,{},q.ajaxSettings,M)).context=l.context||l,o="jqFormIO"+(new Date).getTime();var s=i.ownerDocument,u=X.closest("body");if(l.iframeTarget?(n=(d=q(l.iframeTarget,s)).attr2("name"))?o=n:d.attr2("name",o):(d=q('&lt;iframe name="'+o+'" src="'+l.iframeSrc+'" /&gt;',s)).css({position:"absolute",top:"-1000px",left:"-1000px"}),m=d[0],p={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var t="timeout"===e?"timeout":"aborted";N("aborting upload... "+t),this.aborted=1;try{m.contentWindow.document.execCommand&amp;&amp;m.contentWindow.document.execCommand("Stop")}catch(e){}d.attr("src",l.iframeSrc),p.error=t,l.error&amp;&amp;l.error.call(l.context,p,t,e),f&amp;&amp;q.event.trigger("ajaxError",[p,l,t]),l.complete&amp;&amp;l.complete.call(l.context,p,t)}},(f=l.global)&amp;&amp;0==q.active++&amp;&amp;q.event.trigger("ajaxStart"),f&amp;&amp;q.event.trigger("ajaxSend",[p,l]),l.beforeSend&amp;&amp;!1===l.beforeSend.call(l.context,p,l))return l.global&amp;&amp;q.active--,g.reject(),g;if(p.aborted)return g.reject(),g;(a=i.clk)&amp;&amp;(n=a.name)&amp;&amp;!a.disabled&amp;&amp;(l.extraData=l.extraData||{},l.extraData[n]=a.value,"image"===a.type&amp;&amp;(l.extraData[n+".x"]=i.clk_x,l.extraData[n+".y"]=i.clk_y));var x=1,y=2;function b(t){var r=null;try{t.contentWindow&amp;&amp;(r=t.contentWindow.document)}catch(e){N("cannot get iframe.contentWindow document: "+e)}if(r)return r;try{r=t.contentDocument?t.contentDocument:t.document}catch(e){N("cannot get iframe.contentDocument: "+e),r=t.document}return r}var c=q("meta[name=csrf-token]").attr("content"),T=q("meta[name=csrf-param]").attr("content");function j(){var e=X.attr2("target"),t=X.attr2("action"),r=X.attr("enctype")||X.attr("encoding")||"multipart/form-data";i.setAttribute("target",o),O&amp;&amp;!/post/i.test(O)||i.setAttribute("method","POST"),t!==l.url&amp;&amp;i.setAttribute("action",l.url),l.skipEncodingOverride||O&amp;&amp;!/post/i.test(O)||X.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&amp;&amp;(v=setTimeout(function(){h=!0,A(x)},l.timeout));var a=[];try{if(l.extraData)for(var n in l.extraData)l.extraData.hasOwnProperty(n)&amp;&amp;(q.isPlainObject(l.extraData[n])&amp;&amp;l.extraData[n].hasOwnProperty("name")&amp;&amp;l.extraData[n].hasOwnProperty("value")?a.push(q('&lt;input type="hidden" name="'+l.extraData[n].name+'"&gt;',s).val(l.extraData[n].value).appendTo(i)[0]):a.push(q('&lt;input type="hidden" name="'+n+'"&gt;',s).val(l.extraData[n]).appendTo(i)[0]));l.iframeTarget||d.appendTo(u),m.attachEvent?m.attachEvent("onload",A):m.addEventListener("load",A,!1),setTimeout(function e(){try{var t=b(m).readyState;N("state = "+t),t&amp;&amp;"uninitialized"===t.toLowerCase()&amp;&amp;setTimeout(e,50)}catch(e){N("Server abort: ",e," (",e.name,")"),A(y),v&amp;&amp;clearTimeout(v),v=void 0}},15);try{i.submit()}catch(e){document.createElement("form").submit.apply(i)}}finally{i.setAttribute("action",t),i.setAttribute("enctype",r),e?i.setAttribute("target",e):X.removeAttr("target"),q(a).remove()}}T&amp;&amp;c&amp;&amp;(l.extraData=l.extraData||{},l.extraData[T]=c),l.forceSync?j():setTimeout(j,10);var w,S,k,D=50;function A(e){if(!p.aborted&amp;&amp;!k){if((S=b(m))||(N("cannot access response document"),e=y),e===x&amp;&amp;p)return p.abort("timeout"),void g.reject(p,"timeout");if(e===y&amp;&amp;p)return p.abort("server abort"),void g.reject(p,"error","server abort");if(S&amp;&amp;S.location.href!==l.iframeSrc||h){m.detachEvent?m.detachEvent("onload",A):m.removeEventListener("load",A,!1);var t,r="success";try{if(h)throw"timeout";var a="xml"===l.dataType||S.XMLDocument||q.isXMLDoc(S);if(N("isXml="+a),!a&amp;&amp;window.opera&amp;&amp;(null===S.body||!S.body.innerHTML)&amp;&amp;--D)return N("requeing onLoad callback, DOM not available"),void setTimeout(A,250);var n=S.body?S.body:S.documentElement;p.responseText=n?n.innerHTML:null,p.responseXML=S.XMLDocument?S.XMLDocument:S,a&amp;&amp;(l.dataType="xml"),p.getResponseHeader=function(e){return{"content-type":l.dataType}[e.toLowerCase()]},n&amp;&amp;(p.status=Number(n.getAttribute("status"))||p.status,p.statusText=n.getAttribute("statusText")||p.statusText);var o,i,s,u=(l.dataType||"").toLowerCase(),c=/(json|script|text)/.test(u);c||l.textarea?(o=S.getElementsByTagName("textarea")[0])?(p.responseText=o.value,p.status=Number(o.getAttribute("status"))||p.status,p.statusText=o.getAttribute("statusText")||p.statusText):c&amp;&amp;(i=S.getElementsByTagName("pre")[0],s=S.getElementsByTagName("body")[0],i?p.responseText=i.textContent?i.textContent:i.innerText:s&amp;&amp;(p.responseText=s.textContent?s.textContent:s.innerText)):"xml"===u&amp;&amp;!p.responseXML&amp;&amp;p.responseText&amp;&amp;(p.responseXML=F(p.responseText));try{w=E(p,u,l)}catch(e){r="parsererror",p.error=t=e||r}}catch(e){N("error caught: ",e),r="error",p.error=t=e||r}p.aborted&amp;&amp;(N("upload aborted"),r=null),p.status&amp;&amp;(r=200&lt;=p.status&amp;&amp;p.status&lt;300||304===p.status?"success":"error"),"success"===r?(l.success&amp;&amp;l.success.call(l.context,w,"success",p),g.resolve(p.responseText,"success",p),f&amp;&amp;q.event.trigger("ajaxSuccess",[p,l])):r&amp;&amp;(void 0===t&amp;&amp;(t=p.statusText),l.error&amp;&amp;l.error.call(l.context,p,r,t),g.reject(p,"error",t),f&amp;&amp;q.event.trigger("ajaxError",[p,l,t])),f&amp;&amp;q.event.trigger("ajaxComplete",[p,l]),f&amp;&amp;!--q.active&amp;&amp;q.event.trigger("ajaxStop"),l.complete&amp;&amp;l.complete.call(l.context,p,r),k=!0,l.timeout&amp;&amp;clearTimeout(v),setTimeout(function(){l.iframeTarget?d.attr("src",l.iframeSrc):d.remove(),p.responseXML=null},100)}}}var F=q.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&amp;&amp;t.documentElement&amp;&amp;"parsererror"!==t.documentElement.nodeName?t:null},L=q.parseJSON||function(e){return window.eval("("+e+")")},E=function(e,t,r){var a=e.getResponseHeader("content-type")||"",n=("xml"===t||!t)&amp;&amp;0&lt;=a.indexOf("xml"),o=n?e.responseXML:e.responseText;return n&amp;&amp;"parsererror"===o.documentElement.nodeName&amp;&amp;q.error&amp;&amp;q.error("parsererror"),r&amp;&amp;r.dataFilter&amp;&amp;(o=r.dataFilter(o,t)),"string"==typeof o&amp;&amp;(("json"===t||!t)&amp;&amp;0&lt;=a.indexOf("json")?o=L(o):("script"===t||!t)&amp;&amp;0&lt;=a.indexOf("javascript")&amp;&amp;q.globalEval(o)),o};return g}},q.fn.ajaxForm=function(e,t,r,a){if(("string"==typeof e||!1===e&amp;&amp;0&lt;arguments.length)&amp;&amp;(e={url:e,data:t,dataType:r},"function"==typeof a&amp;&amp;(e.success=a)),(e=e||{}).delegation=e.delegation&amp;&amp;q.isFunction(q.fn.on),e.delegation||0!==this.length)return e.delegation?(q(document).off("submit.form-plugin",this.selector,o).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,e,o).on("click.form-plugin",this.selector,e,i),this):(e.beforeFormUnbind&amp;&amp;e.beforeFormUnbind(this,e),this.ajaxFormUnbind().on("submit.form-plugin",e,o).on("click.form-plugin",e,i));var n={s:this.selector,c:this.context};return!q.isReady&amp;&amp;n.s?(N("DOM not ready, queuing ajaxForm"),q(function(){q(n.s,n.c).ajaxForm(e)})):N("terminating; zero elements found by selector"+(q.isReady?"":" (DOM not ready)")),this},q.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},q.fn.formToArray=function(e,t,r){var a=[];if(0===this.length)return a;var n,o,i,s,u,c,l,f,d,m,p=this[0],h=this.attr("id"),v=(v=e||void 0===p.elements?p.getElementsByTagName("*"):p.elements)&amp;&amp;q.makeArray(v);if(h&amp;&amp;(e||/(Edge|Trident)\//.test(navigator.userAgent))&amp;&amp;(n=q(':input[form="'+h+'"]').get()).length&amp;&amp;(v=(v||[]).concat(n)),!v||!v.length)return a;for(q.isFunction(r)&amp;&amp;(v=q.map(v,r)),o=0,c=v.length;o&lt;c;o++)if((m=(u=v[o]).name)&amp;&amp;!u.disabled)if(e&amp;&amp;p.clk&amp;&amp;"image"===u.type)p.clk===u&amp;&amp;(a.push({name:m,value:q(u).val(),type:u.type}),a.push({name:m+".x",value:p.clk_x},{name:m+".y",value:p.clk_y}));else if((s=q.fieldValue(u,!0))&amp;&amp;s.constructor===Array)for(t&amp;&amp;t.push(u),i=0,l=s.length;i&lt;l;i++)a.push({name:m,value:s[i]});else if(S.fileapi&amp;&amp;"file"===u.type){t&amp;&amp;t.push(u);var g=u.files;if(g.length)for(i=0;i&lt;g.length;i++)a.push({name:m,value:g[i],type:u.type});else a.push({name:m,value:"",type:u.type})}else null!=s&amp;&amp;(t&amp;&amp;t.push(u),a.push({name:m,value:s,type:u.type,required:u.required}));return e||!p.clk||(m=(d=(f=q(p.clk))[0]).name)&amp;&amp;!d.disabled&amp;&amp;"image"===d.type&amp;&amp;(a.push({name:m,value:f.val()}),a.push({name:m+".x",value:p.clk_x},{name:m+".y",value:p.clk_y})),a},q.fn.formSerialize=function(e){return q.param(this.formToArray(e))},q.fn.fieldSerialize=function(n){var o=[];return this.each(function(){var e=this.name;if(e){var t=q.fieldValue(this,n);if(t&amp;&amp;t.constructor===Array)for(var r=0,a=t.length;r&lt;a;r++)o.push({name:e,value:t[r]});else null!=t&amp;&amp;o.push({name:this.name,value:t})}}),q.param(o)},q.fn.fieldValue=function(e){for(var t=[],r=0,a=this.length;r&lt;a;r++){var n=this[r],o=q.fieldValue(n,e);null==o||o.constructor===Array&amp;&amp;!o.length||(o.constructor===Array?q.merge(t,o):t.push(o))}return t},q.fieldValue=function(e,t){var r=e.name,a=e.type,n=e.tagName.toLowerCase();if(void 0===t&amp;&amp;(t=!0),t&amp;&amp;(!r||e.disabled||"reset"===a||"button"===a||("checkbox"===a||"radio"===a)&amp;&amp;!e.checked||("submit"===a||"image"===a)&amp;&amp;e.form&amp;&amp;e.form.clk!==e||"select"===n&amp;&amp;-1===e.selectedIndex))return null;if("select"!==n)return q(e).val().replace(m,"\r\n");var o=e.selectedIndex;if(o&lt;0)return null;for(var i=[],s=e.options,u="select-one"===a,c=u?o+1:s.length,l=u?o:0;l&lt;c;l++){var f=s[l];if(f.selected&amp;&amp;!f.disabled){var d=(d=f.value)||(f.attributes&amp;&amp;f.attributes.value&amp;&amp;!f.attributes.value.specified?f.text:f.value);if(u)return d;i.push(d)}}return i},q.fn.clearForm=function(e){return this.each(function(){q("input,select,textarea",this).clearFields(e)})},q.fn.clearFields=q.fn.clearInputs=function(r){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();a.test(e)||"textarea"===t?this.value="":"checkbox"===e||"radio"===e?this.checked=!1:"select"===t?this.selectedIndex=-1:"file"===e?/MSIE/.test(navigator.userAgent)?q(this).replaceWith(q(this).clone(!0)):q(this).val(""):r&amp;&amp;(!0===r&amp;&amp;/hidden/.test(e)||"string"==typeof r&amp;&amp;q(this).is(r))&amp;&amp;(this.value="")})},q.fn.resetForm=function(){return this.each(function(){var t=q(this),e=this.tagName.toLowerCase();switch(e){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var r=t.parents("select");return r.length&amp;&amp;r[0].multiple?"option"===e?this.selected=this.defaultSelected:t.find("option").resetForm():r.resetForm(),!0;case"select":return t.find("option").each(function(e){if(this.selected=this.defaultSelected,this.defaultSelected&amp;&amp;!t[0].multiple)return t[0].selectedIndex=e,!1}),!0;case"label":var a=q(t.attr("for")),n=t.find("input,select,textarea");return a[0]&amp;&amp;n.unshift(a[0]),n.resetForm(),!0;case"form":return"function"!=typeof this.reset&amp;&amp;("object"!=typeof this.reset||this.reset.nodeType)||this.reset(),!0;default:return t.find("form,input,label,select,textarea").resetForm(),!0}})},q.fn.enable=function(e){return void 0===e&amp;&amp;(e=!0),this.each(function(){this.disabled=!e})},q.fn.selected=function(r){return void 0===r&amp;&amp;(r=!0),this.each(function(){var e,t=this.type;"checkbox"===t||"radio"===t?this.checked=r:"option"===this.tagName.toLowerCase()&amp;&amp;(e=q(this).parent("select"),r&amp;&amp;e[0]&amp;&amp;"select-one"===e[0].type&amp;&amp;e.find("option").selected(!1),this.selected=r)})},q.fn.ajaxSubmit.debug=!1});

;
/* @license GNU-GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function($,Drupal){Drupal.theme.progressBar=function(id){return (`&lt;div id="${id}" class="progress" aria-live="polite"&gt;`+'&lt;div class="progress__label"&gt;&amp;nbsp;&lt;/div&gt;'+'&lt;div class="progress__track"&gt;&lt;div class="progress__bar"&gt;&lt;/div&gt;&lt;/div&gt;'+'&lt;div class="progress__percentage"&gt;&lt;/div&gt;'+'&lt;div class="progress__description"&gt;&amp;nbsp;&lt;/div&gt;'+'&lt;/div&gt;');};Drupal.ProgressBar=function(id,updateCallback,method,errorCallback){this.id=id;this.method=method||'GET';this.updateCallback=updateCallback;this.errorCallback=errorCallback;this.element=$(Drupal.theme('progressBar',id));};$.extend(Drupal.ProgressBar.prototype,{setProgress(percentage,message,label){if(percentage&gt;=0&amp;&amp;percentage&lt;=100){$(this.element).find('div.progress__bar').each(function(){this.style.width=`${percentage}%`;});$(this.element).find('div.progress__percentage').html(`${percentage}%`);}$('div.progress__description',this.element).html(message);$('div.progress__label',this.element).html(label);if(this.updateCallback)this.updateCallback(percentage,message,this);},startMonitoring(uri,delay){this.delay=delay;this.uri=uri;this.sendPing();},stopMonitoring(){clearTimeout(this.timer);this.uri=null;},sendPing(){if(this.timer)clearTimeout(this.timer);if(this.uri){const pb=this;let uri=this.uri;if(!uri.includes('?'))uri+='?';else uri+='&amp;';uri+='_format=json';$.ajax({type:this.method,url:uri,data:'',dataType:'json',success(progress){if(progress.status===0){pb.displayError(progress.data);return;}pb.setProgress(progress.percentage,progress.message,progress.label);pb.timer=setTimeout(()=&gt;{pb.sendPing();},pb.delay);},error(xmlhttp){const e=new Drupal.AjaxError(xmlhttp,pb.uri);pb.displayError(`&lt;pre&gt;${e.message}&lt;/pre&gt;`);}});}},displayError(string){const error=$('&lt;div class="messages messages--error"&gt;&lt;/div&gt;').html(string);$(this.element).before(error).hide();if(this.errorCallback)this.errorCallback(this);}});})(jQuery,Drupal);;
(function($,Drupal){'use strict';Drupal.theme.progressBar=function(id){return '&lt;div class="progress-wrapper" aria-live="polite"&gt;'+'&lt;div class="message"&gt;&lt;/div&gt;'+'&lt;div id ="'+id+'" class="progress progress-striped active"&gt;'+'&lt;div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"&gt;'+'&lt;span class="percentage"&gt;&lt;/span&gt;'+'&lt;/div&gt;'+'&lt;/div&gt;'+'&lt;div class="progress-label"&gt;&lt;/div&gt;'+'&lt;/div&gt;';};$.extend(Drupal.ProgressBar.prototype,{setProgress:function(percentage,message,label){if(percentage&gt;=0&amp;&amp;percentage&lt;=100){$(this.element).find('.progress-bar').css('width',percentage+'%').attr('aria-valuenow',percentage);$(this.element).find('.percentage').html(percentage+'%');}if(message){message=message.replace(/&lt;br\/&gt;&amp;nbsp;|\s*$/,'');$('.message',this.element).html(message);}if(label)$('.progress-label',this.element).html(label);if(this.updateCallback)this.updateCallback(percentage,message,this);},displayError:function(string){var error=$('&lt;div class="alert alert-block alert-error"&gt;&lt;button class="close" data-dismiss="alert"&gt;&amp;times;&lt;/button&gt;&lt;h4&gt;'+Drupal.t('Error message')+'&lt;/h4&gt;&lt;/div&gt;').append(string);$(this.element).before(error).hide();if(this.errorCallback)this.errorCallback(this);}});})(jQuery,Drupal);;
/* @license MIT https://raw.githubusercontent.com/muicss/loadjs/4.2.0/LICENSE.txt */
loadjs=function(){var h=function(){},c={},u={},f={};function o(e,n){if(e){var r=f[e];if(u[e]=n,r)for(;r.length;)r[0](e,n),r.splice(0,1)}}function l(e,n){e.call&amp;&amp;(e={success:e}),n.length?(e.error||h)(n):(e.success||h)(e)}function d(r,t,s,i){var c,o,e=document,n=s.async,u=(s.numRetries||0)+1,f=s.before||h,l=r.replace(/[\?|#].*$/,""),a=r.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(l)?((o=e.createElement("link")).rel="stylesheet",o.href=a,(c="hideFocus"in o)&amp;&amp;o.relList&amp;&amp;(c=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(l)?(o=e.createElement("img")).src=a:((o=e.createElement("script")).src=r,o.async=void 0===n||n),!(o.onload=o.onerror=o.onbeforeload=function(e){var n=e.type[0];if(c)try{o.sheet.cssText.length||(n="e")}catch(e){18!=e.code&amp;&amp;(n="e")}if("e"==n){if((i+=1)&lt;u)return d(r,t,s,i)}else if("preload"==o.rel&amp;&amp;"style"==o.as)return o.rel="stylesheet";t(r,n,e.defaultPrevented)})!==f(r,o)&amp;&amp;e.head.appendChild(o)}function r(e,n,r){var t,s;if(n&amp;&amp;n.trim&amp;&amp;(t=n),s=(t?r:n)||{},t){if(t in c)throw"LoadJS";c[t]=!0}function i(n,r){!function(e,t,n){var r,s,i=(e=e.push?e:[e]).length,c=i,o=[];for(r=function(e,n,r){if("e"==n&amp;&amp;o.push(e),"b"==n){if(!r)return;o.push(e)}--i||t(o)},s=0;s&lt;c;s++)d(e[s],r,n)}(e,function(e){l(s,e),n&amp;&amp;l({success:n,error:r},e),o(t,e)},s)}if(s.returnPromise)return new Promise(i);i()}return r.ready=function(e,n){return function(e,r){e=e.push?e:[e];var n,t,s,i=[],c=e.length,o=c;for(n=function(e,n){n.length&amp;&amp;i.push(e),--o||r(i)};c--;)t=e[c],(s=u[t])?n(t,s):(f[t]=f[t]||[]).push(n)}(e,function(e){l(n,e)}),r},r.done=function(e){o(e,[])},r.reset=function(){c={},u={},f={}},r.isDefined=function(e){return e in c},r}();;
/* @license GNU-GPL-2.0-or-later https://www.drupal.org/licensing/faq */
Drupal.debounce=function(func,wait,immediate){let timeout;let result;return function(...args){const context=this;const later=function(){timeout=null;if(!immediate)result=func.apply(context,args);};const callNow=immediate&amp;&amp;!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result;};};;
(function(Drupal,debounce){let liveElement;const announcements=[];Drupal.behaviors.drupalAnnounce={attach(context){if(!liveElement){liveElement=document.createElement('div');liveElement.id='drupal-live-announce';liveElement.className='visually-hidden';liveElement.setAttribute('aria-live','polite');liveElement.setAttribute('aria-busy','false');document.body.appendChild(liveElement);}}};function announce(){const text=[];let priority='polite';let announcement;const il=announcements.length;for(let i=0;i&lt;il;i++){announcement=announcements.pop();text.unshift(announcement.text);if(announcement.priority==='assertive')priority='assertive';}if(text.length){liveElement.innerHTML='';liveElement.setAttribute('aria-busy','true');liveElement.setAttribute('aria-live',priority);liveElement.innerHTML=text.join('\n');liveElement.setAttribute('aria-busy','false');}}Drupal.announce=function(text,priority){announcements.push({text,priority});return debounce(announce,200)();};})(Drupal,Drupal.debounce);;
((Drupal)=&gt;{Drupal.Message=class{constructor(messageWrapper=null){if(!messageWrapper)this.messageWrapper=Drupal.Message.defaultWrapper();else this.messageWrapper=messageWrapper;}static defaultWrapper(){let wrapper=document.querySelector('[data-drupal-messages]');if(!wrapper){wrapper=document.querySelector('[data-drupal-messages-fallback]');wrapper.removeAttribute('data-drupal-messages-fallback');wrapper.setAttribute('data-drupal-messages','');wrapper.classList.remove('hidden');}return wrapper.innerHTML===''?Drupal.Message.messageInternalWrapper(wrapper):wrapper.firstElementChild;}static getMessageTypeLabels(){return {status:Drupal.t('Status message'),error:Drupal.t('Error message'),warning:Drupal.t('Warning message')};}add(message,options={}){if(!options.hasOwnProperty('type'))options.type='status';if(typeof message!=='string')throw new Error('Message must be a string.');Drupal.Message.announce(message,options);options.id=options.id?String(options.id):`${options.type}-${Math.random().toFixed(15).replace('0.','')}`;if(!Drupal.Message.getMessageTypeLabels().hasOwnProperty(options.type)){const {type}=options;throw new Error(`The message type, ${type}, is not present in Drupal.Message.getMessageTypeLabels().`);}this.messageWrapper.appendChild(Drupal.theme('message',{text:message},options));return options.id;}select(id){return this.messageWrapper.querySelector(`[data-drupal-message-id^="${id}"]`);}remove(id){return this.messageWrapper.removeChild(this.select(id));}clear(){Array.prototype.forEach.call(this.messageWrapper.querySelectorAll('[data-drupal-message-id]'),(message)=&gt;{this.messageWrapper.removeChild(message);});}static announce(message,options){if(!options.priority&amp;&amp;(options.type==='warning'||options.type==='error'))options.priority='assertive';if(options.announce!=='')Drupal.announce(options.announce||message,options.priority);}static messageInternalWrapper(messageWrapper){const innerWrapper=document.createElement('div');innerWrapper.setAttribute('class','messages__wrapper');messageWrapper.insertAdjacentElement('afterbegin',innerWrapper);return innerWrapper;}};Drupal.theme.message=({text},{type,id})=&gt;{const messagesTypes=Drupal.Message.getMessageTypeLabels();const messageWrapper=document.createElement('div');messageWrapper.setAttribute('class',`messages messages--${type}`);messageWrapper.setAttribute('role',type==='error'||type==='warning'?'alert':'status');messageWrapper.setAttribute('data-drupal-message-id',id);messageWrapper.setAttribute('data-drupal-message-type',type);messageWrapper.setAttribute('aria-label',messagesTypes[type]);messageWrapper.innerHTML=`${text}`;return messageWrapper;};})(Drupal);;
(function($,Drupal){Drupal.Message.getMessageTypeClass=function(type){var classes=this.getMessageTypeClasses();return 'alert alert-'+(classes[type]||'success');};Drupal.Message.getMessageTypeClasses=function(){return {status:'success',error:'danger',warning:'warning',info:'info'};};Drupal.Message.getMessageTypeLabel=function(type){var labels=this.getMessageTypeLabels();return labels[type];};Drupal.Message.getMessageTypeLabels=function(){return {status:Drupal.t('Status message'),error:Drupal.t('Error message'),warning:Drupal.t('Warning message'),info:Drupal.t('Informative message')};};Drupal.Message.getMessageTypeRole=function(type){var labels=this.getMessageTypeRoles();return labels[type];};Drupal.Message.getMessageTypeRoles=function(){return {status:'status',error:'alert',warning:'alert',info:'status'};};Drupal.theme.message=function(message,options){options=options||{};var wrapper=Drupal.theme('messageWrapper',options.id||(new Date()).getTime(),options.type||'status');if(options.dismissible===void 0||!!options.dismissible){wrapper.classList.add('alert-dismissible');wrapper.appendChild(Drupal.theme('messageClose'));}wrapper.appendChild(Drupal.theme('messageContents',message&amp;&amp;message.text));return wrapper;};Drupal.theme.messageWrapper=function(id,type){var wrapper=document.createElement('div');var label=Drupal.Message.getMessageTypeLabel(type);wrapper.setAttribute('class',Drupal.Message.getMessageTypeClass(type));wrapper.setAttribute('role',Drupal.Message.getMessageTypeRole(type));wrapper.setAttribute('aria-label',label);wrapper.setAttribute('data-drupal-message-id',id);wrapper.setAttribute('data-drupal-message-type',type);if(label)wrapper.appendChild(Drupal.theme('messageLabel',label));return wrapper;};Drupal.theme.messageClose=function(){var element=document.createElement('button');element.setAttribute('class','close');element.setAttribute('type','button');element.setAttribute('role','button');element.setAttribute('data-dismiss','alert');element.setAttribute('aria-label',Drupal.t('Close'));element.innerHTML='&lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;';return element;};Drupal.theme.messageLabel=function(label){var element=document.createElement('h2');element.setAttribute('class','sr-only');element.innerHTML=label;return element;};Drupal.theme.messageContents=function(html){var element=document.createElement('p');element.innerHTML=''+html;return element;};})(window.jQuery,window.Drupal);;
(function($,window,Drupal,drupalSettings,loadjs,{isFocusable,tabbable}){Drupal.behaviors.AJAX={attach(context,settings){function loadAjaxBehavior(base){const elementSettings=settings.ajax[base];if(typeof elementSettings.selector==='undefined')elementSettings.selector=`#${base}`;once('drupal-ajax',$(elementSettings.selector)).forEach((el)=&gt;{elementSettings.element=el;elementSettings.base=base;Drupal.ajax(elementSettings);});}Object.keys(settings.ajax||{}).forEach(loadAjaxBehavior);Drupal.ajax.bindAjaxLinks(document.body);once('ajax','.use-ajax-submit').forEach((el)=&gt;{const elementSettings={};elementSettings.url=$(el.form).attr('action');elementSettings.setClick=true;elementSettings.event='click';elementSettings.progress={type:'throbber'};elementSettings.base=el.id;elementSettings.element=el;Drupal.ajax(elementSettings);});},detach(context,settings,trigger){if(trigger==='unload')Drupal.ajax.expired().forEach((instance)=&gt;{Drupal.ajax.instances[instance.instanceIndex]=null;});}};Drupal.AjaxError=function(xmlhttp,uri,customMessage){let statusCode;let statusText;let responseText;if(xmlhttp.status)statusCode=`\n${Drupal.t('An AJAX HTTP error occurred.')}\n${Drupal.t('HTTP Result Code: !status',{'!status':xmlhttp.status})}`;else statusCode=`\n${Drupal.t('An AJAX HTTP request terminated abnormally.')}`;statusCode+=`\n${Drupal.t('Debugging information follows.')}`;const pathText=`\n${Drupal.t('Path: !uri',{'!uri':uri})}`;statusText='';try{statusText=`\n${Drupal.t('StatusText: !statusText',{'!statusText':xmlhttp.statusText.trim()})}`;}catch(e){}responseText='';try{responseText=`\n${Drupal.t('ResponseText: !responseText',{'!responseText':xmlhttp.responseText.trim()})}`;}catch(e){}responseText=responseText.replace(/&lt;("[^"]*"|'[^']*'|[^'"&gt;])*&gt;/gi,'');responseText=responseText.replace(/[\n]+\s+/g,'\n');const readyStateText=xmlhttp.status===0?`\n${Drupal.t('ReadyState: !readyState',{'!readyState':xmlhttp.readyState})}`:'';customMessage=customMessage?`\n${Drupal.t('CustomMessage: !customMessage',{'!customMessage':customMessage})}`:'';this.message=statusCode+pathText+statusText+customMessage+responseText+readyStateText;this.name='AjaxError';if(!Drupal.AjaxError.messages)Drupal.AjaxError.messages=new Drupal.Message();Drupal.AjaxError.messages.add(Drupal.t("Oops, something went wrong. Check your browser's developer console for more details."),{type:'error'});};Drupal.AjaxError.prototype=new Error();Drupal.AjaxError.prototype.constructor=Drupal.AjaxError;Drupal.ajax=function(settings){if(arguments.length!==1)throw new Error('Drupal.ajax() function must be called with one configuration object only');const base=settings.base||false;const element=settings.element||false;delete settings.base;delete settings.element;if(!settings.progress&amp;&amp;!element)settings.progress=false;const ajax=new Drupal.Ajax(base,element,settings);ajax.instanceIndex=Drupal.ajax.instances.length;Drupal.ajax.instances.push(ajax);return ajax;};Drupal.ajax.instances=[];Drupal.ajax.expired=function(){return Drupal.ajax.instances.filter((instance)=&gt;instance&amp;&amp;instance.element!==false&amp;&amp;!document.body.contains(instance.element));};Drupal.ajax.bindAjaxLinks=(element)=&gt;{once('ajax','.use-ajax',element).forEach((ajaxLink)=&gt;{const $linkElement=$(ajaxLink);const elementSettings={progress:{type:'throbber'},dialogType:$linkElement.data('dialog-type'),dialog:$linkElement.data('dialog-options'),dialogRenderer:$linkElement.data('dialog-renderer'),base:$linkElement.attr('id'),element:ajaxLink};const href=$linkElement.attr('href');if(href){elementSettings.url=href;elementSettings.event='click';}const httpMethod=$linkElement.data('ajax-http-method');if(httpMethod)elementSettings.httpMethod=httpMethod;Drupal.ajax(elementSettings);});};Drupal.Ajax=function(base,element,elementSettings){const defaults={httpMethod:'POST',event:element?'mousedown':null,keypress:true,selector:base?`#${base}`:null,effect:'none',speed:'none',method:'replaceWith',progress:{type:'throbber',message:Drupal.t('Processing...')},submit:{js:true}};$.extend(this,defaults,elementSettings);this.commands=new Drupal.AjaxCommands();this.instanceIndex=false;if(this.wrapper)this.wrapper=`#${this.wrapper}`;this.element=element;this.preCommandsFocusedElementSelector=null;this.elementSettings=elementSettings;if(this.element&amp;&amp;this.element.form)this.$form=$(this.element.form);if(!this.url){const $element=$(this.element);if(this.element.tagName==='A')this.url=$element.attr('href');else{if(this.element&amp;&amp;element.form)this.url=this.$form.attr('action');}}const originalUrl=this.url;this.url=this.url.replace(/\/nojs(\/|$|\?|#)/,'/ajax$1');if(drupalSettings.ajaxTrustedUrl[originalUrl])drupalSettings.ajaxTrustedUrl[this.url]=true;const ajax=this;ajax.options={url:ajax.url,data:ajax.submit,isInProgress(){return ajax.ajaxing;},beforeSerialize(elementSettings,options){return ajax.beforeSerialize(elementSettings,options);},beforeSubmit(formValues,elementSettings,options){ajax.ajaxing=true;ajax.preCommandsFocusedElementSelector=null;return ajax.beforeSubmit(formValues,elementSettings,options);},beforeSend(xmlhttprequest,options){ajax.ajaxing=true;return ajax.beforeSend(xmlhttprequest,options);},success(response,status,xmlhttprequest){ajax.preCommandsFocusedElementSelector=document.activeElement.getAttribute('data-drupal-selector');if(typeof response==='string')response=$.parseJSON(response);if(response!==null&amp;&amp;!drupalSettings.ajaxTrustedUrl[ajax.url])if(xmlhttprequest.getResponseHeader('X-Drupal-Ajax-Token')!=='1'){const customMessage=Drupal.t('The response failed verification so will not be processed.');return ajax.error(xmlhttprequest,ajax.url,customMessage);}return (Promise.resolve(ajax.success(response,status)).then(()=&gt;{ajax.ajaxing=false;$(document).trigger('ajaxSuccess',[xmlhttprequest,this]);$(document).trigger('ajaxComplete',[xmlhttprequest,this]);if(--$.active===0)$(document).trigger('ajaxStop');}));},error(xmlhttprequest,status,error){ajax.ajaxing=false;},complete(xmlhttprequest,status){if(status==='error'||status==='parsererror')return ajax.error(xmlhttprequest,ajax.url);},dataType:'json',jsonp:false,method:ajax.httpMethod};if(elementSettings.dialog)ajax.options.data.dialogOptions=elementSettings.dialog;if(!ajax.options.url.includes('?'))ajax.options.url+='?';else ajax.options.url+='&amp;';let wrapper=`drupal_${elementSettings.dialogType||'ajax'}`;if(elementSettings.dialogRenderer)wrapper+=`.${elementSettings.dialogRenderer}`;ajax.options.url+=`${Drupal.ajax.WRAPPER_FORMAT}=${wrapper}`;$(ajax.element).on(elementSettings.event,function(event){if(!drupalSettings.ajaxTrustedUrl[ajax.url]&amp;&amp;!Drupal.url.isLocal(ajax.url))throw new Error(Drupal.t('The callback URL is not local and not trusted: !url',{'!url':ajax.url}));return ajax.eventResponse(this,event);});if(elementSettings.keypress)$(ajax.element).on('keypress',function(event){return ajax.keypressResponse(this,event);});if(elementSettings.prevent)$(ajax.element).on(elementSettings.prevent,false);};Drupal.ajax.WRAPPER_FORMAT='_wrapper_format';Drupal.Ajax.AJAX_REQUEST_PARAMETER='_drupal_ajax';Drupal.Ajax.prototype.execute=function(){if(this.ajaxing)return;try{this.beforeSerialize(this.element,this.options);return $.ajax(this.options);}catch(e){this.ajaxing=false;window.alert(`An error occurred while attempting to process ${this.options.url}: ${e.message}`);return $.Deferred().reject();}};Drupal.Ajax.prototype.keypressResponse=function(element,event){const ajax=this;if(event.which===13||(event.which===32&amp;&amp;element.type!=='text'&amp;&amp;element.type!=='textarea'&amp;&amp;element.type!=='tel'&amp;&amp;element.type!=='number')){event.preventDefault();event.stopPropagation();$(element).trigger(ajax.elementSettings.event);}};Drupal.Ajax.prototype.eventResponse=function(element,event){event.preventDefault();event.stopPropagation();const ajax=this;if(ajax.ajaxing)return;try{if(ajax.$form){if(ajax.setClick)element.form.clk=element;ajax.$form.ajaxSubmit(ajax.options);}else{ajax.beforeSerialize(ajax.element,ajax.options);$.ajax(ajax.options);}}catch(e){ajax.ajaxing=false;window.alert(`An error occurred while attempting to process ${ajax.options.url}: ${e.message}`);}};Drupal.Ajax.prototype.beforeSerialize=function(element,options){if(this.$form&amp;&amp;document.body.contains(this.$form.get(0))){const settings=this.settings||drupalSettings;Drupal.detachBehaviors(this.$form.get(0),settings,'serialize');}options.data[Drupal.Ajax.AJAX_REQUEST_PARAMETER]=1;const pageState=drupalSettings.ajaxPageState;options.data['ajax_page_state[theme]']=pageState.theme;options.data['ajax_page_state[theme_token]']=pageState.theme_token;options.data['ajax_page_state[libraries]']=pageState.libraries;};Drupal.Ajax.prototype.beforeSubmit=function(formValues,element,options){};Drupal.Ajax.prototype.beforeSend=function(xmlhttprequest,options){if(this.$form){options.extraData=options.extraData||{};options.extraData.ajax_iframe_upload='1';const v=$.fieldValue(this.element);if(v!==null)options.extraData[this.element.name]=v;}$(this.element).prop('disabled',true);if(!this.progress||!this.progress.type)return;const progressIndicatorMethod=`setProgressIndicator${this.progress.type.slice(0,1).toUpperCase()}${this.progress.type.slice(1).toLowerCase()}`;if(progressIndicatorMethod in this&amp;&amp;typeof this[progressIndicatorMethod]==='function')this[progressIndicatorMethod].call(this);};Drupal.theme.ajaxProgressThrobber=(message)=&gt;{const messageMarkup=typeof message==='string'?Drupal.theme('ajaxProgressMessage',message):'';const throbber='&lt;div class="throbber"&gt;&amp;nbsp;&lt;/div&gt;';return `&lt;div class="ajax-progress ajax-progress-throbber"&gt;${throbber}${messageMarkup}&lt;/div&gt;`;};Drupal.theme.ajaxProgressIndicatorFullscreen=()=&gt;'&lt;div class="ajax-progress ajax-progress-fullscreen"&gt;&amp;nbsp;&lt;/div&gt;';Drupal.theme.ajaxProgressMessage=(message)=&gt;`&lt;div class="message"&gt;${message}&lt;/div&gt;`;Drupal.theme.ajaxProgressBar=($element)=&gt;$('&lt;div class="ajax-progress ajax-progress-bar"&gt;&lt;/div&gt;').append($element);Drupal.Ajax.prototype.setProgressIndicatorBar=function(){const progressBar=new Drupal.ProgressBar(`ajax-progress-${this.element.id}`,$.noop,this.progress.method,$.noop);if(this.progress.message)progressBar.setProgress(-1,this.progress.message);if(this.progress.url)progressBar.startMonitoring(this.progress.url,this.progress.interval||1500);this.progress.element=$(Drupal.theme('ajaxProgressBar',progressBar.element));this.progress.object=progressBar;$(this.element).after(this.progress.element);};Drupal.Ajax.prototype.setProgressIndicatorThrobber=function(){this.progress.element=$(Drupal.theme('ajaxProgressThrobber',this.progress.message));if($(this.element).closest('[data-drupal-ajax-container]').length)$(this.element).closest('[data-drupal-ajax-container]').after(this.progress.element);else $(this.element).after(this.progress.element);};Drupal.Ajax.prototype.setProgressIndicatorFullscreen=function(){this.progress.element=$(Drupal.theme('ajaxProgressIndicatorFullscreen'));$('body').append(this.progress.element);};Drupal.Ajax.prototype.commandExecutionQueue=function(response,status){const ajaxCommands=this.commands;return Object.keys(response||{}).reduce((executionQueue,key)=&gt;executionQueue.then(()=&gt;{const {command}=response[key];if(command&amp;&amp;ajaxCommands[command])return ajaxCommands[command](this,response[key],status);}),Promise.resolve());};Drupal.Ajax.prototype.success=function(response,status){if(this.progress.element)$(this.progress.element).remove();if(this.progress.object)this.progress.object.stopMonitoring();$(this.element).prop('disabled',false);const elementParents=$(this.element).parents('[data-drupal-selector]').addBack().toArray();const focusChanged=Object.keys(response||{}).some((key)=&gt;{const {command,method}=response[key];return (command==='focusFirst'||command==='openDialog'||(command==='invoke'&amp;&amp;method==='focus'));});return (this.commandExecutionQueue(response,status).then(()=&gt;{if(!focusChanged){let target=false;if(this.element){if($(this.element).data('refocus-blur')&amp;&amp;this.preCommandsFocusedElementSelector)target=document.querySelector(`[data-drupal-selector="${this.preCommandsFocusedElementSelector}"]`);if(!target&amp;&amp;!$(this.element).data('disable-refocus')){for(let n=elementParents.length-1;!target&amp;&amp;n&gt;=0;n--)target=document.querySelector(`[data-drupal-selector="${elementParents[n].getAttribute('data-drupal-selector')}"]`);}}if(target)$(target).trigger('focus');}if(this.$form&amp;&amp;document.body.contains(this.$form.get(0))){const settings=this.settings||drupalSettings;Drupal.attachBehaviors(this.$form.get(0),settings);}this.settings=null;}).catch((error)=&gt;console.error(Drupal.t('An error occurred during the execution of the Ajax response: !error',{'!error':error}))));};Drupal.Ajax.prototype.getEffect=function(response){const type=response.effect||this.effect;const speed=response.speed||this.speed;const effect={};if(type==='none'){effect.showEffect='show';effect.hideEffect='hide';effect.showSpeed='';}else if(type==='fade'){effect.showEffect='fadeIn';effect.hideEffect='fadeOut';effect.showSpeed=speed;}else{effect.showEffect=`${type}Toggle`;effect.hideEffect=`${type}Toggle`;effect.showSpeed=speed;}return effect;};Drupal.Ajax.prototype.error=function(xmlhttprequest,uri,customMessage){if(this.progress.element)$(this.progress.element).remove();if(this.progress.object)this.progress.object.stopMonitoring();$(this.wrapper).show();$(this.element).prop('disabled',false);if(this.$form&amp;&amp;document.body.contains(this.$form.get(0))){const settings=this.settings||drupalSettings;Drupal.attachBehaviors(this.$form.get(0),settings);}throw new Drupal.AjaxError(xmlhttprequest,uri,customMessage);};Drupal.theme.ajaxWrapperNewContent=($newContent,ajax,response)=&gt;(response.effect||ajax.effect)!=='none'&amp;&amp;$newContent.filter((i)=&gt;!(($newContent[i].nodeName==='#comment'||($newContent[i].nodeName==='#text'&amp;&amp;/^(\s|\n|\r)*$/.test($newContent[i].textContent))))).length&gt;1?Drupal.theme('ajaxWrapperMultipleRootElements',$newContent):$newContent;Drupal.theme.ajaxWrapperMultipleRootElements=($elements)=&gt;$('&lt;div&gt;&lt;/div&gt;').append($elements);Drupal.AjaxCommands=function(){};Drupal.AjaxCommands.prototype={insert(ajax,response){const $wrapper=response.selector?$(response.selector):$(ajax.wrapper);const method=response.method||ajax.method;const effect=ajax.getEffect(response);const settings=response.settings||ajax.settings||drupalSettings;let $newContent=$($.parseHTML(response.data,document,true));$newContent=Drupal.theme('ajaxWrapperNewContent',$newContent,ajax,response);switch(method){case 'html':case 'replaceWith':case 'replaceAll':case 'empty':case 'remove':Drupal.detachBehaviors($wrapper.get(0),settings);break;default:break;}$wrapper[method]($newContent);if(effect.showEffect!=='show')$newContent.hide();const $ajaxNewContent=$newContent.find('.ajax-new-content');if($ajaxNewContent.length){$ajaxNewContent.hide();$newContent.show();$ajaxNewContent[effect.showEffect](effect.showSpeed);}else{if(effect.showEffect!=='show')$newContent[effect.showEffect](effect.showSpeed);}if($newContent.parents('html').length)$newContent.each((index,element)=&gt;{if(element.nodeType===Node.ELEMENT_NODE)Drupal.attachBehaviors(element,settings);});},remove(ajax,response,status){const settings=response.settings||ajax.settings||drupalSettings;$(response.selector).each(function(){Drupal.detachBehaviors(this,settings);}).remove();},changed(ajax,response,status){const $element=$(response.selector);if(!$element.hasClass('ajax-changed')){$element.addClass('ajax-changed');if(response.asterisk)$element.find(response.asterisk).append(` &lt;abbr class="ajax-changed" title="${Drupal.t('Changed')}"&gt;*&lt;/abbr&gt; `);}},alert(ajax,response,status){window.alert(response.text);},announce(ajax,response){if(response.priority)Drupal.announce(response.text,response.priority);else Drupal.announce(response.text);},redirect(ajax,response,status){window.location=response.url;},css(ajax,response,status){$(response.selector).css(response.argument);},settings(ajax,response,status){const ajaxSettings=drupalSettings.ajax;if(ajaxSettings)Drupal.ajax.expired().forEach((instance)=&gt;{if(instance.selector){const selector=instance.selector.replace('#','');if(selector in ajaxSettings)delete ajaxSettings[selector];}});if(response.merge)$.extend(true,drupalSettings,response.settings);else ajax.settings=response.settings;},data(ajax,response,status){$(response.selector).data(response.name,response.value);},focusFirst(ajax,response,status){let focusChanged=false;const container=document.querySelector(response.selector);if(container){const tabbableElements=tabbable(container);if(tabbableElements.length){tabbableElements[0].focus();focusChanged=true;}else{if(isFocusable(container)){container.focus();focusChanged=true;}}}if(ajax.hasOwnProperty('element')&amp;&amp;!focusChanged)ajax.element.focus();},invoke(ajax,response,status){const $element=$(response.selector);$element[response.method](...response.args);},restripe(ajax,response,status){$(response.selector).find('&gt; tbody &gt; tr:visible, &gt; tr:visible').removeClass('odd even').filter(':even').addClass('odd').end().filter(':odd').addClass('even');},update_build_id(ajax,response,status){document.querySelectorAll(`input[name="form_build_id"][value="${response.old}"]`).forEach((item)=&gt;{item.value=response.new;});},add_css(ajax,response,status){if(typeof response.data==='string'){Drupal.deprecationError({message:'Passing a string to the Drupal.ajax.add_css() method is deprecated in 10.1.0 and is removed from drupal:11.0.0. See https://www.drupal.org/node/3154948.'});$('head').prepend(response.data);return;}const allUniqueBundleIds=response.data.map(function(style){const uniqueBundleId=style.href+ajax.instanceIndex;loadjs(`css!${style.href}`,uniqueBundleId,{before(path,styleEl){Object.keys(style).forEach((attributeKey)=&gt;{styleEl.setAttribute(attributeKey,style[attributeKey]);});}});return uniqueBundleId;});return new Promise((resolve,reject)=&gt;{loadjs.ready(allUniqueBundleIds,{success(){resolve();},error(depsNotFound){const message=Drupal.t(`The following files could not be loaded: @dependencies`,{'@dependencies':depsNotFound.join(', ')});reject(message);}});});},message(ajax,response){const messages=new Drupal.Message(document.querySelector(response.messageWrapperQuerySelector));if(response.clearPrevious)messages.clear();messages.add(response.message,response.messageOptions);},add_js(ajax,response,status){const parentEl=document.querySelector(response.selector||'body');const settings=ajax.settings||drupalSettings;const allUniqueBundleIds=response.data.map((script)=&gt;{const uniqueBundleId=script.src+ajax.instanceIndex;loadjs(script.src,uniqueBundleId,{async:false,before(path,scriptEl){Object.keys(script).forEach((attributeKey)=&gt;{scriptEl.setAttribute(attributeKey,script[attributeKey]);});parentEl.appendChild(scriptEl);return false;}});return uniqueBundleId;});return new Promise((resolve,reject)=&gt;{loadjs.ready(allUniqueBundleIds,{success(){Drupal.attachBehaviors(parentEl,settings);resolve();},error(depsNotFound){const message=Drupal.t(`The following files could not be loaded: @dependencies`,{'@dependencies':depsNotFound.join(', ')});reject(message);}});});},scrollTop(ajax,response){const offset=$(response.selector).offset();let scrollTarget=response.selector;while($(scrollTarget).scrollTop()===0&amp;&amp;$(scrollTarget).parent())scrollTarget=$(scrollTarget).parent();if(offset.top-10&lt;$(scrollTarget).scrollTop())$(scrollTarget).animate({scrollTop:offset.top-10},500);}};const stopEvent=(xhr,settings)=&gt;{return (xhr.getResponseHeader('X-Drupal-Ajax-Token')==='1'&amp;&amp;settings.isInProgress&amp;&amp;settings.isInProgress());};$.extend(true,$.event.special,{ajaxSuccess:{trigger(event,xhr,settings){if(stopEvent(xhr,settings))return false;}},ajaxComplete:{trigger(event,xhr,settings){if(stopEvent(xhr,settings)){$.active++;return false;}}}});})(jQuery,window,Drupal,drupalSettings,loadjs,window.tabbable);;
(function($,window,Drupal,drupalSettings){Drupal.Ajax.prototype.findGlyphicon=function(element){return $(element).closest('.form-item').find('.ajax-progress.glyphicon');};Drupal.Ajax.prototype.glyphiconStart=function(element,message){var $glyphicon=this.findGlyphicon(element);if($glyphicon[0]){$glyphicon.addClass('glyphicon-spin');if($.fn.tooltip&amp;&amp;drupalSettings.bootstrap.tooltip_enabled){$glyphicon.removeAttr('data-toggle').removeAttr('data-original-title').removeAttr('title').tooltip('destroy');;if(message)$glyphicon.attr('data-toggle','tooltip').attr('title',message).tooltip();}if(message)$glyphicon.parent().append('&lt;div class="sr-only message"&gt;'+message+'&lt;/div&gt;');}return $glyphicon;};Drupal.Ajax.prototype.glyphiconStop=function(element){var $glyphicon=this.findGlyphicon(element);if($glyphicon[0]){$glyphicon.removeClass('glyphicon-spin');if($.fn.tooltip&amp;&amp;drupalSettings.bootstrap.tooltip_enabled){$glyphicon.removeAttr('data-toggle').removeAttr('data-original-title').removeAttr('title').tooltip('destroy');;}}};Drupal.Ajax.prototype.setProgressIndicatorThrobber=function(){var $element=$(this.element);var $glyphicon=this.glyphiconStart($element,this.progress.message);if($glyphicon[0]){this.progress.element=$glyphicon.parent();this.progress.glyphicon=true;return;}if(!this.progress.element)this.progress.element=$(Drupal.theme('ajaxThrobber'));if(this.progress.message)this.progress.element.after('&lt;div class="message"&gt;'+this.progress.message+'&lt;/div&gt;');if($element.is('input'))$element.after(this.progress.element);else $element.append(this.progress.element);};var success=Drupal.Ajax.prototype.success;Drupal.Ajax.prototype.success=function(response,status){if(this.progress.element){if(this.progress.glyphicon)this.glyphiconStop(this.progress.element);else this.progress.element.remove();this.progress.element.parent().find('.message').remove();}return success.apply(this,[response,status]);};})(jQuery,this,Drupal,drupalSettings);;
(function($,Drupal,drupalSettings){Drupal.Views={};Drupal.Views.parseQueryString=function(query){const args={};if(query.includes('?'))query=query.substring(query.indexOf('?')+1);let pair;const pairs=query.split('&amp;');for(let i=0;i&lt;pairs.length;i++){pair=pairs[i].split('=');if(pair[0]!=='q')if(pair[1])args[decodeURIComponent(pair[0].replace(/\+/g,' '))]=decodeURIComponent(pair[1].replace(/\+/g,' '));else args[decodeURIComponent(pair[0].replace(/\+/g,' '))]='';}return args;};Drupal.Views.parseViewArgs=function(href,viewPath){const returnObj={};const path=Drupal.Views.getPath(href);const viewHref=Drupal.url(viewPath).substring(drupalSettings.path.baseUrl.length);if(viewHref&amp;&amp;path.substring(0,viewHref.length+1)===`${viewHref}/`){returnObj.view_args=decodeURIComponent(path.substring(viewHref.length+1,path.length));returnObj.view_path=path;}return returnObj;};Drupal.Views.pathPortion=function(href){const protocol=window.location.protocol;if(href.substring(0,protocol.length)===protocol)href=href.substring(href.indexOf('/',protocol.length+2));return href;};Drupal.Views.getPath=function(href){href=Drupal.Views.pathPortion(href);href=href.substring(drupalSettings.path.baseUrl.length,href.length);if(href.substring(0,3)==='?q=')href=href.substring(3,href.length);const chars=['#','?','&amp;'];for(let i=0;i&lt;chars.length;i++)if(href.includes(chars[i]))href=href.substring(0,href.indexOf(chars[i]));return href;};})(jQuery,Drupal,drupalSettings);;
(function($,Drupal,drupalSettings){Drupal.behaviors.ViewsAjaxView={};Drupal.behaviors.ViewsAjaxView.attach=function(context,settings){if(settings&amp;&amp;settings.views&amp;&amp;settings.views.ajaxViews){const {views:{ajaxViews}}=settings;Object.keys(ajaxViews||{}).forEach((i)=&gt;{Drupal.views.instances[i]=new Drupal.views.ajaxView(ajaxViews[i]);});}};Drupal.behaviors.ViewsAjaxView.detach=(context,settings,trigger)=&gt;{if(trigger==='unload')if(settings&amp;&amp;settings.views&amp;&amp;settings.views.ajaxViews){const {views:{ajaxViews}}=settings;Object.keys(ajaxViews||{}).forEach((i)=&gt;{const selector=`.js-view-dom-id-${ajaxViews[i].view_dom_id}`;if($(selector,context).length){delete Drupal.views.instances[i];delete settings.views.ajaxViews[i];}});}};Drupal.views={};Drupal.views.instances={};Drupal.views.ajaxView=function(settings){const selector=`.js-view-dom-id-${settings.view_dom_id}`;this.$view=$(selector);let ajaxPath=drupalSettings.views.ajax_path;if(ajaxPath.constructor.toString().includes('Array'))ajaxPath=ajaxPath[0];let queryString=window.location.search||'';if(queryString!==''){queryString=queryString.slice(1).replace(/q=[^&amp;]+&amp;?|&amp;?render=[^&amp;]+/,'');if(queryString!=='')queryString=(/\?/.test(ajaxPath)?'&amp;':'?')+queryString;}this.element_settings={url:ajaxPath+queryString,submit:settings,httpMethod:'GET',setClick:true,event:'click',selector,progress:{type:'fullscreen'}};this.settings=settings;this.$exposed_form=$(`form#views-exposed-form-${settings.view_name.replace(/_/g,'-')}-${settings.view_display_id.replace(/_/g,'-')}`);once('exposed-form',this.$exposed_form).forEach(this.attachExposedFormAjax.bind(this));once('ajax-pager',this.$view.filter(this.filterNestedViews.bind(this))).forEach(this.attachPagerAjax.bind(this));const selfSettings=$.extend({},this.element_settings,{event:'RefreshView',base:this.selector,httpMethod:'GET',element:this.$view.get(0)});this.refreshViewAjax=Drupal.ajax(selfSettings);};Drupal.views.ajaxView.prototype.attachExposedFormAjax=function(){const that=this;this.exposedFormAjax=[];$('input[type=submit], button[type=submit], input[type=image]',this.$exposed_form).not('[data-drupal-selector=edit-reset]').each(function(index){const selfSettings=$.extend({},that.element_settings,{base:$(this).attr('id'),element:this});that.exposedFormAjax[index]=Drupal.ajax(selfSettings);});};Drupal.views.ajaxView.prototype.filterNestedViews=function(){return !this.$view.parents('.view').length;};Drupal.views.ajaxView.prototype.attachPagerAjax=function(){this.$view.find('.js-pager__items a, th.views-field a, .attachment .views-summary a').each(this.attachPagerLinkAjax.bind(this));};Drupal.views.ajaxView.prototype.attachPagerLinkAjax=function(id,link){const $link=$(link);const viewData={};const href=$link.attr('href');$.extend(viewData,this.settings,Drupal.Views.parseQueryString(href),Drupal.Views.parseViewArgs(href,this.settings.view_base_path));const selfSettings=$.extend({},this.element_settings,{submit:viewData,base:false,element:link,httpMethod:'GET'});this.pagerAjax=Drupal.ajax(selfSettings);};Drupal.AjaxCommands.prototype.viewsScrollTop=function(ajax,response){Drupal.AjaxCommands.prototype.scrollTop(ajax,response);};})(jQuery,Drupal,drupalSettings);;
(function($,Drupal){'use strict';Drupal.views.ajaxView.prototype.attachExposedFormAjax=function(){var that=this;this.exposedFormAjax=[];$('button[type=submit], input[type=submit], input[type=image]',this.$exposed_form).not('[data-drupal-selector=edit-reset]').each(function(index){var self_settings=$.extend({},that.element_settings,{base:$(this).attr('id'),element:this});that.exposedFormAjax[index]=Drupal.ajax(self_settings);});};})(jQuery,Drupal);;
(function($,Drupal,drupalSettings){Drupal.behaviors.betterExposedFilters={attach:function(context,settings){$('.bef-tree input[type=checkbox], .bef-checkboxes input[type=checkbox]').change(function(){_bef_highlight(this,context);}).filter(':checked').closest('.form-item',context).addClass('highlight');}};function _bef_highlight(elem,context){$elem=$(elem,context);$elem.attr('checked')?$elem.closest('.form-item',context).addClass('highlight'):$elem.closest('.form-item',context).removeClass('highlight');}})(jQuery,Drupal,drupalSettings);;
(function($,Drupal){"use strict";Drupal.behaviors.dataNotesRefreshView={attach:function(context,settings){if(!$('#data_notes_tabs_ul',context).length)return;if(!$('#data_notes_tabs_ul .active',context).length){let foundActive=false;$('#data_notes_tabs_ul .data-notes-tab',context).each(function(){if(!foundActive){$(this).addClass('active');let activeId=$(this).attr('id');showTabAndContent(activeId);foundActive=true;}else{$(this).addClass('inactive');let inactiveId=$(this).attr('id');hideTabAndContent(inactiveId);}});}$('#data_notes_tabs_ul .data-notes-tab',context).each(function(d){$(this).on('click',function(){let activeId=$(this).attr('id');hideInactiveTabsContent(activeId);showTabAndContent(activeId);});$(this).on('keydown',function(e){if(e.key==' '||e.key=='Enter')$(this).trigger('click');});});function hideInactiveTabsContent(activeId){$('#data_notes_tabs_ul .data-notes-tab',context).each(function(){if($(this).attr('id')!=activeId){let inactiveId=$(this).attr('id');hideTabAndContent(inactiveId);}});}function hideTabAndContent(inactiveId){const inactiveTab='#'+inactiveId;const inactiveContent='#'+inactiveId.replace('dn_tab','dn_content');if($(inactiveTab).hasClass('active'))$(inactiveTab).removeClass('active');$(inactiveTab).addClass('inactive');if($(inactiveContent).hasClass('active'))$(inactiveContent).removeClass('active');$(inactiveContent).addClass('inactive');}function showTabAndContent(activeId){const activeTab='#'+activeId;const activeContent='#'+activeId.replace('dn_tab','dn_content');if($(activeTab).hasClass('inactive'))$(activeTab).removeClass('inactive');$(activeTab).addClass('active');if($(activeContent).hasClass('inactive'))$(activeContent).removeClass('inactive');$(activeContent).addClass('active');}}};})(jQuery,Drupal);;
/* @license C3.js v0.7.2 | (c) C3 Team and other contributors | http://c3js.org/ */
!function(t,e){"object"==typeof exports&amp;&amp;"undefined"!=typeof module?module.exports=e():"function"==typeof define&amp;&amp;define.amd?define(e):(t=t||self).c3=e()}(this,function(){"use strict";function s(t){return(s="function"==typeof Symbol&amp;&amp;"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&amp;&amp;"function"==typeof Symbol&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){var e=this;e.d3=window.d3?window.d3:"undefined"!=typeof require?require("d3"):void 0,e.api=t,e.config=e.getDefaultConfig(),e.data={},e.cache={},e.axes={}}function n(t){this.internal=new l(this),this.internal.loadConfig(t),this.internal.beforeInit(t),this.internal.init(),this.internal.afterInit(t),function e(i,n,r){Object.keys(i).forEach(function(t){n[t]=i[t].bind(r),0&lt;Object.keys(i[t]).length&amp;&amp;e(i[t],n[t],r)})}(n.prototype,this,this)}function i(t,e){var i=this;i.component=t,i.params=e||{},i.d3=t.d3,i.scale=i.d3.scaleLinear(),i.range,i.orient="bottom",i.innerTickSize=6,i.outerTickSize=this.params.withOuterTick?6:0,i.tickPadding=3,i.tickValues=null,i.tickFormat,i.tickArguments,i.tickOffset=0,i.tickCulling=!0,i.tickCentered,i.tickTextCharSize,i.tickTextRotate=i.params.tickTextRotate,i.tickLength,i.axis=i.generateAxis()}i.prototype.axisX=function(t,e,i){t.attr("transform",function(t){return"translate("+Math.ceil(e(t)+i)+", 0)"})},i.prototype.axisY=function(t,e){t.attr("transform",function(t){return"translate(0,"+Math.ceil(e(t))+")"})},i.prototype.scaleExtent=function(t){var e=t[0],i=t[t.length-1];return e&lt;i?[e,i]:[i,e]},i.prototype.generateTicks=function(t){var e,i,n=[];if(t.ticks)return t.ticks.apply(t,this.tickArguments);for(i=t.domain(),e=Math.ceil(i[0]);e&lt;i[1];e++)n.push(e);return 0&lt;n.length&amp;&amp;0&lt;n[0]&amp;&amp;n.unshift(n[0]-(n[1]-n[0])),n},i.prototype.copyScale=function(){var t,e=this.scale.copy();return this.params.isCategory&amp;&amp;(t=this.scale.domain(),e.domain([t[0],t[1]-1])),e},i.prototype.textFormatted=function(t){var e=this.tickFormat?this.tickFormat(t):t;return void 0!==e?e:""},i.prototype.updateRange=function(){var t=this;return t.range=t.scale.rangeExtent?t.scale.rangeExtent():t.scaleExtent(t.scale.range()),t.range},i.prototype.updateTickTextCharSize=function(t){var a=this;if(a.tickTextCharSize)return a.tickTextCharSize;var o={h:11.5,w:5.5};return t.select("text").text(function(t){return a.textFormatted(t)}).each(function(t){var e=this.getBoundingClientRect(),i=a.textFormatted(t),n=e.height,r=i?e.width/i.length:void 0;n&amp;&amp;r&amp;&amp;(o.h=n,o.w=r)}).text(""),a.tickTextCharSize=o},i.prototype.isVertical=function(){return"left"===this.orient||"right"===this.orient},i.prototype.tspanData=function(t,e,i){var n=this,r=n.params.tickMultiline?n.splitTickText(t,i):[].concat(n.textFormatted(t));return n.params.tickMultiline&amp;&amp;0&lt;n.params.tickMultilineMax&amp;&amp;(r=n.ellipsify(r,n.params.tickMultilineMax)),r.map(function(t){return{index:e,splitted:t,length:r.length}})},i.prototype.splitTickText=function(t,e){var r,a,o,s=this,i=s.textFormatted(t),c=s.params.tickWidth;if("[object Array]"===Object.prototype.toString.call(i))return i;return(!c||c&lt;=0)&amp;&amp;(c=s.isVertical()?95:s.params.isCategory?Math.ceil(e(1)-e(0))-12:110),function t(e,i){a=void 0;for(var n=1;n&lt;i.length;n++)if(" "===i.charAt(n)&amp;&amp;(a=n),r=i.substr(0,n+1),o=s.tickTextCharSize.w*r.length,c&lt;o)return t(e.concat(i.substr(0,a||n)),i.slice(a?a+1:n));return e.concat(i)}([],i+"")},i.prototype.ellipsify=function(t,e){if(t.length&lt;=e)return t;for(var i=t.slice(0,e),n=3,r=e-1;0&lt;=r;r--){var a=i[r].length;if(i[r]=i[r].substr(0,a-n).padEnd(a,"."),(n-=a)&lt;=0)break}return i},i.prototype.updateTickLength=function(){this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding},i.prototype.lineY2=function(t){var e=this,i=e.scale(t)+(e.tickCentered?0:e.tickOffset);return e.range[0]&lt;i&amp;&amp;i&lt;e.range[1]?e.innerTickSize:0},i.prototype.textY=function(){var t=this.tickTextRotate;return t?11.5-t/15*2.5*(0&lt;t?1:-1):this.tickLength},i.prototype.textTransform=function(){var t=this.tickTextRotate;return t?"rotate("+t+")":""},i.prototype.textTextAnchor=function(){var t=this.tickTextRotate;return t?0&lt;t?"start":"end":"middle"},i.prototype.tspanDx=function(){var t=this.tickTextRotate;return t?8*Math.sin(Math.PI*(t/180)):0},i.prototype.tspanDy=function(t,e){var i=this.tickTextCharSize.h;return 0===e&amp;&amp;(i=this.isVertical()?-((t.length-1)*(this.tickTextCharSize.h/2)-3):".71em"),i},i.prototype.generateAxis=function(){var w=this,v=w.d3,b=w.params;function T(t,m){var S;return t.each(function(){var t,e,i,n=T.g=v.select(this),r=this.__chart__||w.scale,a=this.__chart__=w.copyScale(),o=w.tickValues?w.tickValues:w.generateTicks(a),s=n.selectAll(".tick").data(o,a),c=s.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),d=s.exit().remove(),l=s.merge(c);b.isCategory?(w.tickOffset=Math.ceil((a(1)-a(0))/2),e=w.tickCentered?0:w.tickOffset,i=w.tickCentered?w.tickOffset:0):w.tickOffset=e=0,w.updateRange(),w.updateTickLength(),w.updateTickTextCharSize(n.select(".tick"));var u=l.select("line").merge(c.append("line")),h=l.select("text").merge(c.append("text")),g=l.selectAll("text").selectAll("tspan").data(function(t,e){return w.tspanData(t,e,a)}),p=g.enter().append("tspan").merge(g).text(function(t){return t.splitted});g.exit().remove();var f=n.selectAll(".domain").data([0]),_=f.enter().append("path").merge(f).attr("class","domain");switch(w.orient){case"bottom":t=w.axisX,u.attr("x1",e).attr("x2",e).attr("y2",function(t,e){return w.lineY2(t,e)}),h.attr("x",0).attr("y",function(t,e){return w.textY(t,e)}).attr("transform",function(t,e){return w.textTransform(t,e)}).style("text-anchor",function(t,e){return w.textTextAnchor(t,e)}),p.attr("x",0).attr("dy",function(t,e){return w.tspanDy(t,e)}).attr("dx",function(t,e){return w.tspanDx(t,e)}),_.attr("d","M"+w.range[0]+","+w.outerTickSize+"V0H"+w.range[1]+"V"+w.outerTickSize);break;case"top":t=w.axisX,u.attr("x1",e).attr("x2",e).attr("y2",function(t,e){return-1*w.lineY2(t,e)}),h.attr("x",0).attr("y",function(t,e){return-1*w.textY(t,e)-(b.isCategory?2:w.tickLength-2)}).attr("transform",function(t,e){return w.textTransform(t,e)}).style("text-anchor",function(t,e){return w.textTextAnchor(t,e)}),p.attr("x",0).attr("dy",function(t,e){return w.tspanDy(t,e)}).attr("dx",function(t,e){return w.tspanDx(t,e)}),_.attr("d","M"+w.range[0]+","+-w.outerTickSize+"V0H"+w.range[1]+"V"+-w.outerTickSize);break;case"left":t=w.axisY,u.attr("x2",-w.innerTickSize).attr("y1",i).attr("y2",i),h.attr("x",-w.tickLength).attr("y",w.tickOffset).style("text-anchor","end"),p.attr("x",-w.tickLength).attr("dy",function(t,e){return w.tspanDy(t,e)}),_.attr("d","M"+-w.outerTickSize+","+w.range[0]+"H0V"+w.range[1]+"H"+-w.outerTickSize);break;case"right":t=w.axisY,u.attr("x2",w.innerTickSize).attr("y1",i).attr("y2",i),h.attr("x",w.tickLength).attr("y",w.tickOffset).style("text-anchor","start"),p.attr("x",w.tickLength).attr("dy",function(t,e){return w.tspanDy(t,e)}),_.attr("d","M"+w.outerTickSize+","+w.range[0]+"H0V"+w.range[1]+"H"+w.outerTickSize)}if(a.rangeBand){var x=a,y=x.rangeBand()/2;r=a=function(t){return x(t)+y}}else r.rangeBand?r=a:d.call(t,a,w.tickOffset);c.call(t,r,w.tickOffset),S=(m?l.transition(m):l).style("opacity",1).call(t,a,w.tickOffset)}),S}return T.scale=function(t){return arguments.length?(w.scale=t,T):w.scale},T.orient=function(t){return arguments.length?(w.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",T):w.orient},T.tickFormat=function(t){return arguments.length?(w.tickFormat=t,T):w.tickFormat},T.tickCentered=function(t){return arguments.length?(w.tickCentered=t,T):w.tickCentered},T.tickOffset=function(){return w.tickOffset},T.tickInterval=function(){var t;return(t=b.isCategory?2*w.tickOffset:(T.g.select("path.domain").node().getTotalLength()-2*w.outerTickSize)/T.g.selectAll("line").size())===1/0?0:t},T.ticks=function(){return arguments.length?(w.tickArguments=arguments,T):w.tickArguments},T.tickCulling=function(t){return arguments.length?(w.tickCulling=t,T):w.tickCulling},T.tickValues=function(t){if("function"==typeof t)w.tickValues=function(){return t(w.scale.domain())};else{if(!arguments.length)return w.tickValues;w.tickValues=t}return T},T};var N={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",colorScale:"c3-colorscale",stanfordElements:"c3-stanford-elements",stanfordLine:"c3-stanford-line",stanfordLines:"c3-stanford-lines",stanfordRegion:"c3-stanford-region",stanfordRegions:"c3-stanford-regions",stanfordText:"c3-stanford-text",stanfordTexts:"c3-stanford-texts",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},a=function(t){return Math.ceil(t)+.5},r=function(t){return 10*Math.ceil(t/10)},R=function(t){return t[1]-t[0]},Y=function(t,e,i){return k(t[e])?t[e]:i},y=function(t){var e=t.getBoundingClientRect(),i=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)];return{x:i[0].x,y:Math.min(i[0].y,i[1].y),width:e.width,height:e.height}},o=function(t){return Array.isArray(t)},k=function(t){return void 0!==t},u=function(t){return null==t||c(t)&amp;&amp;0===t.length||"object"===s(t)&amp;&amp;0===Object.keys(t).length},h=function(t){return"function"==typeof t},c=function(t){return"string"==typeof t},v=function(t){return void 0===t},P=function(t){return t||0===t},C=function(t){return!u(t)},_=function(t){return"string"==typeof t?t.replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;"):t},d=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.owner=e,this.d3=e.d3,this.internal=i};d.prototype.init=function(){var t=this.owner,e=t.config,i=t.main;t.axes.x=i.append("g").attr("class",N.axis+" "+N.axisX).attr("clip-path",e.axis_x_inner?"":t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",N.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=i.append("g").attr("class",N.axis+" "+N.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",N.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=i.append("g").attr("class",N.axis+" "+N.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",N.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},d.prototype.getXAxis=function(t,e,i,n,r,a,o){var s=this.owner,c=s.config,d={isCategory:s.isCategorized(),withOuterTick:r,tickMultiline:c.axis_x_tick_multiline,tickMultilineMax:c.axis_x_tick_multiline?Number(c.axis_x_tick_multilineMax):0,tickWidth:c.axis_x_tick_width,tickTextRotate:o?0:c.axis_x_tick_rotate,withoutTransition:a},l=new this.internal(this,d).axis.scale(t).orient(e);return s.isTimeSeries()&amp;&amp;n&amp;&amp;"function"!=typeof n&amp;&amp;(n=n.map(function(t){return s.parseDate(t)})),l.tickFormat(i).tickValues(n),s.isCategorized()&amp;&amp;(l.tickCentered(c.axis_x_tick_centered),u(c.axis_x_tick_culling)&amp;&amp;(c.axis_x_tick_culling=!1)),l},d.prototype.updateXAxisTickValues=function(t,e){var i,n=this.owner,r=n.config;return(r.axis_x_tick_fit||r.axis_x_tick_count)&amp;&amp;(i=this.generateTickValues(n.mapTargetsToUniqueXs(t),r.axis_x_tick_count,n.isTimeSeries())),e?e.tickValues(i):(n.xAxis.tickValues(i),n.subXAxis.tickValues(i)),i},d.prototype.getYAxis=function(t,e,i,n,r,a,o){var s=this.owner,c=s.config,d={withOuterTick:r,withoutTransition:a,tickTextRotate:o?0:c.axis_y_tick_rotate},l=new this.internal(this,d).axis.scale(t).orient(e).tickFormat(i);return s.isTimeSeriesY()?l.ticks(c.axis_y_tick_time_type,c.axis_y_tick_time_interval):l.tickValues(n),l},d.prototype.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},d.prototype.getXAxisTickFormat=function(){var e=this.owner,i=e.config,n=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(t){return t};return i.axis_x_tick_format&amp;&amp;(h(i.axis_x_tick_format)?n=i.axis_x_tick_format:e.isTimeSeries()&amp;&amp;(n=function(t){return t?e.axisTimeFormat(i.axis_x_tick_format)(t):""})),h(n)?function(t){return n.call(e,t)}:n},d.prototype.getTickValues=function(t,e){return t||(e?e.tickValues():void 0)},d.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},d.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},d.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},d.prototype.getLabelOptionByAxisId=function(t){var e,i=this.owner.config;return"y"===t?e=i.axis_y_label:"y2"===t?e=i.axis_y2_label:"x"===t&amp;&amp;(e=i.axis_x_label),e},d.prototype.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return c(e)?e:e?e.text:null},d.prototype.setLabelText=function(t,e){var i=this.owner.config,n=this.getLabelOptionByAxisId(t);c(n)?"y"===t?i.axis_y_label=e:"y2"===t?i.axis_y2_label=e:"x"===t&amp;&amp;(i.axis_x_label=e):n&amp;&amp;(n.text=e)},d.prototype.getLabelPosition=function(t,e){var i=this.getLabelOptionByAxisId(t),n=i&amp;&amp;"object"===s(i)&amp;&amp;i.position?i.position:e;return{isInner:0&lt;=n.indexOf("inner"),isOuter:0&lt;=n.indexOf("outer"),isLeft:0&lt;=n.indexOf("left"),isCenter:0&lt;=n.indexOf("center"),isRight:0&lt;=n.indexOf("right"),isTop:0&lt;=n.indexOf("top"),isMiddle:0&lt;=n.indexOf("middle"),isBottom:0&lt;=n.indexOf("bottom")}},d.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},d.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},d.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},d.prototype.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},d.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},d.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},d.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},d.prototype.xForAxisLabel=function(t,e){var i=this.owner;return t?e.isLeft?0:e.isCenter?i.width/2:i.width:e.isBottom?-i.height:e.isMiddle?-i.height/2:0},d.prototype.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},d.prototype.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},d.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},d.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},d.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},d.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},d.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},d.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},d.prototype.dyForXAxisLabel=function(){var t=this.owner,e=t.config,i=this.getXAxisLabelPosition();return e.axis_rotated?i.isInner?"1.2em":-25-(t.config.axis_x_inner?0:this.getMaxTickWidth("x")):i.isInner?"-0.5em":e.axis_x_height?e.axis_x_height-10:"3em"},d.prototype.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},d.prototype.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},d.prototype.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},d.prototype.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},d.prototype.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},d.prototype.getMaxTickWidth=function(t,e){var i,n,r,a,o=this.owner,s=o.config,c=0;return e&amp;&amp;o.currentMaxTickWidths[t]||(o.svg&amp;&amp;(i=o.filterTargetsToShow(o.data.targets),"y"===t?(n=o.y.copy().domain(o.getYDomain(i,"y")),r=this.getYAxis(n,o.yOrient,s.axis_y_tick_format,o.yAxisTickValues,!1,!0,!0)):"y2"===t?(n=o.y2.copy().domain(o.getYDomain(i,"y2")),r=this.getYAxis(n,o.y2Orient,s.axis_y2_tick_format,o.y2AxisTickValues,!1,!0,!0)):(n=o.x.copy().domain(o.getXDomain(i)),r=this.getXAxis(n,o.xOrient,o.xAxisTickFormat,o.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(i,r)),(a=o.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(r).each(function(){o.d3.select(this).selectAll("text").each(function(){var t=this.getBoundingClientRect();c&lt;t.width&amp;&amp;(c=t.width)}),a.remove()})),o.currentMaxTickWidths[t]=c&lt;=0?o.currentMaxTickWidths[t]:c),o.currentMaxTickWidths[t]},d.prototype.updateLabels=function(t){var e=this.owner,i=e.main.select("."+N.axisX+" ."+N.axisXLabel),n=e.main.select("."+N.axisY+" ."+N.axisYLabel),r=e.main.select("."+N.axisY2+" ."+N.axisY2Label);(t?i.transition():i).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?n.transition():n).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?r.transition():r).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},d.prototype.getPadding=function(t,e,i,n){var r="number"==typeof t?t:t[e];return P(r)?"ratio"===t.unit?t[e]*n:this.convertPixelsToAxisPadding(r,n):i},d.prototype.convertPixelsToAxisPadding=function(t,e){var i=this.owner;return e*(t/(i.config.axis_rotated?i.width:i.height))},d.prototype.generateTickValues=function(t,e,i){var n,r,a,o,s,c,d,l=t;if(e)if(1===(n=h(e)?e():e))l=[t[0]];else if(2===n)l=[t[0],t[t.length-1]];else if(2&lt;n){for(o=n-2,r=t[0],s=((a=t[t.length-1])-r)/(o+1),l=[r],c=0;c&lt;o;c++)d=+r+s*(c+1),l.push(i?new Date(d):d);l.push(a)}return i||(l=l.sort(function(t,e){return t-e})),l},d.prototype.generateTransitions=function(t){var e=this.owner.axes;return{axisX:t?e.x.transition().duration(t):e.x,axisY:t?e.y.transition().duration(t):e.y,axisY2:t?e.y2.transition().duration(t):e.y2,axisSubX:t?e.subx.transition().duration(t):e.subx}},d.prototype.redraw=function(t,e){var i=this.owner,n=t?i.d3.transition().duration(t):null;i.axes.x.style("opacity",e?0:1).call(i.xAxis,n),i.axes.y.style("opacity",e?0:1).call(i.yAxis,n),i.axes.y2.style("opacity",e?0:1).call(i.y2Axis,n),i.axes.subx.style("opacity",e?0:1).call(i.subXAxis,n)};var t={version:"0.7.2",chart:{fn:n.prototype,internal:{fn:l.prototype,axis:{fn:d.prototype,internal:{fn:i.prototype}}}},generate:function(t){return new n(t)}};function g(t){return t/Math.pow(10,Math.ceil(Math.log(t)/Math.LN10-1e-12))==1}l.prototype.beforeInit=function(){},l.prototype.afterInit=function(){},l.prototype.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},l.prototype.initParams=function(){var t=this,e=t.d3,i=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeParse=(i.data_xLocaltime?e.timeParse:e.utcParse)(t.config.data_xFormat),t.axisTimeFormat=i.axis_x_localtime?e.timeFormat:e.utcFormat,t.defaultAxisTimeFormat=function(t){return t.getMilliseconds()?e.timeFormat(".%L")(t):t.getSeconds()?e.timeFormat(":%S")(t):t.getMinutes()?e.timeFormat("%I:%M")(t):t.getHours()?e.timeFormat("%I %p")(t):t.getDay()&amp;&amp;1!==t.getDate()?e.timeFormat("%-m/%-d")(t):1!==t.getDate()?e.timeFormat("%-m/%-d")(t):t.getMonth()?e.timeFormat("%-m/%-d")(t):e.timeFormat("%Y/%-m/%-d")(t)},t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=i.axis_rotated?i.axis_x_inner?"right":"left":i.axis_x_inner?"top":"bottom",t.yOrient=i.axis_rotated?i.axis_y_inner?"top":"bottom":i.axis_y_inner?"right":"left",t.y2Orient=i.axis_rotated?i.axis_y2_inner?"bottom":"top":i.axis_y2_inner?"left":"right",t.subXOrient=i.axis_rotated?"left":"bottom",t.isLegendRight="right"===i.legend_position,t.isLegendInset="inset"===i.legend_position,t.isLegendTop="top-left"===i.legend_inset_anchor||"top-right"===i.legend_inset_anchor,t.isLegendLeft="top-left"===i.legend_inset_anchor||"bottom-left"===i.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=i.axis_rotated&amp;&amp;!i.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},l.prototype.initChartElements=function(){this.initBar&amp;&amp;this.initBar(),this.initLine&amp;&amp;this.initLine(),this.initArc&amp;&amp;this.initArc(),this.initGauge&amp;&amp;this.initGauge(),this.initText&amp;&amp;this.initText()},l.prototype.initWithData=function(t){var e,i,n=this,r=n.d3,a=n.config,o=!0;n.axis=new d(n),a.bindto?"function"==typeof a.bindto.node?n.selectChart=a.bindto:n.selectChart=r.select(a.bindto):n.selectChart=r.selectAll([]),n.selectChart.empty()&amp;&amp;(n.selectChart=r.select(document.createElement("div")).style("opacity",0),n.observeInserted(n.selectChart),o=!1),n.selectChart.html("").classed("c3",!0),n.data.xs={},n.data.targets=n.convertDataToTargets(t),a.data_filter&amp;&amp;(n.data.targets=n.data.targets.filter(a.data_filter)),a.data_hide&amp;&amp;n.addHiddenTargetIds(!0===a.data_hide?n.mapToIds(n.data.targets):a.data_hide),a.legend_hide&amp;&amp;n.addHiddenLegendIds(!0===a.legend_hide?n.mapToIds(n.data.targets):a.legend_hide),n.isStanfordGraphType()&amp;&amp;n.initStanfordData(),n.updateSizes(),n.updateScales(),n.x.domain(r.extent(n.getXDomain(n.data.targets))),n.y.domain(n.getYDomain(n.data.targets,"y")),n.y2.domain(n.getYDomain(n.data.targets,"y2")),n.subX.domain(n.x.domain()),n.subY.domain(n.y.domain()),n.subY2.domain(n.y2.domain()),n.orgXDomain=n.x.domain(),n.svg=n.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return a.onmouseover.call(n)}).on("mouseleave",function(){return a.onmouseout.call(n)}),n.config.svg_classname&amp;&amp;n.svg.attr("class",n.config.svg_classname),e=n.svg.append("defs"),n.clipChart=n.appendClip(e,n.clipId),n.clipXAxis=n.appendClip(e,n.clipIdForXAxis),n.clipYAxis=n.appendClip(e,n.clipIdForYAxis),n.clipGrid=n.appendClip(e,n.clipIdForGrid),n.clipSubchart=n.appendClip(e,n.clipIdForSubchart),n.updateSvgSize(),i=n.main=n.svg.append("g").attr("transform",n.getTranslate("main")),n.initPie&amp;&amp;n.initPie(),n.initDragZoom&amp;&amp;n.initDragZoom(),n.initSubchart&amp;&amp;n.initSubchart(),n.initTooltip&amp;&amp;n.initTooltip(),n.initLegend&amp;&amp;n.initLegend(),n.initTitle&amp;&amp;n.initTitle(),n.initZoom&amp;&amp;n.initZoom(),n.isStanfordGraphType()&amp;&amp;n.drawColorScale(),n.initSubchartBrush&amp;&amp;n.initSubchartBrush(),i.append("text").attr("class",N.text+" "+N.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),n.initRegion(),n.initGrid(),i.append("g").attr("clip-path",n.clipPath).attr("class",N.chart),a.grid_lines_front&amp;&amp;n.initGridLines(),n.initStanfordElements(),n.initEventRect(),n.initChartElements(),n.axis.init(),n.updateTargets(n.data.targets),a.axis_x_selection&amp;&amp;n.brush.selectionAsValue(n.getDefaultSelection()),o&amp;&amp;(n.updateDimension(),n.config.oninit.call(n),n.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),n.bindResize(),n.bindWindowFocus(),n.api.element=n.selectChart.node()},l.prototype.smoothLines=function(t,e){var a=this;"grid"===e&amp;&amp;t.each(function(){var t=a.d3.select(this),e=t.attr("x1"),i=t.attr("x2"),n=t.attr("y1"),r=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(i),y1:Math.ceil(n),y2:Math.ceil(r)})})},l.prototype.updateSizes=function(){var t=this,e=t.config,i=t.legend?t.getLegendHeight():0,n=t.legend?t.getLegendWidth():0,r=t.isLegendRight||t.isLegendInset?0:i,a=t.hasArcType(),o=e.axis_rotated||a?0:t.getHorizontalAxisHeight("x"),s=e.subchart_show&amp;&amp;!a?e.subchart_size_height+o:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+r+t.getCurrentPaddingBottom(),left:s+(a?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:o+s+r+t.getCurrentPaddingBottom(),left:a?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+r,left:t.rotated_padding_left}:{top:t.currentHeight-s-r,right:NaN,bottom:o+r,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&amp;&amp;t.updateSizeForLegend(i,n),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width&lt;0&amp;&amp;(t.width=0),t.height&lt;0&amp;&amp;(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2&lt;0&amp;&amp;(t.width2=0),t.height2&lt;0&amp;&amp;(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?n+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&amp;&amp;!e.gauge_fullCircle&amp;&amp;(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&amp;&amp;t.updateRadius(),t.isLegendRight&amp;&amp;a&amp;&amp;(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},l.prototype.updateTargets=function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType()&amp;&amp;e.updateTargetsForArc&amp;&amp;e.updateTargetsForArc(t),e.updateTargetsForSubchart&amp;&amp;e.updateTargetsForSubchart(t),e.showTargets()},l.prototype.showTargets=function(){var e=this;e.svg.selectAll("."+N.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},l.prototype.redraw=function(t,e){var i,n,r,a,o,s,c,d,l,u,h,g,p,f,_,x,y,m,S,w,v,b,T,A,P,C,L,V,G,E,O,I=this,R=I.main,k=I.d3,F=I.config,D=I.getShapeIndices(I.isAreaType),X=I.getShapeIndices(I.isBarType),M=I.getShapeIndices(I.isLineType),z=I.hasArcType(),H=I.filterTargetsToShow(I.data.targets),B=I.xv.bind(I);if(i=Y(t=t||{},"withY",!0),n=Y(t,"withSubchart",!0),r=Y(t,"withTransition",!0),s=Y(t,"withTransform",!1),c=Y(t,"withUpdateXDomain",!1),d=Y(t,"withUpdateOrgXDomain",!1),l=Y(t,"withTrimXDomain",!0),p=Y(t,"withUpdateXAxis",c),u=Y(t,"withLegend",!1),h=Y(t,"withEventRect",!0),g=Y(t,"withDimension",!0),a=Y(t,"withTransitionForExit",r),o=Y(t,"withTransitionForAxis",r),S=r?F.transition_duration:0,w=a?S:0,v=o?S:0,e=e||I.axis.generateTransitions(v),u&amp;&amp;F.legend_show?I.updateLegend(I.mapToIds(I.data.targets),t,e):g&amp;&amp;I.updateDimension(!0),I.isCategorized()&amp;&amp;0===H.length&amp;&amp;I.x.domain([0,I.axes.x.selectAll(".tick").size()]),H.length?(I.updateXDomain(H,c,d,l),F.axis_x_tick_values||(C=I.axis.updateXAxisTickValues(H))):(I.xAxis.tickValues([]),I.subXAxis.tickValues([])),F.zoom_rescale&amp;&amp;!t.flow&amp;&amp;(G=I.x.orgDomain()),I.y.domain(I.getYDomain(H,"y",G)),I.y2.domain(I.getYDomain(H,"y2",G)),!F.axis_y_tick_values&amp;&amp;F.axis_y_tick_count&amp;&amp;I.yAxis.tickValues(I.axis.generateTickValues(I.y.domain(),F.axis_y_tick_count)),!F.axis_y2_tick_values&amp;&amp;F.axis_y2_tick_count&amp;&amp;I.y2Axis.tickValues(I.axis.generateTickValues(I.y2.domain(),F.axis_y2_tick_count)),I.axis.redraw(v,z),I.axis.updateLabels(r),(c||p)&amp;&amp;H.length)if(F.axis_x_tick_culling&amp;&amp;C){for(L=1;L&lt;C.length;L++)if(C.length/L&lt;F.axis_x_tick_culling_max){V=L;break}I.svg.selectAll("."+N.axisX+" .tick text").each(function(t){var e=C.indexOf(t);0&lt;=e&amp;&amp;k.select(this).style("display",e%V?"none":"block")})}else I.svg.selectAll("."+N.axisX+" .tick text").style("display","block");f=I.generateDrawArea?I.generateDrawArea(D,!1):void 0,_=I.generateDrawBar?I.generateDrawBar(X):void 0,x=I.generateDrawLine?I.generateDrawLine(M,!1):void 0,y=I.generateXYForText(D,X,M,!0),m=I.generateXYForText(D,X,M,!1),I.updateCircleY(),E=(I.config.axis_rotated?I.circleY:I.circleX).bind(I),O=(I.config.axis_rotated?I.circleX:I.circleY).bind(I),i&amp;&amp;(I.subY.domain(I.getYDomain(H,"y")),I.subY2.domain(I.getYDomain(H,"y2"))),I.updateXgridFocus(),R.select("text."+N.text+"."+N.empty).attr("x",I.width/2).attr("y",I.height/2).text(F.data_empty_label_text).transition().style("opacity",H.length?0:1),h&amp;&amp;I.redrawEventRect(),I.updateGrid(S),I.updateStanfordElements(S),I.updateRegion(S),I.updateBar(w),I.updateLine(w),I.updateArea(w),I.updateCircle(E,O),I.hasDataLabel()&amp;&amp;I.updateText(y,m,w),I.redrawTitle&amp;&amp;I.redrawTitle(),I.redrawArc&amp;&amp;I.redrawArc(S,w,s),I.redrawSubchart&amp;&amp;I.redrawSubchart(n,e,S,w,D,X,M),I.isStanfordGraphType()&amp;&amp;I.drawColorScale(),R.selectAll("."+N.selectedCircles).filter(I.isBarType.bind(I)).selectAll("circle").remove(),t.flow&amp;&amp;(A=I.generateFlow({targets:H,flow:t.flow,duration:t.flow.duration,drawBar:_,drawLine:x,drawArea:f,cx:E,cy:O,xv:B,xForText:y,yForText:m})),I.isTabVisible()&amp;&amp;(S?(P=k.transition().duration(S),b=[],[I.redrawBar(_,!0,P),I.redrawLine(x,!0,P),I.redrawArea(f,!0,P),I.redrawCircle(E,O,!0,P),I.redrawText(y,m,t.flow,!0,P),I.redrawRegion(!0,P),I.redrawGrid(!0,P)].forEach(function(t){t.forEach(function(t){b.push(t)})}),T=I.generateWait(),b.forEach(function(t){T.add(t)}),T(function(){A&amp;&amp;A(),F.onrendered&amp;&amp;F.onrendered.call(I)})):(I.redrawBar(_),I.redrawLine(x),I.redrawArea(f),I.redrawCircle(E,O),I.redrawText(y,m,t.flow),I.redrawRegion(),I.redrawGrid(),A&amp;&amp;A(),F.onrendered&amp;&amp;F.onrendered.call(I))),I.mapToIds(I.data.targets).forEach(function(t){I.withoutFadeIn[t]=!0})},l.prototype.updateAndRedraw=function(t){var e,i=this,n=i.config;(t=t||{}).withTransition=Y(t,"withTransition",!0),t.withTransform=Y(t,"withTransform",!1),t.withLegend=Y(t,"withLegend",!1),t.withUpdateXDomain=Y(t,"withUpdateXDomain",!0),t.withUpdateOrgXDomain=Y(t,"withUpdateOrgXDomain",!0),t.withTransitionForExit=!1,t.withTransitionForTransform=Y(t,"withTransitionForTransform",t.withTransition),i.updateSizes(),t.withLegend&amp;&amp;n.legend_show||(e=i.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0),i.updateScales(),i.updateSvgSize(),i.transformAll(t.withTransitionForTransform,e)),i.redraw(t,e)},l.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},l.prototype.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},l.prototype.isCategorized=function(){return 0&lt;=this.config.axis_x_type.indexOf("categor")},l.prototype.isCustomX=function(){var t=this.config;return!this.isTimeSeries()&amp;&amp;(t.data_x||C(t.data_xs))},l.prototype.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},l.prototype.getTranslate=function(t){var e,i,n=this,r=n.config;return"main"===t?(e=a(n.margin.left),i=a(n.margin.top)):"context"===t?(e=a(n.margin2.left),i=a(n.margin2.top)):"legend"===t?(e=n.margin3.left,i=n.margin3.top):"x"===t?(e=0,i=r.axis_rotated?0:n.height):"y"===t?(e=0,i=r.axis_rotated?n.height:0):"y2"===t?(e=r.axis_rotated?0:n.width,i=r.axis_rotated?1:0):"subx"===t?(e=0,i=r.axis_rotated?0:n.height2):"arc"===t&amp;&amp;(e=n.arcWidth/2,i=n.arcHeight/2-(n.hasType("gauge")?6:0)),"translate("+e+","+i+")"},l.prototype.initialOpacity=function(t){return null!==t.value&amp;&amp;this.withoutFadeIn[t.id]?1:0},l.prototype.initialOpacityForCircle=function(t){return null!==t.value&amp;&amp;this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},l.prototype.opacityForCircle=function(t){var e=(h(this.config.point_show)?this.config.point_show(t):this.config.point_show)||this.isStanfordType(t)?1:0;return P(t.value)?this.isScatterType(t)?.5:e:0},l.prototype.opacityForText=function(){return this.hasDataLabel()?1:0},l.prototype.xx=function(t){return t?this.x(t.x):null},l.prototype.xvCustom=function(t,e){var i=this,n=e?t[e]:t.value;return i.isTimeSeries()?n=i.parseDate(t.value):i.isCategorized()&amp;&amp;"string"==typeof t.value&amp;&amp;(n=i.config.axis_x_categories.indexOf(t.value)),Math.ceil(i.x(n))},l.prototype.yvCustom=function(t,e){var i=t.axis&amp;&amp;"y2"===t.axis?this.y2:this.y,n=e?t[e]:t.value;return Math.ceil(i(n))},l.prototype.xv=function(t){var e=this,i=t.value;return e.isTimeSeries()?i=e.parseDate(t.value):e.isCategorized()&amp;&amp;"string"==typeof t.value&amp;&amp;(i=e.config.axis_x_categories.indexOf(t.value)),Math.ceil(e.x(i))},l.prototype.yv=function(t){var e=t.axis&amp;&amp;"y2"===t.axis?this.y2:this.y;return Math.ceil(e(t.value))},l.prototype.subxx=function(t){return t?this.subX(t.x):null},l.prototype.transformMain=function(t,e){var i,n,r,a=this;e&amp;&amp;e.axisX?i=e.axisX:(i=a.main.select("."+N.axisX),t&amp;&amp;(i=i.transition())),e&amp;&amp;e.axisY?n=e.axisY:(n=a.main.select("."+N.axisY),t&amp;&amp;(n=n.transition())),e&amp;&amp;e.axisY2?r=e.axisY2:(r=a.main.select("."+N.axisY2),t&amp;&amp;(r=r.transition())),(t?a.main.transition():a.main).attr("transform",a.getTranslate("main")),i.attr("transform",a.getTranslate("x")),n.attr("transform",a.getTranslate("y")),r.attr("transform",a.getTranslate("y2")),a.main.select("."+N.chartArcs).attr("transform",a.getTranslate("arc"))},l.prototype.transformAll=function(t,e){var i=this;i.transformMain(t,e),i.config.subchart_show&amp;&amp;i.transformContext(t,e),i.legend&amp;&amp;i.transformLegend(t)},l.prototype.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .overlay");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.selectChart.style("max-height",t.currentHeight+"px")},l.prototype.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},l.prototype.observeInserted=function(e){var i,n=this;"undefined"!=typeof MutationObserver?(i=new MutationObserver(function(t){t.forEach(function(t){"childList"===t.type&amp;&amp;t.previousSibling&amp;&amp;(i.disconnect(),n.intervalForObserveInserted=window.setInterval(function(){e.node().parentNode&amp;&amp;(window.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.brush&amp;&amp;n.brush.update(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})})).observe(e.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},l.prototype.bindResize=function(){var t=this,e=t.config;if(t.resizeFunction=t.generateResize(),t.resizeFunction.add(function(){e.onresize.call(t)}),e.resize_auto&amp;&amp;t.resizeFunction.add(function(){void 0!==t.resizeTimeout&amp;&amp;window.clearTimeout(t.resizeTimeout),t.resizeTimeout=window.setTimeout(function(){delete t.resizeTimeout,t.updateAndRedraw({withUpdateXDomain:!1,withUpdateOrgXDomain:!1,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.brush&amp;&amp;t.brush.update()},100)}),t.resizeFunction.add(function(){e.onresized.call(t)}),t.resizeIfElementDisplayed=function(){null!=t.api&amp;&amp;t.api.element.offsetParent&amp;&amp;t.resizeFunction()},window.attachEvent)window.attachEvent("onresize",t.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",t.resizeIfElementDisplayed,!1);else{var i=window.onresize;i?i.add&amp;&amp;i.remove||(i=t.generateResize()).add(window.onresize):i=t.generateResize(),i.add(t.resizeFunction),window.onresize=function(){t.api.element.offsetParent&amp;&amp;i()}}},l.prototype.bindWindowFocus=function(){var t=this;this.windowFocusHandler||(this.windowFocusHandler=function(){t.redraw()},window.addEventListener("focus",this.windowFocusHandler))},l.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",this.windowFocusHandler),delete this.windowFocusHandler},l.prototype.generateResize=function(){var i=[];function t(){i.forEach(function(t){t()})}return t.add=function(t){i.push(t)},t.remove=function(t){for(var e=0;e&lt;i.length;e++)if(i[e]===t){i.splice(e,1);break}},t},l.prototype.endall=function(t,e){var i=0;t.each(function(){++i}).on("end",function(){--i||e.apply(this,arguments)})},l.prototype.generateWait=function(){var n=this,r=[],t=function(t){var i=setInterval(function(){if(n.isTabVisible()){var e=0;r.forEach(function(t){if(t.empty())e+=1;else try{t.transition()}catch(t){e+=1}}),e===r.length&amp;&amp;(clearInterval(i),t&amp;&amp;t())}},50)};return t.add=function(t){r.push(t)},t},l.prototype.parseDate=function(t){var e;return t instanceof Date?e=t:"string"==typeof t?e=this.dataTimeParse(t):"object"===s(t)?e=new Date(+t):"number"!=typeof t||isNaN(t)||(e=new Date(+t)),e&amp;&amp;!isNaN(+e)||window.console.error("Failed to parse x '"+t+"' to Date object"),e},l.prototype.isTabVisible=function(){return!document.hidden},l.prototype.getPathBox=y,l.prototype.CLASS=N,"SVGPathSeg"in window||(window.SVGPathSeg=function(t,e,i){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=i},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&amp;&amp;this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=i},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=i},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=i},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=i},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(t,e,i,n,r,a,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=i,this._x1=n,this._y1=r,this._x2=a,this._y2=o},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(t,e,i,n,r,a,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=i,this._x1=n,this._y1=r,this._x2=a,this._y2=o},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=i,this._x1=n,this._y1=r},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=i,this._x1=n,this._y1=r},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(t,e,i,n,r,a,o,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=i,this._r1=n,this._r2=r,this._angle=a,this._largeArcFlag=o,this._sweepFlag=s},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(t,e,i,n,r,a,o,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=i,this._r1=n,this._r2=r,this._angle=a,this._largeArcFlag=o,this._sweepFlag=s},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=i,this._x2=n,this._y2=r},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=i,this._x2=n,this._y2=r},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=i},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=i},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,i,n,r,a){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,i,n,r,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,i,n,r,a){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,i,n,r,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,i,n){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,i,n){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,i,n,r,a,o){return new window.SVGPathSegArcAbs(void 0,t,e,i,n,r,a,o)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,i,n,r,a,o){return new window.SVGPathSegArcRel(void 0,t,e,i,n,r,a,o)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,i,n){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,i,n){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",this.getAttribute("d"));var i=e.pathSegList.numberOfItems-1;if(i&lt;=0)return 0;do{if(e.pathSegList.removeItem(i),t&gt;e.getTotalLength())break;i--}while(0&lt;i);return i})),"SVGPathSegList"in window||(window.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){if(this._pathElement){var e=!1;t.forEach(function(t){"d"==t.attributeName&amp;&amp;(e=!0)}),e&amp;&amp;(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(t){t._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t&lt;0||t&gt;=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},window.SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e&gt;this.numberOfItems&amp;&amp;(e=this.numberOfItems),t._owningPathSegList&amp;&amp;(t=t.clone()),this._list.splice(e,0,t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&amp;&amp;(t=t.clone()),this._checkValidIndex(e),((this._list[e]=t)._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},window.SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&amp;&amp;(t=t.clone()),this._list.push(t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList._pathSegArrayAsString=function(t){var e="",i=!0;return t.forEach(function(t){i?(i=!1,e+=t._asPathString()):e+=" "+t._asPathString()}),e},window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];var n=this,e=function(){this.pathSegList=[]};e.prototype.appendSegment=function(t){this.pathSegList.push(t)};var i=function(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};i.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t&lt;=" "&amp;&amp;(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)},i.prototype._skipOptionalSpaces=function(){for(;this._currentIndex&lt;this._endIndex&amp;&amp;this._isCurrentSpace();)this._currentIndex++;return this._currentIndex&lt;this._endIndex},i.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex&lt;this._endIndex&amp;&amp;!this._isCurrentSpace()&amp;&amp;","!=this._string.charAt(this._currentIndex))&amp;&amp;(this._skipOptionalSpaces()&amp;&amp;this._currentIndex&lt;this._endIndex&amp;&amp;","==this._string.charAt(this._currentIndex)&amp;&amp;(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex&lt;this._endIndex)},i.prototype.hasMoreData=function(){return this._currentIndex&lt;this._endIndex},i.prototype.peekSegmentType=function(){var t=this._string[this._currentIndex];return this._pathSegTypeFromChar(t)},i.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},i.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||"0"&lt;=t&amp;&amp;t&lt;="9")&amp;&amp;e!=window.SVGPathSeg.PATHSEG_CLOSEPATH?e==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:e==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:e:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return t==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL},i.prototype._parseNumber=function(){var t=0,e=0,i=1,n=0,r=1,a=1,o=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex&lt;this._endIndex&amp;&amp;"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex&lt;this._endIndex&amp;&amp;"-"==this._string.charAt(this._currentIndex)&amp;&amp;(this._currentIndex++,r=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)&lt;"0"||"9"&lt;this._string.charAt(this._currentIndex))&amp;&amp;"."!=this._string.charAt(this._currentIndex))){for(var s=this._currentIndex;this._currentIndex&lt;this._endIndex&amp;&amp;"0"&lt;=this._string.charAt(this._currentIndex)&amp;&amp;this._string.charAt(this._currentIndex)&lt;="9";)this._currentIndex++;if(this._currentIndex!=s)for(var c=this._currentIndex-1,d=1;s&lt;=c;)e+=d*(this._string.charAt(c--)-"0"),d*=10;if(this._currentIndex&lt;this._endIndex&amp;&amp;"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex&gt;=this._endIndex||this._string.charAt(this._currentIndex)&lt;"0"||"9"&lt;this._string.charAt(this._currentIndex))return;for(;this._currentIndex&lt;this._endIndex&amp;&amp;"0"&lt;=this._string.charAt(this._currentIndex)&amp;&amp;this._string.charAt(this._currentIndex)&lt;="9";)i*=10,n+=(this._string.charAt(this._currentIndex)-"0")/i,this._currentIndex+=1}if(this._currentIndex!=o&amp;&amp;this._currentIndex+1&lt;this._endIndex&amp;&amp;("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&amp;&amp;"x"!=this._string.charAt(this._currentIndex+1)&amp;&amp;"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&amp;&amp;(this._currentIndex++,a=-1),this._currentIndex&gt;=this._endIndex||this._string.charAt(this._currentIndex)&lt;"0"||"9"&lt;this._string.charAt(this._currentIndex))return;for(;this._currentIndex&lt;this._endIndex&amp;&amp;"0"&lt;=this._string.charAt(this._currentIndex)&amp;&amp;this._string.charAt(this._currentIndex)&lt;="9";)t*=10,t+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var l=e+n;if(l*=r,t&amp;&amp;(l*=Math.pow(10,a*t)),o!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),l}},i.prototype._parseArcFlag=function(){if(!(this._currentIndex&gt;=this._endIndex)){var t=!1,e=this._string.charAt(this._currentIndex++);if("0"==e)t=!1;else{if("1"!=e)return;t=!0}return this._skipOptionalSpacesOrDelimiter(),t}},i.prototype.parseSegment=function(){var t=this._string[this._currentIndex],e=this._pathSegTypeFromChar(t);if(e==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((e=this._nextCommandHelper(t,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=e){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(n);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(n,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(n,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(n,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(n,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(n,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(n,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(n,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(n,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);default:throw"Unknown path seg type."}};var r=new e,a=new i(t);if(!a.initialCommandIsMoveTo())return[];for(;a.hasMoreData();){var o=a.parseSegment();if(!o)return[];r.appendSegment(o)}return r.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(t,e){return t&gt;&gt;=0,e=String(void 0!==e?e:" "),this.length&gt;t?String(this):((t-=this.length)&gt;e.length&amp;&amp;(e+=e.repeat(t/e.length)),String(this)+e.slice(0,t))}),(n.prototype.axis=function(){}).labels=function(e){var i=this.internal;arguments.length&amp;&amp;(Object.keys(e).forEach(function(t){i.axis.setLabelText(t,e[t])}),i.axis.updateLabels())},n.prototype.axis.max=function(t){var e=this.internal,i=e.config;if(!arguments.length)return{x:i.axis_x_max,y:i.axis_y_max,y2:i.axis_y2_max};"object"===s(t)?(P(t.x)&amp;&amp;(i.axis_x_max=t.x),P(t.y)&amp;&amp;(i.axis_y_max=t.y),P(t.y2)&amp;&amp;(i.axis_y2_max=t.y2)):i.axis_y_max=i.axis_y2_max=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},n.prototype.axis.min=function(t){var e=this.internal,i=e.config;if(!arguments.length)return{x:i.axis_x_min,y:i.axis_y_min,y2:i.axis_y2_min};"object"===s(t)?(P(t.x)&amp;&amp;(i.axis_x_min=t.x),P(t.y)&amp;&amp;(i.axis_y_min=t.y),P(t.y2)&amp;&amp;(i.axis_y2_min=t.y2)):i.axis_y_min=i.axis_y2_min=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},n.prototype.axis.range=function(t){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};k(t.max)&amp;&amp;this.axis.max(t.max),k(t.min)&amp;&amp;this.axis.min(t.min)},n.prototype.category=function(t,e){var i=this.internal,n=i.config;return 1&lt;arguments.length&amp;&amp;(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},n.prototype.categories=function(t){var e=this.internal,i=e.config;return arguments.length&amp;&amp;(i.axis_x_categories=t,e.redraw()),i.axis_x_categories},n.prototype.resize=function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},n.prototype.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},n.prototype.destroy=function(){var e=this.internal;if(window.clearInterval(e.intervalForObserveInserted),void 0!==e.resizeTimeout&amp;&amp;window.clearTimeout(e.resizeTimeout),window.detachEvent)window.detachEvent("onresize",e.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",e.resizeIfElementDisplayed);else{var t=window.onresize;t&amp;&amp;t.add&amp;&amp;t.remove&amp;&amp;t.remove(e.resizeFunction)}return e.resizeFunction.remove(),e.unbindWindowFocus(),e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(t){e[t]=null}),null},n.prototype.color=function(t){return this.internal.color(t)},(n.prototype.data=function(e){var t=this.internal.data.targets;return void 0===e?t:t.filter(function(t){return 0&lt;=[].concat(e).indexOf(t.id)})}).shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},n.prototype.data.values=function(t){var e,i=null;return t&amp;&amp;(i=(e=this.data(t))[0]?e[0].values.map(function(t){return t.value}):null),i},n.prototype.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},n.prototype.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},n.prototype.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},n.prototype.flow=function(t){var r,e,i,n,a,o,s,c=this.internal,d=[],l=c.getMaxDataCount(),u=0,h=0;if(t.json)e=c.convertJsonToData(t.json,t.keys);else if(t.rows)e=c.convertRowsToData(t.rows);else{if(!t.columns)return;e=c.convertColumnsToData(t.columns)}r=c.convertDataToTargets(e,!0),c.data.targets.forEach(function(t){var e,i,n=!1;for(e=0;e&lt;r.length;e++)if(t.id===r[e].id){for(n=!0,t.values[t.values.length-1]&amp;&amp;(h=t.values[t.values.length-1].index+1),u=r[e].values.length,i=0;i&lt;u;i++)r[e].values[i].index=h+i,c.isTimeSeries()||(r[e].values[i].x=h+i);t.values=t.values.concat(r[e].values),r.splice(e,1);break}n||d.push(t.id)}),c.data.targets.forEach(function(t){var e,i;for(e=0;e&lt;d.length;e++)if(t.id===d[e])for(h=t.values[t.values.length-1].index+1,i=0;i&lt;u;i++)t.values.push({id:t.id,index:h+i,x:c.isTimeSeries()?c.getOtherTargetX(h+i):h+i,value:null})}),c.data.targets.length&amp;&amp;r.forEach(function(t){var e,i=[];for(e=c.data.targets[0].values[0].index;e&lt;h;e++)i.push({id:t.id,index:e,x:c.isTimeSeries()?c.getOtherTargetX(e):e,value:null});t.values.forEach(function(t){t.index+=h,c.isTimeSeries()||(t.x+=h)}),t.values=i.concat(t.values)}),c.data.targets=c.data.targets.concat(r),c.getMaxDataCount(),a=(n=c.data.targets[0]).values[0],k(t.to)?(u=0,s=c.isTimeSeries()?c.parseDate(t.to):t.to,n.values.forEach(function(t){t.x&lt;s&amp;&amp;u++})):k(t.length)&amp;&amp;(u=t.length),l?1===l&amp;&amp;c.isTimeSeries()&amp;&amp;(o=(n.values[n.values.length-1].x-a.x)/2,i=[new Date(+a.x-o),new Date(+a.x+o)],c.updateXDomain(null,!0,!0,!1,i)):(o=c.isTimeSeries()?1&lt;n.values.length?n.values[n.values.length-1].x-a.x:a.x-c.getXDomain(c.data.targets)[0]:1,i=[a.x-o,a.x],c.updateXDomain(null,!0,!0,!1,i)),c.updateTargets(c.data.targets),c.redraw({flow:{index:a.index,length:u,duration:P(t.duration)?t.duration:c.config.transition_duration,done:t.done,orgDataCount:l},withLegend:!0,withTransition:1&lt;l,withTrimXDomain:!1,withUpdateXAxis:!0})},l.prototype.generateFlow=function(G){var E=this,O=E.config,I=E.d3;return function(){var t,e,n,r,a,o,s,c,d,l,i=G.targets,u=G.flow,h=G.drawBar,g=G.drawLine,p=G.drawArea,f=G.cx,_=G.cy,x=G.xv,y=G.xForText,m=G.yForText,S=G.duration,w=u.index,v=u.length,b=E.getValueOnIndex(E.data.targets[0].values,w),T=E.getValueOnIndex(E.data.targets[0].values,w+v),A=E.x.domain(),P=u.duration||S,C=u.done||function(){},L=E.generateWait();E.flowing=!0,E.data.targets.forEach(function(t){t.values.splice(0,v)}),e=E.updateXDomain(i,!0,!0),E.updateXGrid&amp;&amp;E.updateXGrid(!0),n=E.xgrid||I.selectAll([]),r=E.xgridLines||I.selectAll([]),a=E.mainRegion||I.selectAll([]),o=E.mainText||I.selectAll([]),s=E.mainBar||I.selectAll([]),c=E.mainLine||I.selectAll([]),d=E.mainArea||I.selectAll([]),l=E.mainCircle||I.selectAll([]),t="translate("+(u.orgDataCount?1===u.orgDataCount||(b&amp;&amp;b.x)===(T&amp;&amp;T.x)?E.x(A[0])-E.x(e[0]):E.isTimeSeries()?E.x(A[0])-E.x(e[0]):E.x(b.x)-E.x(T.x):1!==E.data.targets[0].values.length?E.x(A[0])-E.x(e[0]):E.isTimeSeries()?(b=E.getValueOnIndex(E.data.targets[0].values,0),T=E.getValueOnIndex(E.data.targets[0].values,E.data.targets[0].values.length-1),E.x(b.x)-E.x(T.x)):R(e)/2)+",0) scale("+R(A)/R(e)+",1)",E.hideXGridFocus();var V=I.transition().ease(I.easeLinear).duration(P);L.add(E.xAxis(E.axes.x,V)),L.add(s.transition(V).attr("transform",t)),L.add(c.transition(V).attr("transform",t)),L.add(d.transition(V).attr("transform",t)),L.add(l.transition(V).attr("transform",t)),L.add(o.transition(V).attr("transform",t)),L.add(a.filter(E.isRegionOnX).transition(V).attr("transform",t)),L.add(n.transition(V).attr("transform",t)),L.add(r.transition(V).attr("transform",t)),L(function(){var t,e=[],i=[];if(v){for(t=0;t&lt;v;t++)e.push("."+N.shape+"-"+(w+t)),i.push("."+N.text+"-"+(w+t));E.svg.selectAll("."+N.shapes).selectAll(e).remove(),E.svg.selectAll("."+N.texts).selectAll(i).remove(),E.svg.select("."+N.xgrid).remove()}n.attr("transform",null).attr("x1",E.xgridAttr.x1).attr("x2",E.xgridAttr.x2).attr("y1",E.xgridAttr.y1).attr("y2",E.xgridAttr.y2).style("opacity",E.xgridAttr.opacity),r.attr("transform",null),r.select("line").attr("x1",O.axis_rotated?0:x).attr("x2",O.axis_rotated?E.width:x),r.select("text").attr("x",O.axis_rotated?E.width:0).attr("y",x),s.attr("transform",null).attr("d",h),c.attr("transform",null).attr("d",g),d.attr("transform",null).attr("d",p),l.attr("transform",null).attr("cx",f).attr("cy",_),o.attr("transform",null).attr("x",y).attr("y",m).style("fill-opacity",E.opacityForText.bind(E)),a.attr("transform",null),a.filter(E.isRegionOnX).attr("x",E.regionX.bind(E)).attr("width",E.regionWidth.bind(E)),C(),E.flowing=!1})}},n.prototype.focus=function(e){var t,i=this.internal;e=i.mapToTargetIds(e),t=i.svg.selectAll(i.selectorTargets(e.filter(i.isTargetToShow,i))),this.revert(),this.defocus(),t.classed(N.focused,!0).classed(N.defocused,!1),i.hasArcType()&amp;&amp;i.expandArc(e),i.toggleFocusLegend(e,!0),i.focusedTargetIds=e,i.defocusedTargetIds=i.defocusedTargetIds.filter(function(t){return e.indexOf(t)&lt;0})},n.prototype.defocus=function(e){var t=this.internal;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))).classed(N.focused,!1).classed(N.defocused,!0),t.hasArcType()&amp;&amp;t.unexpandArc(e),t.toggleFocusLegend(e,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return e.indexOf(t)&lt;0}),t.defocusedTargetIds=e},n.prototype.revert=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t)).classed(N.focused,!1).classed(N.defocused,!1),e.hasArcType()&amp;&amp;e.unexpandArc(t),e.config.legend_show&amp;&amp;(e.showLegend(t.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(t)).filter(function(){return e.d3.select(this).classed(N.legendItemFocused)}).classed(N.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]},(n.prototype.xgrids=function(t){var e=this.internal,i=e.config;return t&amp;&amp;(i.grid_x_lines=t,e.redrawWithoutRescale()),i.grid_x_lines}).add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t||[]))},n.prototype.xgrids.remove=function(t){this.internal.removeGridLines(t,!0)},(n.prototype.ygrids=function(t){var e=this.internal,i=e.config;return t&amp;&amp;(i.grid_y_lines=t,e.redrawWithoutRescale()),i.grid_y_lines}).add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t||[]))},n.prototype.ygrids.remove=function(t){this.internal.removeGridLines(t,!1)},n.prototype.groups=function(t){var e=this.internal,i=e.config;return v(t)||(i.data_groups=t,e.redraw()),i.data_groups},(n.prototype.legend=function(){}).show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},n.prototype.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!1})},n.prototype.load=function(e){var t=this.internal,i=t.config;e.xs&amp;&amp;t.addXs(e.xs),"names"in e&amp;&amp;n.prototype.data.names.bind(this)(e.names),"classes"in e&amp;&amp;Object.keys(e.classes).forEach(function(t){i.data_classes[t]=e.classes[t]}),"categories"in e&amp;&amp;t.isCategorized()&amp;&amp;(i.axis_x_categories=e.categories),"axes"in e&amp;&amp;Object.keys(e.axes).forEach(function(t){i.data_axes[t]=e.axes[t]}),"colors"in e&amp;&amp;Object.keys(e.colors).forEach(function(t){i.data_colors[t]=e.colors[t]}),"cacheIds"in e&amp;&amp;t.hasCaches(e.cacheIds)?t.load(t.getCaches(e.cacheIds),e.done):"unload"in e?t.unload(t.mapToTargetIds("boolean"==typeof e.unload&amp;&amp;e.unload?null:e.unload),function(){t.loadFromArgs(e)}):t.loadFromArgs(e)},n.prototype.unload=function(t){var e=this.internal;(t=t||{})instanceof Array?t={ids:t}:"string"==typeof t&amp;&amp;(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&amp;&amp;t.done()})},(n.prototype.regions=function(t){var e=this.internal,i=e.config;return t&amp;&amp;(i.regions=t,e.redrawWithoutRescale()),i.regions}).add=function(t){var e=this.internal,i=e.config;return t&amp;&amp;(i.regions=i.regions.concat(t),e.redrawWithoutRescale()),i.regions},n.prototype.regions.remove=function(t){var e,i,n,r=this.internal,a=r.config;return e=Y(t=t||{},"duration",a.transition_duration),i=Y(t,"classes",[N.region]),n=r.main.select("."+N.regions).selectAll(i.map(function(t){return"."+t})),(e?n.transition().duration(e):n).style("opacity",0).remove(),a.regions=a.regions.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){0&lt;=i.indexOf(t)&amp;&amp;(e=!0)}),!e)}),a.regions},n.prototype.selected=function(t){var e=this.internal,i=e.d3;return e.main.selectAll("."+N.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+N.shape).filter(function(){return i.select(this).classed(N.SELECTED)}).nodes().map(function(t){var e=t.__data__;return e.data?e.data:e})},n.prototype.select=function(c,d,l){var u=this.internal,h=u.d3,g=u.config;g.data_selection_enabled&amp;&amp;u.main.selectAll("."+N.shapes).selectAll("."+N.shape).each(function(t,e){var i=h.select(this),n=t.data?t.data.id:t.id,r=u.getToggle(this,t).bind(u),a=g.data_selection_grouped||!c||0&lt;=c.indexOf(n),o=!d||0&lt;=d.indexOf(e),s=i.classed(N.SELECTED);i.classed(N.line)||i.classed(N.area)||(a&amp;&amp;o?g.data_selection_isselectable(t)&amp;&amp;!s&amp;&amp;r(!0,i.classed(N.SELECTED,!0),t,e):k(l)&amp;&amp;l&amp;&amp;s&amp;&amp;r(!1,i.classed(N.SELECTED,!1),t,e))})},n.prototype.unselect=function(c,d){var l=this.internal,u=l.d3,h=l.config;h.data_selection_enabled&amp;&amp;l.main.selectAll("."+N.shapes).selectAll("."+N.shape).each(function(t,e){var i=u.select(this),n=t.data?t.data.id:t.id,r=l.getToggle(this,t).bind(l),a=h.data_selection_grouped||!c||0&lt;=c.indexOf(n),o=!d||0&lt;=d.indexOf(e),s=i.classed(N.SELECTED);i.classed(N.line)||i.classed(N.area)||a&amp;&amp;o&amp;&amp;h.data_selection_isselectable(t)&amp;&amp;s&amp;&amp;r(!1,i.classed(N.SELECTED,!1),t,e)})},n.prototype.show=function(t,e){var i,n=this.internal;t=n.mapToTargetIds(t),e=e||{},n.removeHiddenTargetIds(t),(i=n.svg.selectAll(n.selectorTargets(t))).transition().style("display","initial","important").style("opacity",1,"important").call(n.endall,function(){i.style("opacity",null).style("opacity",1)}),e.withLegend&amp;&amp;n.showLegend(t),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},n.prototype.hide=function(t,e){var i,n=this.internal;t=n.mapToTargetIds(t),e=e||{},n.addHiddenTargetIds(t),(i=n.svg.selectAll(n.selectorTargets(t))).transition().style("opacity",0,"important").call(n.endall,function(){i.style("opacity",null).style("opacity",0),i.style("display","none")}),e.withLegend&amp;&amp;n.hideLegend(t),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},n.prototype.toggle=function(t,e){var i=this,n=this.internal;n.mapToTargetIds(t).forEach(function(t){n.isTargetToShow(t)?i.hide(t,e):i.show(t,e)})},(n.prototype.tooltip=function(){}).show=function(e){var t,i,n=this.internal,r={};r=e.mouse?e.mouse:(e.data?i=e.data:void 0!==e.x&amp;&amp;(t=e.id?n.data.targets.filter(function(t){return t.id===e.id}):n.data.targets,i=n.filterByX(t,e.x).slice(0,1)[0]),i?n.getMousePosition(i):null),n.dispatchEvent("mousemove",r),n.config.tooltip_onshow.call(n,i)},n.prototype.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},n.prototype.transform=function(t,e){var i=this.internal,n=0&lt;=["pie","donut"].indexOf(t)?{withTransform:!0}:null;i.transformTo(e,t,n)},l.prototype.transformTo=function(t,e,i){var n=this,r=!n.hasArcType(),a=i||{withTransitionForAxis:r};a.withTransitionForTransform=!1,n.transiting=!1,n.setTargetType(t,e),n.updateTargets(n.data.targets),n.updateAndRedraw(a)},n.prototype.x=function(t){var e=this.internal;return arguments.length&amp;&amp;(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},n.prototype.xs=function(t){var e=this.internal;return arguments.length&amp;&amp;(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},(n.prototype.zoom=function(t){var e=this.internal;return t?(e.isTimeSeries()&amp;&amp;(t=t.map(function(t){return e.parseDate(t)})),e.config.subchart_show?e.brush.selectionAsValue(t,!0):(e.updateXDomain(null,!0,!1,!1,t),e.redraw({withY:e.config.zoom_rescale,withSubchart:!1})),e.config.zoom_onzoom.call(this,e.x.orgDomain()),t):e.x.domain()}).enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},n.prototype.unzoom=function(){var t=this.internal;t.config.subchart_show?t.brush.clear():(t.updateXDomain(null,!0,!1,!1,t.subX.domain()),t.redraw({withY:t.config.zoom_rescale,withSubchart:!1}))},n.prototype.zoom.max=function(t){var e=this.internal,i=e.config,n=e.d3;if(0!==t&amp;&amp;!t)return i.zoom_x_max;i.zoom_x_max=n.max([e.orgXDomain[1],t])},n.prototype.zoom.min=function(t){var e=this.internal,i=e.config,n=e.d3;if(0!==t&amp;&amp;!t)return i.zoom_x_min;i.zoom_x_min=n.min([e.orgXDomain[0],t])},n.prototype.zoom.range=function(t){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};k(t.max)&amp;&amp;this.domain.max(t.max),k(t.min)&amp;&amp;this.domain.min(t.min)},l.prototype.initPie=function(){var t=this,e=t.d3;t.pie=e.pie().value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)});var i=t.getOrderFunction();if(i&amp;&amp;(t.isOrderAsc()||t.isOrderDesc())){var n=i;i=function(t,e){return-1*n(t,e)}}t.pie.sort(i||null)},l.prototype.updateRadius=function(){var t=this,e=t.config,i=e.gauge_width||e.donut_width,n=t.filterTargetsToShow(t.data.targets).length*t.config.gauge_arcs_minWidth;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2*(t.hasType("gauge")?.85:1),t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=i?(t.radius-i)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0,t.gaugeArcWidth=i||(n&lt;=t.radius-t.innerRadius?t.radius-t.innerRadius:n&lt;=t.radius?n:t.radius)},l.prototype.updateArc=function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},l.prototype.updateAngle=function(e){var t,i,n,r,a=this,o=a.config,s=!1,c=0;return o?(a.pie(a.filterTargetsToShow(a.data.targets)).forEach(function(t){s||t.data.id!==e.data.id||(s=!0,(e=t).index=c),c++}),isNaN(e.startAngle)&amp;&amp;(e.startAngle=0),isNaN(e.endAngle)&amp;&amp;(e.endAngle=e.startAngle),a.isGaugeType(e.data)&amp;&amp;(t=o.gauge_min,i=o.gauge_max,n=Math.PI*(o.gauge_fullCircle?2:1)/(i-t),r=e.value&lt;t?0:e.value&lt;i?e.value-t:i-t,e.startAngle=o.gauge_startingAngle,e.endAngle=e.startAngle+n*r),s?e:null):null},l.prototype.getSvgArc=function(){var n=this,e=n.hasType("gauge"),i=n.gaugeArcWidth/n.filterTargetsToShow(n.data.targets).length,r=n.d3.arc().outerRadius(function(t){return e?n.radius-i*t.index:n.radius}).innerRadius(function(t){return e?n.radius-i*(t.index+1):n.innerRadius}),t=function(t,e){var i;return e?r(t):(i=n.updateAngle(t))?r(i):"M 0 0"};return t.centroid=r.centroid,t},l.prototype.getSvgArcExpanded=function(e){e=e||1;var i=this,n=i.hasType("gauge"),r=i.gaugeArcWidth/i.filterTargetsToShow(i.data.targets).length,a=Math.min(i.radiusExpanded*e-i.radius,.8*r-100*(1-e)),o=i.d3.arc().outerRadius(function(t){return n?i.radius-r*t.index+a:i.radiusExpanded*e}).innerRadius(function(t){return n?i.radius-r*(t.index+1):i.innerRadius});return function(t){var e=i.updateAngle(t);return e?o(e):"M 0 0"}},l.prototype.getArc=function(t,e,i){return i||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},l.prototype.transformForArcLabel=function(t){var e,i,n,r,a,o=this,s=o.config,c=o.updateAngle(t),d="",l=o.hasType("gauge");if(c&amp;&amp;!l)e=this.svgArc.centroid(c),i=isNaN(e[0])?0:e[0],n=isNaN(e[1])?0:e[1],r=Math.sqrt(i*i+n*n),d="translate("+i*(a=o.hasType("donut")&amp;&amp;s.donut_label_ratio?h(s.donut_label_ratio)?s.donut_label_ratio(t,o.radius,r):s.donut_label_ratio:o.hasType("pie")&amp;&amp;s.pie_label_ratio?h(s.pie_label_ratio)?s.pie_label_ratio(t,o.radius,r):s.pie_label_ratio:o.radius&amp;&amp;r?(.375&lt;36/o.radius?1.175-36/o.radius:.8)*o.radius/r:0)+","+n*a+")";else if(c&amp;&amp;l&amp;&amp;1&lt;o.filterTargetsToShow(o.data.targets).length){var u=Math.sin(c.endAngle-Math.PI/2);d="translate("+(i=Math.cos(c.endAngle-Math.PI/2)*(o.radiusExpanded+25))+","+(n=u*(o.radiusExpanded+15-Math.abs(10*u))+3)+")"}return d},l.prototype.getArcRatio=function(t){var e=this.config,i=Math.PI*(this.hasType("gauge")&amp;&amp;!e.gauge_fullCircle?1:2);return t?(t.endAngle-t.startAngle)/i:null},l.prototype.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},l.prototype.textForArcLabel=function(t){var e,i,n,r,a,o=this;return o.shouldShowArcLabel()?(i=(e=o.updateAngle(t))?e.value:null,n=o.getArcRatio(e),r=t.data.id,o.hasType("gauge")||o.meetsArcLabelThreshold(n)?(a=o.getArcLabelFormat())?a(i,n,r):o.defaultArcValueFormat(i,n):""):""},l.prototype.textForGaugeMinMax=function(t,e){var i=this.getGaugeLabelExtents();return i?i(t,e):t},l.prototype.expandArc=function(t){var e,i=this;i.transiting?e=window.setInterval(function(){i.transiting||(window.clearInterval(e),0&lt;i.legend.selectAll(".c3-legend-item-focused").size()&amp;&amp;i.expandArc(t))},10):(t=i.mapToTargetIds(t),i.svg.selectAll(i.selectorTargets(t,"."+N.chartArc)).each(function(t){i.shouldExpand(t.data.id)&amp;&amp;i.d3.select(this).selectAll("path").transition().duration(i.expandDuration(t.data.id)).attr("d",i.svgArcExpanded).transition().duration(2*i.expandDuration(t.data.id)).attr("d",i.svgArcExpandedSub).each(function(t){i.isDonutType(t.data)})}))},l.prototype.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+N.chartArc)).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("."+N.arc))},l.prototype.expandDuration=function(t){var e=this.config;return this.isDonutType(t)?e.donut_expand_duration:this.isGaugeType(t)?e.gauge_expand_duration:this.isPieType(t)?e.pie_expand_duration:50},l.prototype.shouldExpand=function(t){var e=this.config;return this.isDonutType(t)&amp;&amp;e.donut_expand||this.isGaugeType(t)&amp;&amp;e.gauge_expand||this.isPieType(t)&amp;&amp;e.pie_expand},l.prototype.shouldShowArcLabel=function(){var t=this.config,e=!0;return this.hasType("donut")?e=t.donut_label_show:this.hasType("pie")&amp;&amp;(e=t.pie_label_show),e},l.prototype.meetsArcLabelThreshold=function(t){var e=this.config;return(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)&lt;=t},l.prototype.getArcLabelFormat=function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&amp;&amp;(e=t.donut_label_format),e},l.prototype.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},l.prototype.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},l.prototype.updateTargetsForArc=function(t){var e,i=this,n=i.main,r=i.classChartArc.bind(i),a=i.classArcs.bind(i),o=i.classFocus.bind(i);(e=n.select("."+N.chartArcs).selectAll("."+N.chartArc).data(i.pie(t)).attr("class",function(t){return r(t)+o(t.data)}).enter().append("g").attr("class",r)).append("g").attr("class",a),e.append("text").attr("dy",i.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},l.prototype.initArc=function(){var t=this;t.arcs=t.main.select("."+N.chart).append("g").attr("class",N.chartArcs).attr("transform",t.getTranslate("arc")),t.arcs.append("text").attr("class",N.chartArcsTitle).style("text-anchor","middle").text(t.getArcTitle())},l.prototype.redrawArc=function(t,e,i){var n,r,a,o,l=this,u=l.d3,s=l.config,c=l.main,d=l.hasType("gauge");if(r=(n=c.selectAll("."+N.arcs).selectAll("."+N.arc).data(l.arcData.bind(l))).enter().append("path").attr("class",l.classArc.bind(l)).style("fill",function(t){return l.color(t.data)}).style("cursor",function(t){return s.interaction_enabled&amp;&amp;s.data_selection_isselectable(t)?"pointer":null}).each(function(t){l.isGaugeType(t.data)&amp;&amp;(t.startAngle=t.endAngle=s.gauge_startingAngle),this._current=t}).merge(n),d&amp;&amp;(o=(a=c.selectAll("."+N.arcs).selectAll("."+N.arcLabelLine).data(l.arcData.bind(l))).enter().append("rect").attr("class",function(t){return N.arcLabelLine+" "+N.target+" "+N.target+"-"+t.data.id}).merge(a),1===l.filterTargetsToShow(l.data.targets).length?o.style("display","none"):o.style("fill",function(t){return l.levelColor?l.levelColor(t.data.values[0].value):l.color(t.data)}).style("display",s.gauge_labelLine_show?"":"none").each(function(t){var e=0,i=0,n=0,r="";if(l.hiddenTargetIds.indexOf(t.data.id)&lt;0){var a=l.updateAngle(t),o=l.gaugeArcWidth/l.filterTargetsToShow(l.data.targets).length*(a.index+1),s=a.endAngle-Math.PI/2,c=l.radius-o,d=s-(0===c?0:1/c);e=l.radiusExpanded-l.radius+o,i=Math.cos(d)*c,n=Math.sin(d)*c,r="rotate("+180*s/Math.PI+", "+i+", "+n+")"}u.select(this).attr("x",i).attr("y",n).attr("width",e).attr("height",2).attr("transform",r).style("stroke-dasharray","0, "+(e+2)+", 0")})),r.attr("transform",function(t){return!l.isGaugeType(t.data)&amp;&amp;i?"scale(0)":""}).on("mouseover",s.interaction_enabled?function(t){var e,i;l.transiting||(e=l.updateAngle(t))&amp;&amp;(i=l.convertToArcData(e),l.expandArc(e.data.id),l.api.focus(e.data.id),l.toggleFocusLegend(e.data.id,!0),l.config.data_onmouseover(i,this))}:null).on("mousemove",s.interaction_enabled?function(t){var e,i=l.updateAngle(t);i&amp;&amp;(e=[l.convertToArcData(i)],l.showTooltip(e,this))}:null).on("mouseout",s.interaction_enabled?function(t){var e,i;l.transiting||(e=l.updateAngle(t))&amp;&amp;(i=l.convertToArcData(e),l.unexpandArc(e.data.id),l.api.revert(),l.revertLegend(),l.hideTooltip(),l.config.data_onmouseout(i,this))}:null).on("click",s.interaction_enabled?function(t,e){var i,n=l.updateAngle(t);n&amp;&amp;(i=l.convertToArcData(n),l.toggleShape&amp;&amp;l.toggleShape(this,i,e),l.config.data_onclick.call(l.api,i,this))}:null).each(function(){l.transiting=!0}).transition().duration(t).attrTween("d",function(i){var n,t=l.updateAngle(i);return t?(isNaN(this._current.startAngle)&amp;&amp;(this._current.startAngle=0),isNaN(this._current.endAngle)&amp;&amp;(this._current.endAngle=this._current.startAngle),n=u.interpolate(this._current,t),this._current=n(0),function(t){var e=n(t);return e.data=i.data,l.getArc(e,!0)}):function(){return"M 0 0"}}).attr("transform",i?"scale(1)":"").style("fill",function(t){return l.levelColor?l.levelColor(t.data.values[0].value):l.color(t.data.id)}).call(l.endall,function(){l.transiting=!1}),n.exit().transition().duration(e).style("opacity",0).remove(),c.selectAll("."+N.chartArc).select("text").style("opacity",0).attr("class",function(t){return l.isGaugeType(t.data)?N.gaugeValue:""}).text(l.textForArcLabel.bind(l)).attr("transform",l.transformForArcLabel.bind(l)).style("font-size",function(t){return l.isGaugeType(t.data)&amp;&amp;1===l.filterTargetsToShow(l.data.targets).length?Math.round(l.radius/5)+"px":""}).transition().duration(t).style("opacity",function(t){return l.isTargetToShow(t.data.id)&amp;&amp;l.isArcType(t.data)?1:0}),c.select("."+N.chartArcsTitle).style("opacity",l.hasType("donut")||d?1:0),d){var h=0,g=l.arcs.select("g."+N.chartArcsBackground).selectAll("path."+N.chartArcsBackground).data(l.data.targets);g.enter().append("path").attr("class",function(t,e){return N.chartArcsBackground+" "+N.chartArcsBackground+"-"+e}).merge(g).attr("d",function(t){if(0&lt;=l.hiddenTargetIds.indexOf(t.id))return"M 0 0";var e={data:[{value:s.gauge_max}],startAngle:s.gauge_startingAngle,endAngle:-1*s.gauge_startingAngle*(s.gauge_fullCircle?Math.PI:1),index:h++};return l.getArc(e,!0,!0)}),g.exit().remove(),l.arcs.select("."+N.chartArcsGaugeUnit).attr("dy",".75em").text(s.gauge_label_show?s.gauge_units:""),l.arcs.select("."+N.chartArcsGaugeMin).attr("dx",-1*(l.innerRadius+(l.radius-l.innerRadius)/(s.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(s.gauge_label_show?l.textForGaugeMinMax(s.gauge_min,!1):""),l.arcs.select("."+N.chartArcsGaugeMax).attr("dx",l.innerRadius+(l.radius-l.innerRadius)/(s.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(s.gauge_label_show?l.textForGaugeMinMax(s.gauge_max,!0):"")}},l.prototype.initGauge=function(){var t=this.arcs;this.hasType("gauge")&amp;&amp;(t.append("g").attr("class",N.chartArcsBackground),t.append("text").attr("class",N.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",N.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",N.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},l.prototype.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},l.prototype.hasCaches=function(t){for(var e=0;e&lt;t.length;e++)if(!(t[e]in this.cache))return!1;return!0},l.prototype.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},l.prototype.getCaches=function(t){var e,i=[];for(e=0;e&lt;t.length;e++)t[e]in this.cache&amp;&amp;i.push(this.cloneTarget(this.cache[t[e]]));return i},l.prototype.categoryName=function(t){var e=this.config;return t&lt;e.axis_x_categories.length?e.axis_x_categories[t]:t},l.prototype.generateTargetClass=function(t){return t||0===t?("-"+t).replace(/\s/g,"-"):""},l.prototype.generateClass=function(t,e){return" "+t+" "+t+this.generateTargetClass(e)},l.prototype.classText=function(t){return this.generateClass(N.text,t.index)},l.prototype.classTexts=function(t){return this.generateClass(N.texts,t.id)},l.prototype.classShape=function(t){return this.generateClass(N.shape,t.index)},l.prototype.classShapes=function(t){return this.generateClass(N.shapes,t.id)},l.prototype.classLine=function(t){return this.classShape(t)+this.generateClass(N.line,t.id)},l.prototype.classLines=function(t){return this.classShapes(t)+this.generateClass(N.lines,t.id)},l.prototype.classCircle=function(t){return this.classShape(t)+this.generateClass(N.circle,t.index)},l.prototype.classCircles=function(t){return this.classShapes(t)+this.generateClass(N.circles,t.id)},l.prototype.classBar=function(t){return this.classShape(t)+this.generateClass(N.bar,t.index)},l.prototype.classBars=function(t){return this.classShapes(t)+this.generateClass(N.bars,t.id)},l.prototype.classArc=function(t){return this.classShape(t.data)+this.generateClass(N.arc,t.data.id)},l.prototype.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(N.arcs,t.data.id)},l.prototype.classArea=function(t){return this.classShape(t)+this.generateClass(N.area,t.id)},l.prototype.classAreas=function(t){return this.classShapes(t)+this.generateClass(N.areas,t.id)},l.prototype.classRegion=function(t,e){return this.generateClass(N.region,e)+" "+("class"in t?t.class:"")},l.prototype.classEvent=function(t){return this.generateClass(N.eventRect,t.index)},l.prototype.classTarget=function(t){var e=this.config.data_classes[t],i="";return e&amp;&amp;(i=" "+N.target+"-"+e),this.generateClass(N.target,t)+i},l.prototype.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},l.prototype.classFocused=function(t){return" "+(0&lt;=this.focusedTargetIds.indexOf(t.id)?N.focused:"")},l.prototype.classDefocused=function(t){return" "+(0&lt;=this.defocusedTargetIds.indexOf(t.id)?N.defocused:"")},l.prototype.classChartText=function(t){return N.chartText+this.classTarget(t.id)},l.prototype.classChartLine=function(t){return N.chartLine+this.classTarget(t.id)},l.prototype.classChartBar=function(t){return N.chartBar+this.classTarget(t.id)},l.prototype.classChartArc=function(t){return N.chartArc+this.classTarget(t.data.id)},l.prototype.getTargetSelectorSuffix=function(t){return this.generateTargetClass(t).replace(/([?!@#$%^&amp;*()_=+,.&lt;&gt;'":;\[\]\/|~`{}\\])/g,"\\$1")},l.prototype.selectorTarget=function(t,e){return(e||"")+"."+N.target+this.getTargetSelectorSuffix(t)},l.prototype.selectorTargets=function(t,e){var i=this;return(t=t||[]).length?t.map(function(t){return i.selectorTarget(t,e)}):null},l.prototype.selectorLegend=function(t){return"."+N.legendItem+this.getTargetSelectorSuffix(t)},l.prototype.selectorLegends=function(t){var e=this;return t&amp;&amp;t.length?t.map(function(t){return e.selectorLegend(t)}):null},l.prototype.getClipPath=function(t){return"url("+(0&lt;=window.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+t+")"},l.prototype.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},l.prototype.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},l.prototype.getAxisClipY=function(t){return t?-20:-this.margin.top},l.prototype.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},l.prototype.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},l.prototype.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},l.prototype.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},l.prototype.getAxisClipWidth=function(t){var e=Math.max(30,this.margin.left),i=Math.max(30,this.margin.right);return t?this.width+2+e+i:this.margin.left+20},l.prototype.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},l.prototype.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},l.prototype.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},l.prototype.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},l.prototype.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},l.prototype.generateColor=function(){var t=this.config,e=this.d3,n=t.data_colors,r=C(t.color_pattern)?t.color_pattern:e.schemeCategory10,a=t.data_color,o=[];return function(t){var e,i=t.id||t.data&amp;&amp;t.data.id||t;return n[i]instanceof Function?e=n[i](t):n[i]?e=n[i]:(o.indexOf(i)&lt;0&amp;&amp;o.push(i),e=r[o.indexOf(i)%r.length],n[i]=e),a instanceof Function?a(e,t):e}},l.prototype.generateLevelColor=function(){var t=this.config,n=t.color_pattern,e=t.color_threshold,r="value"===e.unit,a=e.values&amp;&amp;e.values.length?e.values:[],o=e.max||100;return C(e)&amp;&amp;C(n)?function(t){var e,i=n[n.length-1];for(e=0;e&lt;a.length;e++)if((r?t:100*t/o)&lt;a[e]){i=n[e];break}return i}:null},l.prototype.getDefaultConfig=function(){var e={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:!1,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_epochs:"epochs",data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",stanford_lines:[],stanford_regions:[],stanford_texts:[],stanford_scaleMin:void 0,stanford_scaleMax:void 0,stanford_scaleWidth:void 0,stanford_scaleFormat:void 0,stanford_scaleValues:void 0,stanford_colors:void 0,stanford_padding:{top:0,right:0,bottom:0,left:0},regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_horizontal:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,i,n){return this.getTooltipContent?this.getTooltipContent(t,e,i,n):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},l.prototype.additionalConfig={},l.prototype.loadConfig=function(e){var i,n,r,a=this.config;Object.keys(a).forEach(function(t){i=e,n=t.split("_"),r=function t(){var e=n.shift();return e&amp;&amp;i&amp;&amp;"object"===s(i)&amp;&amp;e in i?(i=i[e],t()):e?void 0:i}(),k(r)&amp;&amp;(a[t]=r)})},l.prototype.convertUrlToData=function(t,e,i,n,r){var a,o,s=this,c=e||"csv";o="json"===c?(a=s.d3.json,s.convertJsonToData):(a="tsv"===c?s.d3.tsv:s.d3.csv,s.convertXsvToData),a(t,i).then(function(t){r.call(s,o.call(s,t,n))}).catch(function(t){throw t})},l.prototype.convertXsvToData=function(t){var e=t.columns;return 0===t.length?{keys:e,rows:[e.reduce(function(t,e){return Object.assign(t,(r=null,(n=e)in(i={})?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i));var i,n,r},{})]}:{keys:e,rows:[].concat(t)}},l.prototype.convertJsonToData=function(e,t){var r,a=this,o=[];return t?(t.x?(r=t.value.concat(t.x),a.config.data_x=t.x):r=t.value,o.push(r),e.forEach(function(i){var n=[];r.forEach(function(t){var e=a.findValueInJson(i,t);v(e)&amp;&amp;(e=null),n.push(e)}),o.push(n)}),a.convertRowsToData(o)):(Object.keys(e).forEach(function(t){o.push([t].concat(e[t]))}),a.convertColumnsToData(o))},l.prototype.findValueInJson=function(t,e){for(var i=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),n=0;n&lt;i.length;++n){var r=i[n];if(!(r in t))return;t=t[r]}return t},l.prototype.convertRowsToData=function(t){for(var e=[],i=t[0],n=1;n&lt;t.length;n++){for(var r={},a=0;a&lt;t[n].length;a++){if(v(t[n][a]))throw new Error("Source data is missing a component at ("+n+","+a+")!");r[i[a]]=t[n][a]}e.push(r)}return{keys:i,rows:e}},l.prototype.convertColumnsToData=function(t){for(var e=[],i=[],n=0;n&lt;t.length;n++){for(var r=t[n][0],a=1;a&lt;t[n].length;a++){if(v(e[a-1])&amp;&amp;(e[a-1]={}),v(t[n][a]))throw new Error("Source data is missing a component at ("+n+","+a+")!");e[a-1][r]=t[n][a]}i.push(r)}return{keys:i,rows:e}},l.prototype.convertDataToTargets=function(t,n){var e,i,r,a,d,l=this,u=l.config;if(o(t)?a=Object.keys(t[0]):(a=t.keys,t=t.rows),r=a.filter(l.isX,l),l.isStanfordGraphType()){if(d=a.filter(l.isEpochs,l),i=a.filter(l.isNotXAndNotEpochs,l),1!==r.length||1!==d.length||1!==i.length)throw new Error("You must define the 'x' key name and the 'epochs' for Stanford Diagrams")}else i=a.filter(l.isNotX,l);return i.forEach(function(i){var e=l.getXKey(i);l.isCustomX()||l.isTimeSeries()?0&lt;=r.indexOf(e)?l.data.xs[i]=(n&amp;&amp;l.data.xs[i]?l.data.xs[i]:[]).concat(t.map(function(t){return t[e]}).filter(P).map(function(t,e){return l.generateTargetX(t,i,e)})):u.data_x?l.data.xs[i]=l.getOtherTargetXs():C(u.data_xs)&amp;&amp;(l.data.xs[i]=l.getXValuesOfXKey(e,l.data.targets)):l.data.xs[i]=t.map(function(t,e){return e})}),i.forEach(function(t){if(!l.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}),(e=i.map(function(o,s){var c=u.data_idConverter(o);return{id:c,id_org:o,values:t.map(function(t,e){var i,n,r=t[l.getXKey(o)],a=null===t[o]||isNaN(t[o])?null:+t[o];return l.isCustomX()&amp;&amp;l.isCategorized()&amp;&amp;!v(r)?(0===s&amp;&amp;0===e&amp;&amp;(u.axis_x_categories=[]),-1===(i=u.axis_x_categories.indexOf(r))&amp;&amp;(i=u.axis_x_categories.length,u.axis_x_categories.push(r))):i=l.generateTargetX(r,o,e),(v(t[o])||l.data.xs[o].length&lt;=e)&amp;&amp;(i=void 0),n={x:i,value:a,id:c},l.isStanfordGraphType()&amp;&amp;(n.epochs=t[d]),n}).filter(function(t){return k(t.x)})}})).forEach(function(t){var e;u.data_xSort&amp;&amp;(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),e=0,t.values.forEach(function(t){t.index=e++}),l.data.xs[t.id].sort(function(t,e){return t-e})}),l.hasNegativeValue=l.hasNegativeValueInTargets(e),l.hasPositiveValue=l.hasPositiveValueInTargets(e),u.data_type&amp;&amp;l.setTargetType(l.mapToIds(e).filter(function(t){return!(t in u.data_types)}),u.data_type),e.forEach(function(t){l.addCache(t.id_org,t)}),e},l.prototype.isEpochs=function(t){var e=this.config;return e.data_epochs&amp;&amp;t===e.data_epochs},l.prototype.isX=function(t){var e,i,n,r=this.config;return r.data_x&amp;&amp;t===r.data_x||C(r.data_xs)&amp;&amp;(e=r.data_xs,i=t,n=!1,Object.keys(e).forEach(function(t){e[t]===i&amp;&amp;(n=!0)}),n)},l.prototype.isNotX=function(t){return!this.isX(t)},l.prototype.isNotXAndNotEpochs=function(t){return!this.isX(t)&amp;&amp;!this.isEpochs(t)},l.prototype.getXKey=function(t){var e=this.config;return e.data_x?e.data_x:C(e.data_xs)?e.data_xs[t]:null},l.prototype.getXValuesOfXKey=function(e,t){var i,n=this;return(t&amp;&amp;C(t)?n.mapToIds(t):[]).forEach(function(t){n.getXKey(t)===e&amp;&amp;(i=n.data.xs[t])}),i},l.prototype.getXValue=function(t,e){return t in this.data.xs&amp;&amp;this.data.xs[t]&amp;&amp;P(this.data.xs[t][e])?this.data.xs[t][e]:e},l.prototype.getOtherTargetXs=function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},l.prototype.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&amp;&amp;t&lt;e.length?e[t]:null},l.prototype.addXs=function(e){var i=this;Object.keys(e).forEach(function(t){i.config.data_xs[t]=e[t]})},l.prototype.addName=function(t){var e;return t&amp;&amp;(e=this.config.data_names[t.id],t.name=void 0!==e?e:t.id),t},l.prototype.getValueOnIndex=function(t,e){var i=t.filter(function(t){return t.index===e});return i.length?i[0]:null},l.prototype.updateTargetX=function(t,n){var r=this;t.forEach(function(i){i.values.forEach(function(t,e){t.x=r.generateTargetX(n[e],i.id,e)}),r.data.xs[i.id]=n})},l.prototype.updateTargetXs=function(t,e){var i=this;t.forEach(function(t){e[t.id]&amp;&amp;i.updateTargetX([t],e[t.id])})},l.prototype.generateTargetX=function(t,e,i){var n=this;return n.isTimeSeries()?t?n.parseDate(t):n.parseDate(n.getXValue(e,i)):n.isCustomX()&amp;&amp;!n.isCategorized()?P(t)?+t:n.getXValue(e,i):i},l.prototype.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},l.prototype.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(t){return t.values.length})},l.prototype.mapToIds=function(t){return t.map(function(t){return t.id})},l.prototype.mapToTargetIds=function(t){return t?[].concat(t):this.mapToIds(this.data.targets)},l.prototype.hasTarget=function(t,e){var i,n=this.mapToIds(t);for(i=0;i&lt;n.length;i++)if(n[i]===e)return!0;return!1},l.prototype.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)&lt;0},l.prototype.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)&lt;0},l.prototype.filterTargetsToShow=function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},l.prototype.mapTargetsToUniqueXs=function(t){var e=this.d3.set(this.d3.merge(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return(e=this.isTimeSeries()?e.map(function(t){return new Date(+t)}):e.map(function(t){return+t})).sort(function(t,e){return t&lt;e?-1:e&lt;t?1:e&lt;=t?0:NaN})},l.prototype.addHiddenTargetIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e&lt;t.length;e++)this.hiddenTargetIds.indexOf(t[e])&lt;0&amp;&amp;(this.hiddenTargetIds=this.hiddenTargetIds.concat(t[e]))},l.prototype.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)&lt;0})},l.prototype.addHiddenLegendIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e&lt;t.length;e++)this.hiddenLegendIds.indexOf(t[e])&lt;0&amp;&amp;(this.hiddenLegendIds=this.hiddenLegendIds.concat(t[e]))},l.prototype.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)&lt;0})},l.prototype.getValuesAsIdKeyed=function(t){var i={};return t.forEach(function(e){i[e.id]=[],e.values.forEach(function(t){i[e.id].push(t.value)})}),i},l.prototype.checkValueInTargets=function(t,e){var i,n,r,a=Object.keys(t);for(i=0;i&lt;a.length;i++)for(r=t[a[i]].values,n=0;n&lt;r.length;n++)if(e(r[n].value))return!0;return!1},l.prototype.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t&lt;0})},l.prototype.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return 0&lt;t})},l.prototype.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&amp;&amp;"desc"===t.data_order.toLowerCase()},l.prototype.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&amp;&amp;"asc"===t.data_order.toLowerCase()},l.prototype.getOrderFunction=function(){var t=this.config,r=this.isOrderAsc(),e=this.isOrderDesc();if(r||e){var a=function(t,e){return t+Math.abs(e.value)};return function(t,e){var i=t.values.reduce(a,0),n=e.values.reduce(a,0);return r?n-i:i-n}}if(h(t.data_order))return t.data_order;if(o(t.data_order)){var i=t.data_order;return function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}}},l.prototype.orderTargets=function(t){var e=this.getOrderFunction();return e&amp;&amp;t.sort(e),t},l.prototype.filterByX=function(t,e){return this.d3.merge(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},l.prototype.filterRemoveNull=function(t){return t.filter(function(t){return P(t.value)})},l.prototype.filterByXDomain=function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]&lt;=t.x&amp;&amp;t.x&lt;=e[1]})}})},l.prototype.hasDataLabel=function(){var t=this.config;return!("boolean"!=typeof t.data_labels||!t.data_labels)||!("object"!==s(t.data_labels)||!C(t.data_labels))},l.prototype.getDataLabelLength=function(t,e,i){var n=this,r=[0,0];return n.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return n.dataLabelFormat(t.id)(t)}).each(function(t,e){r[e]=1.3*this.getBoundingClientRect()[i]}).remove(),r},l.prototype.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},l.prototype.isArc=function(t){return"data"in t&amp;&amp;this.hasTarget(this.data.targets,t.data.id)},l.prototype.findClosestFromTargets=function(t,e){var i,n=this;return i=t.map(function(t){return n.findClosest(t.values,e)}),n.findClosest(i,e)},l.prototype.findClosest=function(t,i){var n,r=this,a=r.config.point_sensitivity;return t.filter(function(t){return t&amp;&amp;r.isBarType(t.id)}).forEach(function(t){var e=r.main.select("."+N.bars+r.getTargetSelectorSuffix(t.id)+" ."+N.bar+"-"+t.index).node();!n&amp;&amp;r.isWithinBar(r.d3.mouse(e),e)&amp;&amp;(n=t)}),t.filter(function(t){return t&amp;&amp;!r.isBarType(t.id)}).forEach(function(t){var e=r.config.tooltip_horizontal?r.horizontalDistance(t,i):r.dist(t,i);e&lt;a&amp;&amp;(a=e,n=t)}),n},l.prototype.dist=function(t,e){var i=this.config,n=i.axis_rotated?1:0,r=i.axis_rotated?0:1,a=this.circleY(t,t.index),o=this.x(t.x);return Math.sqrt(Math.pow(o-e[n],2)+Math.pow(a-e[r],2))},l.prototype.horizontalDistance=function(t,e){var i=this.config.axis_rotated?1:0,n=this.x(t.x);return Math.abs(n-e[i])},l.prototype.convertValuesToStep=function(t){var e,i=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;0&lt;e;e--)i[e]=i[e-1];return i[0]={x:i[0].x-1,value:i[0].value,id:i[0].id},i[t.length+1]={x:i[t.length].x+1,value:i[t.length].value,id:i[t.length].id},i},l.prototype.updateDataAttributes=function(t,e){var i=this.config["data_"+t];return void 0===e||(Object.keys(e).forEach(function(t){i[t]=e[t]}),this.redraw({withLegend:!0})),i},l.prototype.load=function(i,n){var r=this;i&amp;&amp;(n.filter&amp;&amp;(i=i.filter(n.filter)),(n.type||n.types)&amp;&amp;i.forEach(function(t){var e=n.types&amp;&amp;n.types[t.id]?n.types[t.id]:n.type;r.setTargetType(t.id,e)}),r.data.targets.forEach(function(t){for(var e=0;e&lt;i.length;e++)if(t.id===i[e].id){t.values=i[e].values,i.splice(e,1);break}}),r.data.targets=r.data.targets.concat(i)),r.updateTargets(r.data.targets),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.done&amp;&amp;n.done()},l.prototype.loadFromArgs=function(e){var i=this;e.data?i.load(i.convertDataToTargets(e.data),e):e.url?i.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(t){i.load(i.convertDataToTargets(t),e)}):e.json?i.load(i.convertDataToTargets(i.convertJsonToData(e.json,e.keys)),e):e.rows?i.load(i.convertDataToTargets(i.convertRowsToData(e.rows)),e):e.columns?i.load(i.convertDataToTargets(i.convertColumnsToData(e.columns)),e):i.load(null,e)},l.prototype.unload=function(t,e){var i=this;e||(e=function(){}),(t=t.filter(function(t){return i.hasTarget(i.data.targets,t)}))&amp;&amp;0!==t.length?(i.svg.selectAll(t.map(function(t){return i.selectorTarget(t)})).transition().style("opacity",0).remove().call(i.endall,e),t.forEach(function(e){i.withoutFadeIn[e]=!1,i.legend&amp;&amp;i.legend.selectAll("."+N.legendItem+i.getTargetSelectorSuffix(e)).remove(),i.data.targets=i.data.targets.filter(function(t){return t.id!==e})})):e()},l.prototype.getYDomainMin=function(t){var e,i,n,r,a,o,s=this,c=s.config,d=s.mapToIds(t),l=s.getValuesAsIdKeyed(t);if(0&lt;c.data_groups.length)for(o=s.hasNegativeValueInTargets(t),e=0;e&lt;c.data_groups.length;e++)if(0!==(r=c.data_groups[e].filter(function(t){return 0&lt;=d.indexOf(t)})).length)for(n=r[0],o&amp;&amp;l[n]&amp;&amp;l[n].forEach(function(t,e){l[n][e]=t&lt;0?t:0}),i=1;i&lt;r.length;i++)a=r[i],l[a]&amp;&amp;l[a].forEach(function(t,e){s.axis.getId(a)!==s.axis.getId(n)||!l[n]||o&amp;&amp;0&lt;+t||(l[n][e]+=+t)});return s.d3.min(Object.keys(l).map(function(t){return s.d3.min(l[t])}))},l.prototype.getYDomainMax=function(t){var e,i,n,r,a,o,s=this,c=s.config,d=s.mapToIds(t),l=s.getValuesAsIdKeyed(t);if(0&lt;c.data_groups.length)for(o=s.hasPositiveValueInTargets(t),e=0;e&lt;c.data_groups.length;e++)if(0!==(r=c.data_groups[e].filter(function(t){return 0&lt;=d.indexOf(t)})).length)for(n=r[0],o&amp;&amp;l[n]&amp;&amp;l[n].forEach(function(t,e){l[n][e]=0&lt;t?t:0}),i=1;i&lt;r.length;i++)a=r[i],l[a]&amp;&amp;l[a].forEach(function(t,e){s.axis.getId(a)!==s.axis.getId(n)||!l[n]||o&amp;&amp;+t&lt;0||(l[n][e]+=+t)});return s.d3.max(Object.keys(l).map(function(t){return s.d3.max(l[t])}))},l.prototype.getYDomain=function(t,e,i){var n,r,a,o,s,c,d,l,u,h,g=this,p=g.config,f=t.filter(function(t){return g.axis.getId(t.id)===e}),_=i?g.filterByXDomain(f,i):f,x="y2"===e?p.axis_y2_min:p.axis_y_min,y="y2"===e?p.axis_y2_max:p.axis_y_max,m=g.getYDomainMin(_),S=g.getYDomainMax(_),w="y2"===e?p.axis_y2_center:p.axis_y_center,v=g.hasType("bar",_)&amp;&amp;p.bar_zerobased||g.hasType("area",_)&amp;&amp;p.area_zerobased,b="y2"===e?p.axis_y2_inverted:p.axis_y_inverted,T=g.hasDataLabel()&amp;&amp;p.axis_rotated,A=g.hasDataLabel()&amp;&amp;!p.axis_rotated;return m=P(x)?x:P(y)?m&lt;y?m:y-10:m,S=P(y)?y:P(x)?x&lt;S?S:x+10:S,0===_.length?"y2"===e?g.y2.domain():g.y.domain():(isNaN(m)&amp;&amp;(m=0),isNaN(S)&amp;&amp;(S=m),m===S&amp;&amp;(m&lt;0?S=0:m=0),u=0&lt;=m&amp;&amp;0&lt;=S,h=m&lt;=0&amp;&amp;S&lt;=0,(P(x)&amp;&amp;u||P(y)&amp;&amp;h)&amp;&amp;(v=!1),v&amp;&amp;(u&amp;&amp;(m=0),h&amp;&amp;(S=0)),a=o=.1*(r=Math.abs(S-m)),void 0!==w&amp;&amp;(S=w+(s=Math.max(Math.abs(m),Math.abs(S))),m=w-s),T?(c=g.getDataLabelLength(m,S,"width"),d=R(g.y.range()),a+=r*((l=[c[0]/d,c[1]/d])[1]/(1-l[0]-l[1])),o+=r*(l[0]/(1-l[0]-l[1]))):A&amp;&amp;(c=g.getDataLabelLength(m,S,"height"),a+=g.axis.convertPixelsToAxisPadding(c[1],r),o+=g.axis.convertPixelsToAxisPadding(c[0],r)),"y"===e&amp;&amp;C(p.axis_y_padding)&amp;&amp;(a=g.axis.getPadding(p.axis_y_padding,"top",a,r),o=g.axis.getPadding(p.axis_y_padding,"bottom",o,r)),"y2"===e&amp;&amp;C(p.axis_y2_padding)&amp;&amp;(a=g.axis.getPadding(p.axis_y2_padding,"top",a,r),o=g.axis.getPadding(p.axis_y2_padding,"bottom",o,r)),v&amp;&amp;(u&amp;&amp;(o=m),h&amp;&amp;(a=-S)),n=[m-o,S+a],b?n.reverse():n)},l.prototype.getXDomainMin=function(t){var e=this,i=e.config;return k(i.axis_x_min)?e.isTimeSeries()?this.parseDate(i.axis_x_min):i.axis_x_min:e.d3.min(t,function(t){return e.d3.min(t.values,function(t){return t.x})})},l.prototype.getXDomainMax=function(t){var e=this,i=e.config;return k(i.axis_x_max)?e.isTimeSeries()?this.parseDate(i.axis_x_max):i.axis_x_max:e.d3.max(t,function(t){return e.d3.max(t.values,function(t){return t.x})})},l.prototype.getXDomainPadding=function(t){var e,i,n,r,a=this.config,o=t[1]-t[0];return i=this.isCategorized()?0:this.hasType("bar")?1&lt;(e=this.getMaxDataCount())?o/(e-1)/2:.5:.01*o,"object"===s(a.axis_x_padding)&amp;&amp;C(a.axis_x_padding)?(n=P(a.axis_x_padding.left)?a.axis_x_padding.left:i,r=P(a.axis_x_padding.right)?a.axis_x_padding.right:i):n=r="number"==typeof a.axis_x_padding?a.axis_x_padding:i,{left:n,right:r}},l.prototype.getXDomain=function(t){var e=this,i=[e.getXDomainMin(t),e.getXDomainMax(t)],n=i[0],r=i[1],a=e.getXDomainPadding(i),o=0,s=0;return n-r!=0||e.isCategorized()||(r=e.isTimeSeries()?(n=new Date(.5*n.getTime()),new Date(1.5*r.getTime())):(n=0===n?1:.5*n,0===r?-1:1.5*r)),(n||0===n)&amp;&amp;(o=e.isTimeSeries()?new Date(n.getTime()-a.left):n-a.left),(r||0===r)&amp;&amp;(s=e.isTimeSeries()?new Date(r.getTime()+a.right):r+a.right),[o,s]},l.prototype.updateXDomain=function(t,e,i,n,r){var a=this,o=a.config;return i&amp;&amp;(a.x.domain(r||a.d3.extent(a.getXDomain(t))),a.orgXDomain=a.x.domain(),o.zoom_enabled&amp;&amp;a.zoom.update(),a.subX.domain(a.x.domain()),a.brush&amp;&amp;a.brush.updateScale(a.subX)),e&amp;&amp;a.x.domain(r||(!a.brush||a.brush.empty()?a.orgXDomain:a.brush.selectionAsValue())),n&amp;&amp;a.x.domain(a.trimXDomain(a.x.orgDomain())),a.x.domain()},l.prototype.trimXDomain=function(t){var e=this.getZoomDomain(),i=e[0],n=e[1];return t[0]&lt;=i&amp;&amp;(t[1]=+t[1]+(i-t[0]),t[0]=i),n&lt;=t[1]&amp;&amp;(t[0]=+t[0]-(t[1]-n),t[1]=n),t},l.prototype.drag=function(t){var e,i,n,r,h,g,p,f,_=this,a=_.config,o=_.main,x=_.d3;_.hasArcType()||a.data_selection_enabled&amp;&amp;a.data_selection_multiple&amp;&amp;(e=_.dragStart[0],i=_.dragStart[1],n=t[0],r=t[1],h=Math.min(e,n),g=Math.max(e,n),p=a.data_selection_grouped?_.margin.top:Math.min(i,r),f=a.data_selection_grouped?_.height:Math.max(i,r),o.select("."+N.dragarea).attr("x",h).attr("y",p).attr("width",g-h).attr("height",f-p),o.selectAll("."+N.shapes).selectAll("."+N.shape).filter(function(t){return a.data_selection_isselectable(t)}).each(function(t,e){var i,n,r,a,o,s,c=x.select(this),d=c.classed(N.SELECTED),l=c.classed(N.INCLUDED),u=!1;if(c.classed(N.circle))i=1*c.attr("cx"),n=1*c.attr("cy"),o=_.togglePoint,u=h&lt;i&amp;&amp;i&lt;g&amp;&amp;p&lt;n&amp;&amp;n&lt;f;else{if(!c.classed(N.bar))return;i=(s=y(this)).x,n=s.y,r=s.width,a=s.height,o=_.togglePath,u=!(g&lt;i||i+r&lt;h||f&lt;n||n+a&lt;p)}u^l&amp;&amp;(c.classed(N.INCLUDED,!l),c.classed(N.SELECTED,!d),o.call(_,!d,c,t,e))}))},l.prototype.dragstart=function(t){var e=this,i=e.config;e.hasArcType()||i.data_selection_enabled&amp;&amp;(e.dragStart=t,e.main.select("."+N.chart).append("rect").attr("class",N.dragarea).style("opacity",.1),e.dragging=!0)},l.prototype.dragend=function(){var t=this,e=t.config;t.hasArcType()||e.data_selection_enabled&amp;&amp;(t.main.select("."+N.dragarea).transition().duration(100).style("opacity",0).remove(),t.main.selectAll("."+N.shape).classed(N.INCLUDED,!1),t.dragging=!1)},l.prototype.getYFormat=function(t){var n=this,r=t&amp;&amp;!n.hasType("gauge")?n.defaultArcValueFormat:n.yFormat,a=t&amp;&amp;!n.hasType("gauge")?n.defaultArcValueFormat:n.y2Format;return function(t,e,i){return("y2"===n.axis.getId(i)?a:r).call(n,t,e)}},l.prototype.yFormat=function(t){var e=this.config;return(e.axis_y_tick_format?e.axis_y_tick_format:this.defaultValueFormat)(t)},l.prototype.y2Format=function(t){var e=this.config;return(e.axis_y2_tick_format?e.axis_y2_tick_format:this.defaultValueFormat)(t)},l.prototype.defaultValueFormat=function(t){return P(t)?+t:""},l.prototype.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},l.prototype.dataLabelFormat=function(t){var e=this.config.data_labels,i=function(t){return P(t)?+t:""};return"function"==typeof e.format?e.format:"object"===s(e.format)?e.format[t]?!0===e.format[t]?i:e.format[t]:function(){return""}:i},l.prototype.initGrid=function(){var t=this,e=t.config,i=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",N.grid),e.grid_x_show&amp;&amp;t.grid.append("g").attr("class",N.xgrids),e.grid_y_show&amp;&amp;t.grid.append("g").attr("class",N.ygrids),e.grid_focus_show&amp;&amp;t.grid.append("g").attr("class",N.xgridFocus).append("line").attr("class",N.xgridFocus),t.xgrid=i.selectAll([]),e.grid_lines_front||t.initGridLines()},l.prototype.initGridLines=function(){var t=this,e=t.d3;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",N.grid+" "+N.gridLines),t.gridLines.append("g").attr("class",N.xgridLines),t.gridLines.append("g").attr("class",N.ygridLines),t.xgridLines=e.selectAll([])},l.prototype.updateXGrid=function(t){var e=this,i=e.config,n=e.d3,r=e.generateGridData(i.grid_x_type,e.x),a=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=i.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-a},y2:function(t){return e.x(t)-a}}:{x1:function(t){return e.x(t)+a},x2:function(t){return e.x(t)+a},y1:0,y2:e.height},e.xgridAttr.opacity=function(){return+n.select(this).attr(i.axis_rotated?"y1":"x1")===(i.axis_rotated?e.height:0)?0:1};var o=e.main.select("."+N.xgrids).selectAll("."+N.xgrid).data(r),s=o.enter().append("line").attr("class",N.xgrid).attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",0);e.xgrid=s.merge(o),t||e.xgrid.attr("x1",e.xgridAttr.x1).attr("x2",e.xgridAttr.x2).attr("y1",e.xgridAttr.y1).attr("y2",e.xgridAttr.y2).style("opacity",e.xgridAttr.opacity),o.exit().remove()},l.prototype.updateYGrid=function(){var t=this,e=t.config,i=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks),n=t.main.select("."+N.ygrids).selectAll("."+N.ygrid).data(i),r=n.enter().append("line").attr("class",N.ygrid);t.ygrid=r.merge(n),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),n.exit().remove(),t.smoothLines(t.ygrid,"grid")},l.prototype.gridTextAnchor=function(t){return t.position?t.position:"end"},l.prototype.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},l.prototype.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},l.prototype.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},l.prototype.updateGrid=function(t){var e,i,n,r,a=this,o=a.main,s=a.config,c=a.xv.bind(a),d=a.yv.bind(a),l=a.xGridTextX.bind(a),u=a.yGridTextX.bind(a);a.grid.style("visibility",a.hasArcType()?"hidden":"visible"),o.select("line."+N.xgridFocus).style("visibility","hidden"),s.grid_x_show&amp;&amp;a.updateXGrid(),(i=(e=o.select("."+N.xgridLines).selectAll("."+N.xgridLine).data(s.grid_x_lines)).enter().append("g").attr("class",function(t){return N.xgridLine+(t.class?" "+t.class:"")})).append("line").attr("x1",s.axis_rotated?0:c).attr("x2",s.axis_rotated?a.width:c).attr("y1",s.axis_rotated?c:0).attr("y2",s.axis_rotated?c:a.height).style("opacity",0),i.append("text").attr("text-anchor",a.gridTextAnchor).attr("transform",s.axis_rotated?"":"rotate(-90)").attr("x",s.axis_rotated?u:l).attr("y",c).attr("dx",a.gridTextDx).attr("dy",-5).style("opacity",0),a.xgridLines=i.merge(e),e.exit().transition().duration(t).style("opacity",0).remove(),s.grid_y_show&amp;&amp;a.updateYGrid(),(r=(n=o.select("."+N.ygridLines).selectAll("."+N.ygridLine).data(s.grid_y_lines)).enter().append("g").attr("class",function(t){return N.ygridLine+(t.class?" "+t.class:"")})).append("line").attr("x1",s.axis_rotated?d:0).attr("x2",s.axis_rotated?d:a.width).attr("y1",s.axis_rotated?0:d).attr("y2",s.axis_rotated?a.height:d).style("opacity",0),r.append("text").attr("text-anchor",a.gridTextAnchor).attr("transform",s.axis_rotated?"rotate(-90)":"").attr("x",s.axis_rotated?l:u).attr("y",d).attr("dx",a.gridTextDx).attr("dy",-5).style("opacity",0),a.ygridLines=r.merge(n),a.ygridLines.select("line").transition().duration(t).attr("x1",s.axis_rotated?d:0).attr("x2",s.axis_rotated?d:a.width).attr("y1",s.axis_rotated?0:d).attr("y2",s.axis_rotated?a.height:d).style("opacity",1),a.ygridLines.select("text").transition().duration(t).attr("x",s.axis_rotated?a.xGridTextX.bind(a):a.yGridTextX.bind(a)).attr("y",d).text(function(t){return t.text}).style("opacity",1),n.exit().transition().duration(t).style("opacity",0).remove()},l.prototype.redrawGrid=function(t,e){var i=this,n=i.config,r=i.xv.bind(i),a=i.xgridLines.select("line"),o=i.xgridLines.select("text");return[(t?a.transition(e):a).attr("x1",n.axis_rotated?0:r).attr("x2",n.axis_rotated?i.width:r).attr("y1",n.axis_rotated?r:0).attr("y2",n.axis_rotated?r:i.height).style("opacity",1),(t?o.transition(e):o).attr("x",n.axis_rotated?i.yGridTextX.bind(i):i.xGridTextX.bind(i)).attr("y",r).text(function(t){return t.text}).style("opacity",1)]},l.prototype.showXGridFocus=function(t){var e=this,i=e.config,n=t.filter(function(t){return t&amp;&amp;P(t.value)}),r=e.main.selectAll("line."+N.xgridFocus),a=e.xx.bind(e);i.tooltip_show&amp;&amp;(e.hasType("scatter")||e.hasType("stanford")||e.hasArcType()||(r.style("visibility","visible").data([n[0]]).attr(i.axis_rotated?"y1":"x1",a).attr(i.axis_rotated?"y2":"x2",a),e.smoothLines(r,"grid")))},l.prototype.hideXGridFocus=function(){this.main.select("line."+N.xgridFocus).style("visibility","hidden")},l.prototype.updateXgridFocus=function(){var t=this.config;this.main.select("line."+N.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?this.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:this.height)},l.prototype.generateGridData=function(t,e){var i,n,r,a,o=[],s=this.main.select("."+N.axisX).selectAll(".tick").size();if("year"===t)for(n=(i=this.getXDomain())[0].getFullYear(),r=i[1].getFullYear(),a=n;a&lt;=r;a++)o.push(new Date(a+"-01-01 00:00:00"));else(o=e.ticks(10)).length&gt;s&amp;&amp;(o=o.filter(function(t){return(""+t).indexOf(".")&lt;0}));return o},l.prototype.getGridFilterToRemove=function(t){return t?function(e){var i=!1;return[].concat(t).forEach(function(t){("value"in t&amp;&amp;e.value===t.value||"class"in t&amp;&amp;e.class===t.class)&amp;&amp;(i=!0)}),i}:function(){return!0}},l.prototype.removeGridLines=function(t,e){var i=this.config,n=this.getGridFilterToRemove(t),r=function(t){return!n(t)},a=e?N.xgridLines:N.ygridLines,o=e?N.xgridLine:N.ygridLine;this.main.select("."+a).selectAll("."+o).filter(n).transition().duration(i.transition_duration).style("opacity",0).remove(),e?i.grid_x_lines=i.grid_x_lines.filter(r):i.grid_y_lines=i.grid_y_lines.filter(r)},l.prototype.initEventRect=function(){var t=this,e=t.config;t.main.select("."+N.chart).append("g").attr("class",N.eventRects).style("fill-opacity",0),t.eventRect=t.main.select("."+N.eventRects).append("rect").attr("class",N.eventRect),e.zoom_enabled&amp;&amp;t.zoom&amp;&amp;(t.eventRect.call(t.zoom).on("dblclick.zoom",null),e.zoom_initialRange&amp;&amp;t.eventRect.transition().duration(0).call(t.zoom.transform,t.zoomTransform(e.zoom_initialRange)))},l.prototype.redrawEventRect=function(){var t,e,r=this,a=r.d3,o=r.config;function s(){r.svg.select("."+N.eventRect).style("cursor",null),r.hideXGridFocus(),r.hideTooltip(),r.unexpandCircles(),r.unexpandBars()}t=r.width,e=r.height,r.main.select("."+N.eventRects).style("cursor",o.zoom_enabled?o.axis_rotated?"ns-resize":"ew-resize":null),r.eventRect.attr("x",0).attr("y",0).attr("width",t).attr("height",e).on("mouseout",o.interaction_enabled?function(){o&amp;&amp;(r.hasArcType()||s())}:null).on("mousemove",o.interaction_enabled?function(){var t,e,i,n;r.dragging||r.hasArcType(t)||(t=r.filterTargetsToShow(r.data.targets),e=a.mouse(this),i=r.findClosestFromTargets(t,e),!r.mouseover||i&amp;&amp;i.id===r.mouseover.id||(o.data_onmouseout.call(r.api,r.mouseover),r.mouseover=void 0),i?(n=(r.isScatterOrStanfordType(i)||!o.tooltip_grouped?[i]:r.filterByX(t,i.x)).map(function(t){return r.addName(t)}),r.showTooltip(n,this),o.point_focus_expand_enabled&amp;&amp;(r.unexpandCircles(),n.forEach(function(t){r.expandCircles(t.index,t.id,!1)})),r.expandBars(i.index,i.id,!0),r.showXGridFocus(n),(r.isBarType(i.id)||r.dist(i,e)&lt;o.point_sensitivity)&amp;&amp;(r.svg.select("."+N.eventRect).style("cursor","pointer"),r.mouseover||(o.data_onmouseover.call(r.api,i),r.mouseover=i))):s())}:null).on("click",o.interaction_enabled?function(){var t,e,i;r.hasArcType(t)||(t=r.filterTargetsToShow(r.data.targets),e=a.mouse(this),(i=r.findClosestFromTargets(t,e))&amp;&amp;(r.isBarType(i.id)||r.dist(i,e)&lt;o.point_sensitivity)&amp;&amp;(r.isScatterOrStanfordType(i)||!o.data_selection_grouped?[i]:r.filterByX(t,i.x)).forEach(function(t){r.main.selectAll("."+N.shapes+r.getTargetSelectorSuffix(t.id)).selectAll("."+N.shape+"-"+t.index).each(function(){(o.data_selection_grouped||r.isWithinShape(this,t))&amp;&amp;(r.toggleShape(this,t,t.index),o.data_onclick.call(r.api,t,this))})}))}:null).call(o.interaction_enabled&amp;&amp;o.data_selection_draggable&amp;&amp;r.drag?a.drag().on("drag",function(){r.drag(a.mouse(this))}).on("start",function(){r.dragstart(a.mouse(this))}).on("end",function(){r.dragend()}):function(){})},l.prototype.getMousePosition=function(t){return[this.x(t.x),this.getYScale(t.id)(t.value)]},l.prototype.dispatchEvent=function(t,e){var i="."+N.eventRect,n=this.main.select(i).node(),r=n.getBoundingClientRect(),a=r.left+(e?e[0]:0),o=r.top+(e?e[1]:0),s=document.createEvent("MouseEvents");s.initMouseEvent(t,!0,!0,window,0,a,o,a,o,!1,!1,!1,!1,0,null),n.dispatchEvent(s)},l.prototype.initLegend=function(){var t=this;if(t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),!t.config.legend_show)return t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets));t.updateLegendWithDefaults()},l.prototype.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},l.prototype.updateSizeForLegend=function(t,e){var i=this,n=i.config,r={top:i.isLegendTop?i.getCurrentPaddingTop()+n.legend_inset_y+5.5:i.currentHeight-t-i.getCurrentPaddingBottom()-n.legend_inset_y,left:i.isLegendLeft?i.getCurrentPaddingLeft()+n.legend_inset_x+.5:i.currentWidth-e-i.getCurrentPaddingRight()-n.legend_inset_x+.5};i.margin3={top:i.isLegendRight?0:i.isLegendInset?r.top:i.currentHeight-t,right:NaN,bottom:0,left:i.isLegendRight?i.currentWidth-e:i.isLegendInset?r.left:0}},l.prototype.transformLegend=function(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},l.prototype.updateLegendStep=function(t){this.legendStep=t},l.prototype.updateLegendItemWidth=function(t){this.legendItemWidth=t},l.prototype.updateLegendItemHeight=function(t){this.legendItemHeight=t},l.prototype.getLegendWidth=function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},l.prototype.getLegendHeight=function(){var t=this,e=0;return t.config.legend_show&amp;&amp;(e=t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1)),e},l.prototype.opacityForLegend=function(t){return t.classed(N.legendItemHidden)?null:1},l.prototype.opacityForUnfocusedLegend=function(t){return t.classed(N.legendItemHidden)?null:.3},l.prototype.toggleFocusLegend=function(e,t){var i=this;e=i.mapToTargetIds(e),i.legend.selectAll("."+N.legendItem).filter(function(t){return 0&lt;=e.indexOf(t)}).classed(N.legendItemFocused,t).transition().duration(100).style("opacity",function(){return(t?i.opacityForLegend:i.opacityForUnfocusedLegend).call(i,i.d3.select(this))})},l.prototype.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+N.legendItem).classed(N.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(e.select(this))})},l.prototype.showLegend=function(t){var e=this,i=e.config;i.legend_show||(i.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(e.d3.select(this))})},l.prototype.hideLegend=function(t){var e=this,i=e.config;i.legend_show&amp;&amp;u(t)&amp;&amp;(i.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},l.prototype.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},l.prototype.updateLegend=function(f,t,e){var i,n,r,a,o,s,c,d,l,u,h,g,p,_,x,y,m=this,S=m.config,w=4,v=10,b=0,T=0,A=10,P=S.legend_item_tile_width+5,C=0,L={},V={},G={},E=[0],O={},I=0;function R(t,e,i){var n,r,a,o,s=0===i,c=i===f.length-1,d=(a=t,o=e,m.legendItemTextBox[o]||(m.legendItemTextBox[o]=m.getTextRect(a.textContent,N.legendItem,a)),m.legendItemTextBox[o]),l=d.width+P+(!c||m.isLegendRight||m.isLegendInset?v:0)+S.legend_padding,u=d.height+w,h=m.isLegendRight||m.isLegendInset?u:l,g=m.isLegendRight||m.isLegendInset?m.getLegendHeight():m.getLegendWidth();function p(t,e){e||(n=(g-C-h)/2)&lt;A&amp;&amp;(n=(g-h)/2,C=0,I++),O[t]=I,E[I]=m.isLegendInset?10:n,L[t]=C,C+=h}s&amp;&amp;(T=b=I=C=0),!S.legend_show||m.isLegendToShow(e)?(V[e]=l,G[e]=u,(!b||b&lt;=l)&amp;&amp;(b=l),(!T||T&lt;=u)&amp;&amp;(T=u),r=m.isLegendRight||m.isLegendInset?T:b,S.legend_equally?(Object.keys(V).forEach(function(t){V[t]=b}),Object.keys(G).forEach(function(t){G[t]=T}),(n=(g-r*f.length)/2)&lt;A?(I=C=0,f.forEach(function(t){p(t)})):p(e,!0)):p(e)):V[e]=G[e]=O[e]=L[e]=0}f=f.filter(function(t){return!k(S.data_names[t])||null!==S.data_names[t]}),h=Y(t=t||{},"withTransition",!0),g=Y(t,"withTransitionForTransform",!0),m.isLegendInset&amp;&amp;(I=S.legend_inset_step?S.legend_inset_step:f.length,m.updateLegendStep(I)),a=m.isLegendRight?(i=function(t){return b*O[t]},function(t){return E[O[t]]+L[t]}):m.isLegendInset?(i=function(t){return b*O[t]+10},function(t){return E[O[t]]+L[t]}):(i=function(t){return E[O[t]]+L[t]},function(t){return T*O[t]}),n=function(t,e){return i(t,e)+4+S.legend_item_tile_width},o=function(t,e){return a(t,e)+9},r=function(t,e){return i(t,e)},s=function(t,e){return a(t,e)-5},c=function(t,e){return i(t,e)-2},d=function(t,e){return i(t,e)-2+S.legend_item_tile_width},l=function(t,e){return a(t,e)+4},(u=m.legend.selectAll("."+N.legendItem).data(f).enter().append("g").attr("class",function(t){return m.generateClass(N.legendItem,t)}).style("visibility",function(t){return m.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){S.legend_item_onclick?S.legend_item_onclick.call(m,t):m.d3.event.altKey?(m.api.hide(),m.api.show(t)):(m.api.toggle(t),m.isTargetToShow(t)?m.api.focus(t):m.api.revert())}).on("mouseover",function(t){S.legend_item_onmouseover?S.legend_item_onmouseover.call(m,t):(m.d3.select(this).classed(N.legendItemFocused,!0),!m.transiting&amp;&amp;m.isTargetToShow(t)&amp;&amp;m.api.focus(t))}).on("mouseout",function(t){S.legend_item_onmouseout?S.legend_item_onmouseout.call(m,t):(m.d3.select(this).classed(N.legendItemFocused,!1),m.api.revert())})).append("text").text(function(t){return k(S.data_names[t])?S.data_names[t]:t}).each(function(t,e){R(this,t,e)}).style("pointer-events","none").attr("x",m.isLegendRight||m.isLegendInset?n:-200).attr("y",m.isLegendRight||m.isLegendInset?-200:o),u.append("rect").attr("class",N.legendItemEvent).style("fill-opacity",0).attr("x",m.isLegendRight||m.isLegendInset?r:-200).attr("y",m.isLegendRight||m.isLegendInset?-200:s),u.append("line").attr("class",N.legendItemTile).style("stroke",m.color).style("pointer-events","none").attr("x1",m.isLegendRight||m.isLegendInset?c:-200).attr("y1",m.isLegendRight||m.isLegendInset?-200:l).attr("x2",m.isLegendRight||m.isLegendInset?d:-200).attr("y2",m.isLegendRight||m.isLegendInset?-200:l).attr("stroke-width",S.legend_item_tile_height),y=m.legend.select("."+N.legendBackground+" rect"),m.isLegendInset&amp;&amp;0&lt;b&amp;&amp;0===y.size()&amp;&amp;(y=m.legend.insert("g","."+N.legendItem).attr("class",N.legendBackground).append("rect")),p=m.legend.selectAll("text").data(f).text(function(t){return k(S.data_names[t])?S.data_names[t]:t}).each(function(t,e){R(this,t,e)}),(h?p.transition():p).attr("x",n).attr("y",o),_=m.legend.selectAll("rect."+N.legendItemEvent).data(f),(h?_.transition():_).attr("width",function(t){return V[t]}).attr("height",function(t){return G[t]}).attr("x",r).attr("y",s),x=m.legend.selectAll("line."+N.legendItemTile).data(f),(h?x.transition():x).style("stroke",m.levelColor?function(t){return m.levelColor(m.cache[t].values[0].value)}:m.color).attr("x1",c).attr("y1",l).attr("x2",d).attr("y2",l),y&amp;&amp;(h?y.transition():y).attr("height",m.getLegendHeight()-12).attr("width",b*(I+1)+10),m.legend.selectAll("."+N.legendItem).classed(N.legendItemHidden,function(t){return!m.isTargetToShow(t)}),m.updateLegendItemWidth(b),m.updateLegendItemHeight(T),m.updateLegendStep(I),m.updateSizes(),m.updateScales(),m.updateSvgSize(),m.transformAll(g,e),m.legendHasRendered=!0},l.prototype.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",N.regions)},l.prototype.updateRegion=function(t){var e=this,i=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible");var n=e.main.select("."+N.regions).selectAll("."+N.region).data(i.regions),r=n.enter().append("rect").attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)).style("fill-opacity",0);e.mainRegion=r.merge(n).attr("class",e.classRegion.bind(e)),n.exit().transition().duration(t).style("opacity",0).remove()},l.prototype.redrawRegion=function(t,e){var i=this,n=i.mainRegion;return[(t?n.transition(e):n).attr("x",i.regionX.bind(i)).attr("y",i.regionY.bind(i)).attr("width",i.regionWidth.bind(i)).attr("height",i.regionHeight.bind(i)).style("fill-opacity",function(t){return P(t.opacity)?t.opacity:.1})]},l.prototype.regionX=function(t){var e=this,i=e.config,n="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?i.axis_rotated&amp;&amp;"start"in t?n(t.start):0:i.axis_rotated?0:"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},l.prototype.regionY=function(t){var e=this,i=e.config,n="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?i.axis_rotated?0:"end"in t?n(t.end):0:i.axis_rotated&amp;&amp;"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0},l.prototype.regionWidth=function(t){var e,i=this,n=i.config,r=i.regionX(t),a="y"===t.axis?i.y:i.y2;return(e="y"===t.axis||"y2"===t.axis?n.axis_rotated&amp;&amp;"end"in t?a(t.end):i.width:n.axis_rotated?i.width:"end"in t?i.x(i.isTimeSeries()?i.parseDate(t.end):t.end):i.width)&lt;r?0:e-r},l.prototype.regionHeight=function(t){var e,i=this,n=i.config,r=this.regionY(t),a="y"===t.axis?i.y:i.y2;return(e="y"===t.axis||"y2"===t.axis?n.axis_rotated?i.height:"start"in t?a(t.start):i.height:n.axis_rotated&amp;&amp;"end"in t?i.x(i.isTimeSeries()?i.parseDate(t.end):t.end):i.height)&lt;r?0:e-r},l.prototype.isRegionOnX=function(t){return!t.axis||"x"===t.axis},l.prototype.getScale=function(t,e,i){return(i?this.d3.scaleTime():this.d3.scaleLinear()).range([t,e])},l.prototype.getX=function(t,e,i,n){var r,a=this.getScale(t,e,this.isTimeSeries()),o=i?a.domain(i):a;for(r in a=this.isCategorized()?(n=n||function(){return 0},function(t,e){var i=o(t)+n(t);return e?i:Math.ceil(i)}):function(t,e){var i=o(t);return e?i:Math.ceil(i)},o)a[r]=o[r];return a.orgDomain=function(){return o.domain()},this.isCategorized()&amp;&amp;(a.domain=function(t){return arguments.length?(o.domain(t),a):[(t=this.orgDomain())[0],t[1]+1]}),a},l.prototype.getY=function(t,e,i){var n=this.getScale(t,e,this.isTimeSeriesY());return i&amp;&amp;n.domain(i),n},l.prototype.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},l.prototype.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},l.prototype.updateScales=function(){var e=this,t=e.config,i=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,i?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,i?t.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,i?t.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,i?t.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,i?t.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,t.axis_y_tick_format,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,t.axis_y2_tick_format,e.y2AxisTickValues,t.axis_y2_tick_outer),i||e.brush&amp;&amp;e.brush.updateScale(e.subX),e.updateArc&amp;&amp;e.updateArc()},l.prototype.selectPoint=function(t,e,i){var n=this,r=n.config,a=(r.axis_rotated?n.circleY:n.circleX).bind(n),o=(r.axis_rotated?n.circleX:n.circleY).bind(n),s=n.pointSelectR.bind(n);r.data_onselected.call(n.api,e,t.node()),n.main.select("."+N.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+N.selectedCircle+"-"+i).data([e]).enter().append("circle").attr("class",function(){return n.generateClass(N.selectedCircle,i)}).attr("cx",a).attr("cy",o).attr("stroke",function(){return n.color(e)}).attr("r",function(t){return 1.4*n.pointSelectR(t)}).transition().duration(100).attr("r",s)},l.prototype.unselectPoint=function(t,e,i){this.config.data_onunselected.call(this.api,e,t.node()),this.main.select("."+N.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+N.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove()},l.prototype.togglePoint=function(t,e,i,n){t?this.selectPoint(e,i,n):this.unselectPoint(e,i,n)},l.prototype.selectPath=function(t,e){var i=this;i.config.data_onselected.call(i,e,t.node()),i.config.interaction_brighten&amp;&amp;t.transition().duration(100).style("fill",function(){return i.d3.rgb(i.color(e)).brighter(.75)})},l.prototype.unselectPath=function(t,e){var i=this;i.config.data_onunselected.call(i,e,t.node()),i.config.interaction_brighten&amp;&amp;t.transition().duration(100).style("fill",function(){return i.color(e)})},l.prototype.togglePath=function(t,e,i,n){t?this.selectPath(e,i,n):this.unselectPath(e,i,n)},l.prototype.getToggle=function(t,e){var i;return"circle"===t.nodeName?i=this.isStepType(e)?function(){}:this.togglePoint:"path"===t.nodeName&amp;&amp;(i=this.togglePath),i},l.prototype.toggleShape=function(t,e,i){var n=this,r=n.d3,a=n.config,o=r.select(t),s=o.classed(N.SELECTED),c=n.getToggle(t,e).bind(n);a.data_selection_enabled&amp;&amp;a.data_selection_isselectable(e)&amp;&amp;(a.data_selection_multiple||n.main.selectAll("."+N.shapes+(a.data_selection_grouped?n.getTargetSelectorSuffix(e.id):"")).selectAll("."+N.shape).each(function(t,e){var i=r.select(this);i.classed(N.SELECTED)&amp;&amp;c(!1,i.classed(N.SELECTED,!1),t,e)}),o.classed(N.SELECTED,!s),c(!s,o,e,i))},l.prototype.initBar=function(){this.main.select("."+N.chart).append("g").attr("class",N.chartBars)},l.prototype.updateTargetsForBar=function(t){var e=this,i=e.config,n=e.classChartBar.bind(e),r=e.classBars.bind(e),a=e.classFocus.bind(e);e.main.select("."+N.chartBars).selectAll("."+N.chartBar).data(t).attr("class",function(t){return n(t)+a(t)}).enter().append("g").attr("class",n).style("pointer-events","none").append("g").attr("class",r).style("cursor",function(t){return i.data_selection_isselectable(t)?"pointer":null})},l.prototype.updateBar=function(t){var e=this,i=e.barData.bind(e),n=e.classBar.bind(e),r=e.initialOpacity.bind(e),a=function(t){return e.color(t.id)},o=e.main.selectAll("."+N.bars).selectAll("."+N.bar).data(i),s=o.enter().append("path").attr("class",n).style("stroke",a).style("fill",a);e.mainBar=s.merge(o).style("opacity",r),o.exit().transition().duration(t).style("opacity",0)},l.prototype.redrawBar=function(t,e,i){return[(e?this.mainBar.transition(i):this.mainBar).attr("d",t).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},l.prototype.getBarW=function(t,e){var i=this.config,n="number"==typeof i.bar_width?i.bar_width:e?t.tickInterval()*i.bar_width_ratio/e:0;return i.bar_width_max&amp;&amp;n&gt;i.bar_width_max?i.bar_width_max:n},l.prototype.getBars=function(t,e){return(e?this.main.selectAll("."+N.bars+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+N.bar+(P(t)?"-"+t:""))},l.prototype.expandBars=function(t,e,i){i&amp;&amp;this.unexpandBars(),this.getBars(t,e).classed(N.EXPANDED,!0)},l.prototype.unexpandBars=function(t){this.getBars(t).classed(N.EXPANDED,!1)},l.prototype.generateDrawBar=function(t,e){var a=this.config,o=this.generateGetBarPoints(t,e);return function(t,e){var i=o(t,e),n=a.axis_rotated?1:0,r=a.axis_rotated?0:1;return"M "+i[0][n]+","+i[0][r]+" L"+i[1][n]+","+i[1][r]+" L"+i[2][n]+","+i[2][r]+" L"+i[3][n]+","+i[3][r]+" z"}},l.prototype.generateGetBarPoints=function(t,e){var o=this,i=e?o.subXAxis:o.xAxis,n=t.__max__+1,s=o.getBarW(i,n),c=o.getShapeX(s,n,t,!!e),d=o.getShapeY(!!e),l=o.getShapeOffset(o.isBarType,t,!!e),u=s*(o.config.bar_space/2),h=e?o.getSubYScale:o.getYScale;return function(t,e){var i=h.call(o,t.id)(0),n=l(t,e)||i,r=c(t),a=d(t);return o.config.axis_rotated&amp;&amp;(0&lt;t.value&amp;&amp;a&lt;i||t.value&lt;0&amp;&amp;i&lt;a)&amp;&amp;(a=i),[[r+u,n],[r+u,a-(i-n)],[r+s-u,a-(i-n)],[r+s-u,n]]}},l.prototype.isWithinBar=function(t,e){var i=e.getBoundingClientRect(),n=e.pathSegList.getItem(0),r=e.pathSegList.getItem(1),a=Math.min(n.x,r.x),o=Math.min(n.y,r.y),s=a+i.width+2,c=o+i.height+2,d=o-2;return a-2&lt;t[0]&amp;&amp;t[0]&lt;s&amp;&amp;d&lt;t[1]&amp;&amp;t[1]&lt;c},l.prototype.getShapeIndices=function(t){var e,i,n=this.config,r={},a=0;return this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(e=0;e&lt;n.data_groups.length;e++)if(!(n.data_groups[e].indexOf(t.id)&lt;0))for(i=0;i&lt;n.data_groups[e].length;i++)if(n.data_groups[e][i]in r){r[t.id]=r[n.data_groups[e][i]];break}v(r[t.id])&amp;&amp;(r[t.id]=a++)}),r.__max__=a-1,r},l.prototype.getShapeX=function(i,n,r,t){var a=t?this.subX:this.x;return function(t){var e=t.id in r?r[t.id]:0;return t.x||0===t.x?a(t.x)-i*(n/2-e):0}},l.prototype.getShapeY=function(e){var i=this;return function(t){return(e?i.getSubYScale(t.id):i.getYScale(t.id))(t.value)}},l.prototype.getShapeOffset=function(t,s,e){var c=this,d=c.orderTargets(c.filterTargetsToShow(c.data.targets.filter(t,c))),l=d.map(function(t){return t.id});return function(i,n){var r=e?c.getSubYScale(i.id):c.getYScale(i.id),a=r(0),o=a;return d.forEach(function(t){var e=c.isStepType(i)?c.convertValuesToStep(t.values):t.values;t.id!==i.id&amp;&amp;s[t.id]===s[i.id]&amp;&amp;l.indexOf(t.id)&lt;l.indexOf(i.id)&amp;&amp;(void 0!==e[n]&amp;&amp;+e[n].x==+i.x||(n=-1,e.forEach(function(t,e){t.x===i.x&amp;&amp;(n=e)})),n in e&amp;&amp;0&lt;=e[n].value*i.value&amp;&amp;(o+=r(e[n].value)-a))}),o}},l.prototype.isWithinShape=function(t,e){var i,n=this,r=n.d3.select(t);return n.isTargetToShow(e.id)?"circle"===t.nodeName?i=n.isStepType(e)?n.isWithinStep(t,n.getYScale(e.id)(e.value)):n.isWithinCircle(t,1.5*n.pointSelectR(e)):"path"===t.nodeName&amp;&amp;(i=!r.classed(N.bar)||n.isWithinBar(n.d3.mouse(t),t)):i=!1,i},l.prototype.getInterpolate=function(t){var e=this,i=e.d3,n={linear:i.curveLinear,"linear-closed":i.curveLinearClosed,basis:i.curveBasis,"basis-open":i.curveBasisOpen,"basis-closed":i.curveBasisClosed,bundle:i.curveBundle,cardinal:i.curveCardinal,"cardinal-open":i.curveCardinalOpen,"cardinal-closed":i.curveCardinalClosed,monotone:i.curveMonotoneX,step:i.curveStep,"step-before":i.curveStepBefore,"step-after":i.curveStepAfter};return e.isSplineType(t)?n[e.config.spline_interpolation_type]||n.cardinal:e.isStepType(t)?n[e.config.line_step_type]:n.linear},l.prototype.initLine=function(){this.main.select("."+N.chart).append("g").attr("class",N.chartLines)},l.prototype.updateTargetsForLine=function(t){var e,i=this,n=i.config,r=i.classChartLine.bind(i),a=i.classLines.bind(i),o=i.classAreas.bind(i),s=i.classCircles.bind(i),c=i.classFocus.bind(i);(e=i.main.select("."+N.chartLines).selectAll("."+N.chartLine).data(t).attr("class",function(t){return r(t)+c(t)}).enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none")).append("g").attr("class",a),e.append("g").attr("class",o),e.append("g").attr("class",function(t){return i.generateClass(N.selectedCircles,t.id)}),e.append("g").attr("class",s).style("cursor",function(t){return n.data_selection_isselectable(t)?"pointer":null}),t.forEach(function(e){i.main.selectAll("."+N.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+N.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},l.prototype.updateLine=function(t){var e=this,i=e.main.selectAll("."+N.lines).selectAll("."+N.line).data(e.lineData.bind(e)),n=i.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color);e.mainLine=n.merge(i).style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null),i.exit().transition().duration(t).style("opacity",0)},l.prototype.redrawLine=function(t,e,i){return[(e?this.mainLine.transition(i):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},l.prototype.generateDrawLine=function(t,o){var s=this,c=s.config,d=s.d3.line(),i=s.generateGetLinePoints(t,o),l=o?s.getSubYScale:s.getYScale,e=function(t){return(o?s.subxx:s.xx).call(s,t)},n=function(t,e){return 0&lt;c.data_groups.length?i(t,e)[0][1]:l.call(s,t.id)(t.value)};return d=c.axis_rotated?d.x(n).y(e):d.x(e).y(n),c.line_connectNull||(d=d.defined(function(t){return null!=t.value})),function(t){var e=c.line_connectNull?s.filterRemoveNull(t.values):t.values,i=o?s.subX:s.x,n=l.call(s,t.id),r=0,a=0;return(s.isLineType(t)?c.data_regions[t.id]?s.lineWithRegions(e,i,n,c.data_regions[t.id]):(s.isStepType(t)&amp;&amp;(e=s.convertValuesToStep(e)),d.curve(s.getInterpolate(t))(e)):(e[0]&amp;&amp;(r=i(e[0].x),a=n(e[0].value)),c.axis_rotated?"M "+a+" "+r:"M "+r+" "+a))||"M 0 0"}},l.prototype.generateGetLinePoints=function(t,e){var o=this,s=o.config,i=t.__max__+1,c=o.getShapeX(0,i,t,!!e),d=o.getShapeY(!!e),l=o.getShapeOffset(o.isLineType,t,!!e),u=e?o.getSubYScale:o.getYScale;return function(t,e){var i=u.call(o,t.id)(0),n=l(t,e)||i,r=c(t),a=d(t);return s.axis_rotated&amp;&amp;(0&lt;t.value&amp;&amp;a&lt;i||t.value&lt;0&amp;&amp;i&lt;a)&amp;&amp;(a=i),[[r,a-(i-n)],[r,a-(i-n)],[r,a-(i-n)],[r,a-(i-n)]]}},l.prototype.lineWithRegions=function(t,c,d,e){var i,n,r,a,l,o,s,u,h,g,p,f=this,_=f.config,x="M",y=f.isCategorized()?.5:0,m=[];function S(t,e){var i;for(i=0;i&lt;e.length;i++)if(e[i].start&lt;t&amp;&amp;t&lt;=e[i].end)return!0;return!1}if(k(e))for(i=0;i&lt;e.length;i++)m[i]={},v(e[i].start)?m[i].start=t[0].x:m[i].start=f.isTimeSeries()?f.parseDate(e[i].start):e[i].start,v(e[i].end)?m[i].end=t[t.length-1].x:m[i].end=f.isTimeSeries()?f.parseDate(e[i].end):e[i].end;function w(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}for(g=_.axis_rotated?function(t){return d(t.value)}:function(t){return c(t.x)},p=_.axis_rotated?function(t){return c(t.x)}:function(t){return d(t.value)},r=f.isTimeSeries()?function(t,e,i,n){var r=t.x.getTime(),a=e.x-t.x,o=new Date(r+a*i),s=new Date(r+a*(i+n));return w(_.axis_rotated?[[d(l(i)),c(o)],[d(l(i+n)),c(s)]]:[[c(o),d(l(i))],[c(s),d(l(i+n))]])}:function(t,e,i,n){return w(_.axis_rotated?[[d(l(i),!0),c(a(i))],[d(l(i+n),!0),c(a(i+n))]]:[[c(a(i),!0),d(l(i))],[c(a(i+n),!0),d(l(i+n))]])},i=0;i&lt;t.length;i++){if(v(m)||!S(t[i].x,m))x+=" "+g(t[i])+" "+p(t[i]);else for(a=f.getScale(t[i-1].x+y,t[i].x+y,f.isTimeSeries()),l=f.getScale(t[i-1].value,t[i].value),o=c(t[i].x)-c(t[i-1].x),s=d(t[i].value)-d(t[i-1].value),h=2*(u=2/Math.sqrt(Math.pow(o,2)+Math.pow(s,2))),n=u;n&lt;=1;n+=h)x+=r(t[i-1],t[i],n,u);t[i].x}return x},l.prototype.updateArea=function(t){var e=this,i=e.d3,n=e.main.selectAll("."+N.areas).selectAll("."+N.area).data(e.lineData.bind(e)),r=n.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+i.select(this).style("opacity"),0});e.mainArea=r.merge(n).style("opacity",e.orgAreaOpacity),n.exit().transition().duration(t).style("opacity",0)},l.prototype.redrawArea=function(t,e,i){return[(e?this.mainArea.transition(i):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},l.prototype.generateDrawArea=function(t,e){var r=this,a=r.config,o=r.d3.area(),i=r.generateGetAreaPoints(t,e),n=e?r.getSubYScale:r.getYScale,s=function(t){return(e?r.subxx:r.xx).call(r,t)},c=function(t,e){return 0&lt;a.data_groups.length?i(t,e)[0][1]:n.call(r,t.id)(r.getAreaBaseValue(t.id))},d=function(t,e){return 0&lt;a.data_groups.length?i(t,e)[1][1]:n.call(r,t.id)(t.value)};return o=a.axis_rotated?o.x0(c).x1(d).y(s):o.x(s).y0(a.area_above?0:c).y1(d),a.line_connectNull||(o=o.defined(function(t){return null!==t.value})),function(t){var e=a.line_connectNull?r.filterRemoveNull(t.values):t.values,i=0,n=0;return(r.isAreaType(t)?(r.isStepType(t)&amp;&amp;(e=r.convertValuesToStep(e)),o.curve(r.getInterpolate(t))(e)):(e[0]&amp;&amp;(i=r.x(e[0].x),n=r.getYScale(t.id)(e[0].value)),a.axis_rotated?"M "+n+" "+i:"M "+i+" "+n))||"M 0 0"}},l.prototype.getAreaBaseValue=function(){return 0},l.prototype.generateGetAreaPoints=function(t,e){var o=this,s=o.config,i=t.__max__+1,c=o.getShapeX(0,i,t,!!e),d=o.getShapeY(!!e),l=o.getShapeOffset(o.isAreaType,t,!!e),u=e?o.getSubYScale:o.getYScale;return function(t,e){var i=u.call(o,t.id)(0),n=l(t,e)||i,r=c(t),a=d(t);return s.axis_rotated&amp;&amp;(0&lt;t.value&amp;&amp;a&lt;i||t.value&lt;0&amp;&amp;i&lt;a)&amp;&amp;(a=i),[[r,n],[r,a-(i-n)],[r,a-(i-n)],[r,n]]}},l.prototype.updateCircle=function(t,e){var i=this,n=i.main.selectAll("."+N.circles).selectAll("."+N.circle).data(i.lineOrScatterOrStanfordData.bind(i)),r=n.enter().append("circle").attr("shape-rendering","crispEdges").attr("class",i.classCircle.bind(i)).attr("cx",t).attr("cy",e).attr("r",i.pointR.bind(i)).style("fill",i.isStanfordGraphType()?i.getStanfordPointColor.bind(i):i.color);i.mainCircle=r.merge(n).style("opacity",i.isStanfordGraphType()?1:i.initialOpacityForCircle.bind(i)),n.exit().style("opacity",0)},l.prototype.redrawCircle=function(t,e,i,n){var r=this,a=r.main.selectAll("."+N.selectedCircle);return[(i?r.mainCircle.transition(n):r.mainCircle).style("opacity",this.opacityForCircle.bind(r)).style("fill",r.isStanfordGraphType()?r.getStanfordPointColor.bind(r):r.color).attr("cx",t).attr("cy",e),(i?a.transition(n):a).attr("cx",t).attr("cy",e)]},l.prototype.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},l.prototype.updateCircleY=function(){var t,i,e=this;0&lt;e.config.data_groups.length?(t=e.getShapeIndices(e.isLineType),i=e.generateGetLinePoints(t),e.circleY=function(t,e){return i(t,e)[0][1]}):e.circleY=function(t){return e.getYScale(t.id)(t.value)}},l.prototype.getCircles=function(t,e){return(e?this.main.selectAll("."+N.circles+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+N.circle+(P(t)?"-"+t:""))},l.prototype.expandCircles=function(t,e,i){var n=this.pointExpandedR.bind(this);i&amp;&amp;this.unexpandCircles(),this.getCircles(t,e).classed(N.EXPANDED,!0).attr("r",n)},l.prototype.unexpandCircles=function(t){var e=this,i=e.pointR.bind(e);e.getCircles(t).filter(function(){return e.d3.select(this).classed(N.EXPANDED)}).classed(N.EXPANDED,!1).attr("r",i)},l.prototype.pointR=function(t){var e=this.config;return this.isStepType(t)?0:h(e.point_r)?e.point_r(t):e.point_r},l.prototype.pointExpandedR=function(t){var e=this.config;return e.point_focus_expand_enabled?h(e.point_focus_expand_r)?e.point_focus_expand_r(t):e.point_focus_expand_r?e.point_focus_expand_r:1.75*this.pointR(t):this.pointR(t)},l.prototype.pointSelectR=function(t){var e=this.config;return h(e.point_select_r)?e.point_select_r(t):e.point_select_r?e.point_select_r:4*this.pointR(t)},l.prototype.isWithinCircle=function(t,e){var i=this.d3,n=i.mouse(t),r=i.select(t),a=+r.attr("cx"),o=+r.attr("cy");return Math.sqrt(Math.pow(a-n[0],2)+Math.pow(o-n[1],2))&lt;e},l.prototype.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])&lt;30},l.prototype.getCurrentWidth=function(){var t=this.config;return t.size_width?t.size_width:this.getParentWidth()},l.prototype.getCurrentHeight=function(){var t=this.config,e=t.size_height?t.size_height:this.getParentHeight();return 0&lt;e?e:320/(this.hasType("gauge")&amp;&amp;!t.gauge_fullCircle?2:1)},l.prototype.getCurrentPaddingTop=function(){var t=this.config,e=P(t.padding_top)?t.padding_top:0;return this.title&amp;&amp;this.title.node()&amp;&amp;(e+=this.getTitlePadding()),e},l.prototype.getCurrentPaddingBottom=function(){var t=this.config;return P(t.padding_bottom)?t.padding_bottom:0},l.prototype.getCurrentPaddingLeft=function(t){var e=this.config;return P(e.padding_left)?e.padding_left:e.axis_rotated?!e.axis_x_show||e.axis_x_inner?1:Math.max(r(this.getAxisWidthByAxisId("x",t)),40):!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:r(this.getAxisWidthByAxisId("y",t))},l.prototype.getCurrentPaddingRight=function(){var t=this,e=t.config,i=0,n=t.isLegendRight?t.getLegendWidth()+20:0;return i=P(e.padding_right)?e.padding_right+1:e.axis_rotated?10+n:!e.axis_y2_show||e.axis_y2_inner?2+n+(t.axis.getY2AxisLabelPosition().isOuter?20:0):r(t.getAxisWidthByAxisId("y2"))+n,t.colorScale&amp;&amp;t.colorScale.node()&amp;&amp;(i+=t.getColorScalePadding()),i},l.prototype.getParentRectValue=function(e){for(var i,n=this.selectChart.node();n&amp;&amp;"BODY"!==n.tagName;){try{i=n.getBoundingClientRect()[e]}catch(t){"width"===e&amp;&amp;(i=n.offsetWidth)}if(i)break;n=n.parentNode}return i},l.prototype.getParentWidth=function(){return this.getParentRectValue("width")},l.prototype.getParentHeight=function(){var t=this.selectChart.style("height");return 0&lt;t.indexOf("px")?+t.replace("px",""):0},l.prototype.getSvgLeft=function(t){var e=this,i=e.config,n=i.axis_rotated||!i.axis_rotated&amp;&amp;!i.axis_y_inner,r=i.axis_rotated?N.axisX:N.axisY,a=e.main.select("."+r).node(),o=a&amp;&amp;n?a.getBoundingClientRect():{right:0},s=e.selectChart.node().getBoundingClientRect(),c=e.hasArcType(),d=o.right-s.left-(c?0:e.getCurrentPaddingLeft(t));return 0&lt;d?d:0},l.prototype.getAxisWidthByAxisId=function(t,e){var i=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(i.isInner?20:40)},l.prototype.getHorizontalAxisHeight=function(t){var e=this,i=e.config,n=30;return"x"!==t||i.axis_x_show?"x"===t&amp;&amp;i.axis_x_height?i.axis_x_height:"y"!==t||i.axis_y_show?"y2"!==t||i.axis_y2_show?("x"===t&amp;&amp;!i.axis_rotated&amp;&amp;i.axis_x_tick_rotate&amp;&amp;(n=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(i.axis_x_tick_rotate))/180)),"y"===t&amp;&amp;i.axis_rotated&amp;&amp;i.axis_y_tick_rotate&amp;&amp;(n=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(i.axis_y_tick_rotate))/180)),n+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):e.rotated_padding_top:!i.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},l.prototype.initBrush=function(t){var r=this,e=r.d3;return r.brush=(r.config.axis_rotated?e.brushY():e.brushX()).on("brush",function(){var t=e.event.sourceEvent;t&amp;&amp;"zoom"===t.type||r.redrawForBrush()}).on("end",function(){var t=e.event.sourceEvent;t&amp;&amp;"zoom"===t.type||r.brush.empty()&amp;&amp;t&amp;&amp;"end"!==t.type&amp;&amp;r.brush.clear()}),r.brush.updateExtent=function(){var t,e=this.scale.range();return t=r.config.axis_rotated?[[0,e[0]],[r.width2,e[1]]]:[[e[0],0],[e[1],r.height2]],this.extent(t),this},r.brush.updateScale=function(t){return this.scale=t,this},r.brush.update=function(t){this.updateScale(t||r.subX).updateExtent(),r.context.select("."+N.brush).call(this)},r.brush.clear=function(){r.context.select("."+N.brush).call(r.brush.move,null)},r.brush.selection=function(){return e.brushSelection(r.context.select("."+N.brush).node())},r.brush.selectionAsValue=function(t,e){var i,n;return t?(r.context&amp;&amp;(i=[this.scale(t[0]),this.scale(t[1])],n=r.context.select("."+N.brush),e&amp;&amp;(n=n.transition()),r.brush.move(n,i)),[]):(i=r.brush.selection()||[0,0],[this.scale.invert(i[0]),this.scale.invert(i[1])])},r.brush.empty=function(){var t=r.brush.selection();return!t||t[0]===t[1]},r.brush.updateScale(t)},l.prototype.initSubchart=function(){var t=this,e=t.config,i=t.context=t.svg.append("g").attr("transform",t.getTranslate("context")),n=e.subchart_show?"visible":"hidden";i.style("visibility",n),i.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",N.chart),i.select("."+N.chart).append("g").attr("class",N.chartBars),i.select("."+N.chart).append("g").attr("class",N.chartLines),i.append("g").attr("clip-path",t.clipPath).attr("class",N.brush),t.axes.subx=i.append("g").attr("class",N.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis)},l.prototype.initSubchartBrush=function(){this.initBrush(this.subX).updateExtent(),this.context.select("."+N.brush).call(this.brush)},l.prototype.updateTargetsForSubchart=function(t){var e,i,n,r,a=this,o=a.context,s=a.config,c=a.classChartBar.bind(a),d=a.classBars.bind(a),l=a.classChartLine.bind(a),u=a.classLines.bind(a),h=a.classAreas.bind(a);s.subchart_show&amp;&amp;((n=(r=o.select("."+N.chartBars).selectAll("."+N.chartBar).data(t)).enter().append("g").style("opacity",0)).merge(r).attr("class",c),n.append("g").attr("class",d),(e=(i=o.select("."+N.chartLines).selectAll("."+N.chartLine).data(t)).enter().append("g").style("opacity",0)).merge(i).attr("class",l),e.append("g").attr("class",u),e.append("g").attr("class",h),o.selectAll("."+N.brush+" rect").attr(s.axis_rotated?"width":"height",s.axis_rotated?a.width2:a.height2))},l.prototype.updateBarForSubchart=function(t){var e=this,i=e.context.selectAll("."+N.bars).selectAll("."+N.bar).data(e.barData.bind(e)),n=i.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color);i.exit().transition().duration(t).style("opacity",0).remove(),e.contextBar=n.merge(i).style("opacity",e.initialOpacity.bind(e))},l.prototype.redrawBarForSubchart=function(t,e,i){(e?this.contextBar.transition(Math.random().toString()).duration(i):this.contextBar).attr("d",t).style("opacity",1)},l.prototype.updateLineForSubchart=function(t){var e=this,i=e.context.selectAll("."+N.lines).selectAll("."+N.line).data(e.lineData.bind(e)),n=i.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color);i.exit().transition().duration(t).style("opacity",0).remove(),e.contextLine=n.merge(i).style("opacity",e.initialOpacity.bind(e))},l.prototype.redrawLineForSubchart=function(t,e,i){(e?this.contextLine.transition(Math.random().toString()).duration(i):this.contextLine).attr("d",t).style("opacity",1)},l.prototype.updateAreaForSubchart=function(t){var e=this,i=e.d3,n=e.context.selectAll("."+N.areas).selectAll("."+N.area).data(e.lineData.bind(e)),r=n.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+i.select(this).style("opacity"),0});n.exit().transition().duration(t).style("opacity",0).remove(),e.contextArea=r.merge(n).style("opacity",0)},l.prototype.redrawAreaForSubchart=function(t,e,i){(e?this.contextArea.transition(Math.random().toString()).duration(i):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},l.prototype.redrawSubchart=function(t,e,i,n,r,a,o){var s,c,d,l=this,u=l.d3,h=l.config;l.context.style("visibility",h.subchart_show?"visible":"hidden"),h.subchart_show&amp;&amp;(u.event&amp;&amp;"zoom"===u.event.type&amp;&amp;l.brush.selectionAsValue(l.x.orgDomain()),t&amp;&amp;(l.brush.empty()||l.brush.selectionAsValue(l.x.orgDomain()),s=l.generateDrawArea(r,!0),c=l.generateDrawBar(a,!0),d=l.generateDrawLine(o,!0),l.updateBarForSubchart(i),l.updateLineForSubchart(i),l.updateAreaForSubchart(i),l.redrawBarForSubchart(c,i,i),l.redrawLineForSubchart(d,i,i),l.redrawAreaForSubchart(s,i,i)))},l.prototype.redrawForBrush=function(){var t,e=this,i=e.x,n=e.d3;e.redraw({withTransition:!1,withY:e.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withEventRect:!1,withDimension:!1}),t=n.event.selection||e.brush.scale.range(),e.main.select("."+N.eventRect).call(e.zoom.transform,n.zoomIdentity.scale(e.width/(t[1]-t[0])).translate(-t[0],0)),e.config.subchart_onbrush.call(e.api,i.orgDomain())},l.prototype.transformContext=function(t,e){var i;e&amp;&amp;e.axisSubX?i=e.axisSubX:(i=this.context.select("."+N.axisX),t&amp;&amp;(i=i.transition())),this.context.attr("transform",this.getTranslate("context")),i.attr("transform",this.getTranslate("subx"))},l.prototype.getDefaultSelection=function(){var t=this,e=t.config,i=h(e.axis_x_selection)?e.axis_x_selection(t.getXDomain(t.data.targets)):e.axis_x_selection;return t.isTimeSeries()&amp;&amp;(i=[t.parseDate(i[0]),t.parseDate(i[1])]),i},l.prototype.initText=function(){this.main.select("."+N.chart).append("g").attr("class",N.chartTexts),this.mainText=this.d3.selectAll([])},l.prototype.updateTargetsForText=function(t){var e=this,i=e.classChartText.bind(e),n=e.classTexts.bind(e),r=e.classFocus.bind(e),a=e.main.select("."+N.chartTexts).selectAll("."+N.chartText).data(t),o=a.enter().append("g").attr("class",i).style("opacity",0).style("pointer-events","none");o.append("g").attr("class",n),o.merge(a).attr("class",function(t){return i(t)+r(t)})},l.prototype.updateText=function(t,e,i){var n=this,r=n.config,a=n.barOrLineData.bind(n),o=n.classText.bind(n),s=n.main.selectAll("."+N.texts).selectAll("."+N.text).data(a),c=s.enter().append("text").attr("class",o).attr("text-anchor",function(t){return r.axis_rotated?t.value&lt;0?"end":"start":"middle"}).style("stroke","none").attr("x",t).attr("y",e).style("fill",function(t){return n.color(t)}).style("fill-opacity",0);n.mainText=c.merge(s).text(function(t,e,i){return n.dataLabelFormat(t.id)(t.value,t.id,e,i)}),s.exit().transition().duration(i).style("fill-opacity",0).remove()},l.prototype.redrawText=function(t,e,i,n,r){return[(n?this.mainText.transition(r):this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",i?0:this.opacityForText.bind(this))]},l.prototype.getTextRect=function(t,e,i){var n,r=this.d3.select("body").append("div").classed("c3",!0),a=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),o=this.d3.select(i).style("font");return a.selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).style("font",o).text(t).each(function(){n=this.getBoundingClientRect()}),r.remove(),n},l.prototype.generateXYForText=function(t,e,i,n){var r=this,a=r.generateGetAreaPoints(t,!1),o=r.generateGetBarPoints(e,!1),s=r.generateGetLinePoints(i,!1),c=n?r.getXForText:r.getYForText;return function(t,e){var i=r.isAreaType(t)?a:r.isBarType(t)?o:s;return c.call(r,i(t,e),t,this)}},l.prototype.getXForText=function(t,e,i){var n,r,a=this,o=i.getBoundingClientRect();return n=a.config.axis_rotated?(r=a.isBarType(e)?4:6,t[2][1]+r*(e.value&lt;0?-1:1)):a.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&amp;&amp;(n&gt;a.width?n=a.width-o.width:n&lt;0&amp;&amp;(n=4)),n},l.prototype.getYForText=function(t,e,i){var n,r=this,a=i.getBoundingClientRect();return r.config.axis_rotated?n=(t[0][0]+t[2][0]+.6*a.height)/2:(n=t[2][1],e.value&lt;0||0===e.value&amp;&amp;!r.hasPositiveValue?(n+=a.height,r.isBarType(e)&amp;&amp;r.isSafari()?n-=3:!r.isBarType(e)&amp;&amp;r.isChrome()&amp;&amp;(n+=3)):n+=r.isBarType(e)?-3:-6),null!==e.value||r.config.axis_rotated||(n&lt;a.height?n=a.height:n&gt;this.height&amp;&amp;(n=this.height-4)),n},l.prototype.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},l.prototype.redrawTitle=function(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))},l.prototype.xForTitle=function(){var t=this,e=t.config,i=e.title_position||"left";return 0&lt;=i.indexOf("right")?t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-e.title_padding.right:0&lt;=i.indexOf("center")?(t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2:e.title_padding.left},l.prototype.yForTitle=function(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height},l.prototype.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},l.prototype.drawColorScale=function(){var t,e,i,n,r,a,o,s=this,c=s.d3,d=s.config,l=s.data.targets[0];if(t=isNaN(d.stanford_scaleWidth)?20:d.stanford_scaleWidth,5,t&lt;0)throw Error("Colorscale's barheight and barwidth must be greater than 0.");o=s.height-d.stanford_padding.bottom-d.stanford_padding.top,i=c.range(d.stanford_padding.bottom,o,5),a=c.scaleSequential(l.colors).domain([i[i.length-1],i[0]]),s.colorScale&amp;&amp;s.colorScale.remove(),s.colorScale=s.svg.append("g").attr("width",50).attr("height",o).attr("class",N.colorScale),s.colorScale.append("g").attr("transform","translate(0, ".concat(d.stanford_padding.top,")")).selectAll("bars").data(i).enter().append("rect").attr("y",function(t,e){return 5*e}).attr("x",0).attr("width",t).attr("height",5).attr("fill",function(t){return a(t)}),r=c.scaleLog().domain([l.minEpochs,l.maxEpochs]).range([i[0]+d.stanford_padding.top+i[i.length-1]+5-1,i[0]+d.stanford_padding.top]),n=c.axisRight(r),"pow10"===d.stanford_scaleFormat?n.tickValues([1,10,100,1e3,1e4,1e5,1e6,1e7]):h(d.stanford_scaleFormat)?n.tickFormat(d.stanford_scaleFormat):n.tickFormat(c.format("d")),h(d.stanford_scaleValues)&amp;&amp;n.tickValues(d.stanford_scaleValues(l.minEpochs,l.maxEpochs)),e=s.colorScale.append("g").attr("class","legend axis").attr("transform","translate(".concat(t,",0)")).call(n),"pow10"===d.stanford_scaleFormat&amp;&amp;e.selectAll(".tick text").text(null).filter(g).text(10).append("tspan").attr("dy","-.7em").text(function(t){return Math.round(Math.log(t)/Math.LN10)}),s.colorScale.attr("transform","translate(".concat(s.currentWidth-s.xForColorScale(),", 0)"))},l.prototype.xForColorScale=function(){return this.config.stanford_padding.right+this.colorScale.node().getBBox().width},l.prototype.getColorScalePadding=function(){return this.xForColorScale()+this.config.stanford_padding.left+20},l.prototype.isStanfordGraphType=function(){return"stanford"===this.config.data_type},l.prototype.initStanfordData=function(){var t,e,i,n=this.d3,r=this.config,a=this.data.targets[0];if(a.values.sort(x),t=a.values.map(function(t){return t.epochs}),i=isNaN(r.stanford_scaleMin)?n.min(t):r.stanford_scaleMin,(e=isNaN(r.stanford_scaleMax)?n.max(t):r.stanford_scaleMax)&lt;i)throw Error("Number of minEpochs has to be smaller than maxEpochs");a.colors=h(r.stanford_colors)?r.stanford_colors:n.interpolateHslLong(n.hsl(250,1,.5),n.hsl(0,1,.5)),a.colorscale=n.scaleSequentialLog(a.colors).domain([i,e]),a.minEpochs=i,a.maxEpochs=e},l.prototype.getStanfordPointColor=function(t){return this.data.targets[0].colorscale(t.epochs)},l.prototype.getCentroid=function(t){var e,i,n,r,a,o=p(t),s=0,c=0;for(e=0,i=t.length-1;e&lt;t.length;i=e,e+=1)r=t[e],a=t[i],n=r.x*a.y-a.x*r.y,s+=(r.x+a.x)*n,c+=(r.y+a.y)*n;return{x:s/(n=6*o),y:c/n}},l.prototype.getStanfordTooltipTitle=function(t){var e=this.axis.getLabelText("x"),i=this.axis.getLabelText("y");return"\n      &lt;tr&gt;&lt;th&gt;".concat(e?_(e):"x","&lt;/th&gt;&lt;th class='value'&gt;").concat(t.x,"&lt;/th&gt;&lt;/tr&gt;\n      &lt;tr&gt;&lt;th&gt;").concat(i?_(i):"y","&lt;/th&gt;&lt;th class='value'&gt;").concat(t.value,"&lt;/th&gt;&lt;/tr&gt;\n    ")},l.prototype.countEpochsInRegion=function(i){var t,e,n=this.data.targets[0];return t=n.values.reduce(function(t,e){return t+Number(e.epochs)},0),{value:e=n.values.reduce(function(t,e){return f(e,i)?t+Number(e.epochs):t},0),percentage:0!==e?(e/t*100).toFixed(1):0}};var p=function(t){var e,i,n,r,a=0;for(e=0,i=t.length-1;e&lt;t.length;i=e,e+=1)n=t[e],r=t[i],a+=n.x*r.y,a-=n.y*r.x;return a/=2},f=function(t,e){for(var i,n,r,a,o=t.x,s=t.value,c=!1,d=0,l=e.length-1;d&lt;e.length;l=d++)i=e[d].x,n=e[d].y,a=e[l].x,s&lt;n!=s&lt;(r=e[l].y)&amp;&amp;o&lt;(a-i)*(s-n)/(r-n)+i&amp;&amp;(c=!c);return c},x=function(t,e){return t.epochs&lt;e.epochs?-1:t.epochs&gt;e.epochs?1:0};return l.prototype.initStanfordElements=function(){var t=this;t.stanfordElements=t.main.select("."+N.chart).append("g").attr("class",N.stanfordElements),t.stanfordElements.append("g").attr("class",N.stanfordLines),t.stanfordElements.append("g").attr("class",N.stanfordTexts),t.stanfordElements.append("g").attr("class",N.stanfordRegions)},l.prototype.updateStanfordElements=function(t){var e,i,n,r,a,o,s=this,c=s.main,d=s.config,l=s.xvCustom.bind(s),u=s.yvCustom.bind(s),h=s.countEpochsInRegion.bind(s);(i=(e=c.select("."+N.stanfordLines).style("shape-rendering","geometricprecision").selectAll("."+N.stanfordLine).data(d.stanford_lines)).enter().append("g").attr("class",function(t){return N.stanfordLine+(t.class?" "+t.class:"")})).append("line").attr("x1",function(t){return d.axis_rotated?u(t,"value_y1"):l(t,"value_x1")}).attr("x2",function(t){return d.axis_rotated?u(t,"value_y2"):l(t,"value_x2")}).attr("y1",function(t){return d.axis_rotated?l(t,"value_x1"):u(t,"value_y1")}).attr("y2",function(t){return d.axis_rotated?l(t,"value_x2"):u(t,"value_y2")}).style("opacity",0),s.stanfordLines=i.merge(e),s.stanfordLines.select("line").transition().duration(t).attr("x1",function(t){return d.axis_rotated?u(t,"value_y1"):l(t,"value_x1")}).attr("x2",function(t){return d.axis_rotated?u(t,"value_y2"):l(t,"value_x2")}).attr("y1",function(t){return d.axis_rotated?l(t,"value_x1"):u(t,"value_y1")}).attr("y2",function(t){return d.axis_rotated?l(t,"value_x2"):u(t,"value_y2")}).style("opacity",1),e.exit().transition().duration(t).style("opacity",0).remove(),(o=(a=c.select("."+N.stanfordTexts).selectAll("."+N.stanfordText).data(d.stanford_texts)).enter().append("g").attr("class",function(t){return N.stanfordText+(t.class?" "+t.class:"")})).append("text").attr("x",function(t){return d.axis_rotated?u(t,"y"):l(t,"x")}).attr("y",function(t){return d.axis_rotated?l(t,"x"):u(t,"y")}).style("opacity",0),s.stanfordTexts=o.merge(a),s.stanfordTexts.select("text").transition().duration(t).attr("x",function(t){return d.axis_rotated?u(t,"y"):l(t,"x")}).attr("y",function(t){return d.axis_rotated?l(t,"x"):u(t,"y")}).text(function(t){return t.content}).style("opacity",1),a.exit().transition().duration(t).style("opacity",0).remove(),(r=(n=c.select("."+N.stanfordRegions).selectAll("."+N.stanfordRegion).data(d.stanford_regions)).enter().append("g").attr("class",function(t){return N.stanfordRegion+(t.class?" "+t.class:"")})).append("polygon").attr("points",function(t){return t.points.map(function(t){return[d.axis_rotated?u(t,"y"):l(t,"x"),d.axis_rotated?l(t,"x"):u(t,"y")].join(",")}).join(" ")}).style("opacity",0),r.append("text").attr("x",function(t){return s.getCentroid(t.points).x}).attr("y",function(t){return s.getCentroid(t.points).y}).style("opacity",0),s.stanfordRegions=r.merge(n),s.stanfordRegions.select("polygon").transition().duration(t).attr("points",function(t){return t.points.map(function(t){return[d.axis_rotated?u(t,"y"):l(t,"x"),d.axis_rotated?l(t,"x"):u(t,"y")].join(",")}).join(" ")}).style("opacity",function(t){return t.opacity?t.opacity:.2}),s.stanfordRegions.select("text").transition().duration(t).attr("x",function(t){return d.axis_rotated?u(s.getCentroid(t.points),"y"):l(s.getCentroid(t.points),"x")}).attr("y",function(t){return d.axis_rotated?l(s.getCentroid(t.points),"x"):u(s.getCentroid(t.points),"y")}).text(function(t){var e,i,n;return t.text?(s.isStanfordGraphType()&amp;&amp;(e=(n=h(t.points)).value,i=n.percentage),t.text(e,i)):""}).attr("text-anchor","middle").attr("dominant-baseline","middle").style("opacity",1),n.exit().transition().duration(t).style("opacity",0).remove()},l.prototype.initTooltip=function(){var t,e=this,i=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",N.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),i.tooltip_init_show){if(e.isTimeSeries()&amp;&amp;c(i.tooltip_init_x)){for(i.tooltip_init_x=e.parseDate(i.tooltip_init_x),t=0;t&lt;e.data.targets[0].values.length&amp;&amp;e.data.targets[0].values[t].x-i.tooltip_init_x!=0;t++);i.tooltip_init_x=t}e.tooltip.html(i.tooltip_contents.call(e,e.data.targets.map(function(t){return e.addName(t.values[i.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",i.tooltip_init_position.top).style("left",i.tooltip_init_position.left).style("display","block")}},l.prototype.getTooltipSortFunction=function(){var t=this,e=t.config;if(0!==e.data_groups.length&amp;&amp;void 0===e.tooltip_order){var i=t.orderTargets(t.data.targets).map(function(t){return t.id});return(t.isOrderAsc()||t.isOrderDesc())&amp;&amp;(i=i.reverse()),function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}}var n=e.tooltip_order;void 0===n&amp;&amp;(n=e.data_order);var r=function(t){return t?t.value:null};if(c(n)&amp;&amp;"asc"===n.toLowerCase())return function(t,e){return r(t)-r(e)};if(c(n)&amp;&amp;"desc"===n.toLowerCase())return function(t,e){return r(e)-r(t)};if(h(n)){var a=n;return void 0===e.tooltip_order&amp;&amp;(a=function(t,e){return n(t?{id:t.id,values:[t]}:null,e?{id:e.id,values:[e]}:null)}),a}return o(n)?function(t,e){return n.indexOf(t.id)-n.indexOf(e.id)}:void 0},l.prototype.getTooltipContent=function(t,e,i,n){var r,a,o,s,c,d,l=this,u=l.config,h=u.tooltip_format_title||e,g=u.tooltip_format_name||function(t){return t},p=u.tooltip_format_value||i,f=this.getTooltipSortFunction();for(f&amp;&amp;t.sort(f),a=0;a&lt;t.length;a++)if(t[a]&amp;&amp;(t[a].value||0===t[a].value)){if(l.isStanfordGraphType())r||(o=l.getStanfordTooltipTitle(t[a]),r="&lt;table class='"+l.CLASS.tooltip+"'&gt;"+o),d=l.getStanfordPointColor(t[a]),c=_(u.data_epochs),s=t[a].epochs;else if(r||(o=_(h?h(t[a].x,t[a].index):t[a].x),r="&lt;table class='"+l.CLASS.tooltip+"'&gt;"+(o||0===o?"&lt;tr&gt;&lt;th colspan='2'&gt;"+o+"&lt;/th&gt;&lt;/tr&gt;":"")),void 0!==(s=_(p(t[a].value,t[a].ratio,t[a].id,t[a].index,t)))){if(null===t[a].name)continue;c=_(g(t[a].name,t[a].ratio,t[a].id,t[a].index)),d=l.levelColor?l.levelColor(t[a].value):n(t[a].id)}void 0!==s&amp;&amp;(r+="&lt;tr class='"+l.CLASS.tooltipName+"-"+l.getTargetSelectorSuffix(t[a].id)+"'&gt;",r+="&lt;td class='name'&gt;&lt;span style='background-color:"+d+"'&gt;&lt;/span&gt;"+c+"&lt;/td&gt;",r+="&lt;td class='value'&gt;"+s+"&lt;/td&gt;",r+="&lt;/tr&gt;")}return r+"&lt;/table&gt;"},l.prototype.tooltipPosition=function(t,e,i,n){var r,a,o,s,c,d=this,l=d.config,u=d.d3,h=d.hasArcType(),g=u.mouse(n);return h?(a=(d.width-(d.isLegendRight?d.getLegendWidth():0))/2+g[0],s=(d.hasType("gauge")?d.height:d.height/2)+g[1]+20):(r=d.getSvgLeft(!0),s=l.axis_rotated?(o=(a=r+g[0]+100)+e,c=d.currentWidth-d.getCurrentPaddingRight(),d.x(t[0].x)+20):(o=(a=r+d.getCurrentPaddingLeft(!0)+d.x(t[0].x)+20)+e,c=r+d.currentWidth-d.getCurrentPaddingRight(),g[1]+15),c&lt;o&amp;&amp;(a-=o-c+20),s+i&gt;d.currentHeight&amp;&amp;(s-=i+30)),s&lt;0&amp;&amp;(s=0),{top:s,left:a}},l.prototype.showTooltip=function(t,e){var i,n,r,a=this,o=a.config,s=a.hasArcType(),c=t.filter(function(t){return t&amp;&amp;P(t.value)}),d=o.tooltip_position||l.prototype.tooltipPosition;0!==c.length&amp;&amp;o.tooltip_show&amp;&amp;(a.tooltip.html(o.tooltip_contents.call(a,t,a.axis.getXAxisTickFormat(),a.getYFormat(s),a.color)).style("display","block"),i=a.tooltip.property("offsetWidth"),n=a.tooltip.property("offsetHeight"),r=d.call(this,c,i,n,e),a.tooltip.style("top",r.top+"px").style("left",r.left+"px"))},l.prototype.hideTooltip=function(){this.tooltip.style("display","none")},l.prototype.setTargetType=function(t,e){var i=this,n=i.config;i.mapToTargetIds(t).forEach(function(t){i.withoutFadeIn[t]=e===n.data_types[t],n.data_types[t]=e}),t||(n.data_type=e)},l.prototype.hasType=function(i,t){var n=this.config.data_types,r=!1;return(t=t||this.data.targets)&amp;&amp;t.length?t.forEach(function(t){var e=n[t.id];(e&amp;&amp;0&lt;=e.indexOf(i)||!e&amp;&amp;"line"===i)&amp;&amp;(r=!0)}):Object.keys(n).length?Object.keys(n).forEach(function(t){n[t]===i&amp;&amp;(r=!0)}):r=this.config.data_type===i,r},l.prototype.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},l.prototype.isLineType=function(t){var e=this.config,i=c(t)?t:t.id;return!e.data_types[i]||0&lt;=["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[i])},l.prototype.isStepType=function(t){var e=c(t)?t:t.id;return 0&lt;=["step","area-step"].indexOf(this.config.data_types[e])},l.prototype.isSplineType=function(t){var e=c(t)?t:t.id;return 0&lt;=["spline","area-spline"].indexOf(this.config.data_types[e])},l.prototype.isAreaType=function(t){var e=c(t)?t:t.id;return 0&lt;=["area","area-spline","area-step"].indexOf(this.config.data_types[e])},l.prototype.isBarType=function(t){var e=c(t)?t:t.id;return"bar"===this.config.data_types[e]},l.prototype.isScatterType=function(t){var e=c(t)?t:t.id;return"scatter"===this.config.data_types[e]},l.prototype.isStanfordType=function(t){var e=c(t)?t:t.id;return"stanford"===this.config.data_types[e]},l.prototype.isScatterOrStanfordType=function(t){return this.isScatterType(t)||this.isStanfordType(t)},l.prototype.isPieType=function(t){var e=c(t)?t:t.id;return"pie"===this.config.data_types[e]},l.prototype.isGaugeType=function(t){var e=c(t)?t:t.id;return"gauge"===this.config.data_types[e]},l.prototype.isDonutType=function(t){var e=c(t)?t:t.id;return"donut"===this.config.data_types[e]},l.prototype.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},l.prototype.lineData=function(t){return this.isLineType(t)?[t]:[]},l.prototype.arcData=function(t){return this.isArcType(t.data)?[t]:[]},l.prototype.barData=function(t){return this.isBarType(t)?t.values:[]},l.prototype.lineOrScatterOrStanfordData=function(t){return this.isLineType(t)||this.isScatterType(t)||this.isStanfordType(t)?t.values:[]},l.prototype.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},l.prototype.isSafari=function(){var t=window.navigator.userAgent;return 0&lt;=t.indexOf("Safari")&amp;&amp;t.indexOf("Chrome")&lt;0},l.prototype.isChrome=function(){return 0&lt;=window.navigator.userAgent.indexOf("Chrome")},l.prototype.initZoom=function(){var e,i=this,n=i.d3,r=i.config;return i.zoom=n.zoom().on("start",function(){if("scroll"===r.zoom_type){var t=n.event.sourceEvent;t&amp;&amp;"brush"===t.type||(e=t,r.zoom_onzoomstart.call(i.api,t))}}).on("zoom",function(){if("scroll"===r.zoom_type){var t=n.event.sourceEvent;t&amp;&amp;"brush"===t.type||(i.redrawForZoom(),r.zoom_onzoom.call(i.api,i.x.orgDomain()))}}).on("end",function(){if("scroll"===r.zoom_type){var t=n.event.sourceEvent;t&amp;&amp;"brush"===t.type||t&amp;&amp;e.clientX===t.clientX&amp;&amp;e.clientY===t.clientY||r.zoom_onzoomend.call(i.api,i.x.orgDomain())}}),i.zoom.updateDomain=function(){return n.event&amp;&amp;n.event.transform&amp;&amp;i.x.domain(n.event.transform.rescaleX(i.subX).domain()),this},i.zoom.updateExtent=function(){return this.scaleExtent([1,1/0]).translateExtent([[0,0],[i.width,i.height]]).extent([[0,0],[i.width,i.height]]),this},i.zoom.update=function(){return this.updateExtent().updateDomain()},i.zoom.updateExtent()},l.prototype.zoomTransform=function(t){var e=[this.x(t[0]),this.x(t[1])];return this.d3.zoomIdentity.scale(this.width/(e[1]-e[0])).translate(-e[0],0)},l.prototype.initDragZoom=function(){var e=this,i=e.d3,n=e.config,t=e.context=e.svg,r=e.margin.left+20.5,a=e.margin.top+.5;if("drag"===n.zoom_type&amp;&amp;n.zoom_enabled){var o=function(t){return t&amp;&amp;t.map(function(t){return e.x.invert(t)})},s=e.dragZoomBrush=i.brushX().on("start",function(){e.api.unzoom(),e.svg.select("."+N.dragZoom).classed("disabled",!1),n.zoom_onzoomstart.call(e.api,i.event.sourceEvent)}).on("brush",function(){n.zoom_onzoom.call(e.api,o(i.event.selection))}).on("end",function(){if(null!=i.event.selection){var t=o(i.event.selection);n.zoom_disableDefaultBehavior||e.api.zoom(t),e.svg.select("."+N.dragZoom).classed("disabled",!0),n.zoom_onzoomend.call(e.api,t)}});t.append("g").classed(N.dragZoom,!0).attr("clip-path",e.clipPath).attr("transform","translate("+r+","+a+")").call(s)}},l.prototype.getZoomDomain=function(){var t=this.config,e=this.d3;return[e.min([this.orgXDomain[0],t.zoom_x_min]),e.max([this.orgXDomain[1],t.zoom_x_max])]},l.prototype.redrawForZoom=function(){var t=this,e=t.d3,i=t.config,n=t.zoom,r=t.x;i.zoom_enabled&amp;&amp;0!==t.filterTargetsToShow(t.data.targets).length&amp;&amp;(n.update(),i.zoom_disableDefaultBehavior||(t.isCategorized()&amp;&amp;r.orgDomain()[0]===t.orgXDomain[0]&amp;&amp;r.domain([t.orgXDomain[0]-1e-10,r.orgDomain()[1]]),t.redraw({withTransition:!1,withY:i.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),e.event.sourceEvent&amp;&amp;"mousemove"===e.event.sourceEvent.type&amp;&amp;(t.cancelClick=!0)))},t});;
(function($,Drupal,debounce){const cache={right:0,left:0,bottom:0,top:0};const cssVarPrefix='--drupal-displace-offset';const documentStyle=document.documentElement.style;const offsetKeys=Object.keys(cache);const offsetProps={};offsetKeys.forEach((edge)=&gt;{offsetProps[edge]={enumerable:true,get(){return cache[edge];},set(value){if(value!==cache[edge])documentStyle.setProperty(`${cssVarPrefix}-${edge}`,`${value}px`);cache[edge]=value;}};});const offsets=Object.seal(Object.defineProperties({},offsetProps));function getRawOffset(el,edge){const $el=$(el);const documentElement=document.documentElement;let displacement=0;const horizontal=edge==='left'||edge==='right';let placement=$el.offset()[horizontal?'left':'top'];placement-=window[`scroll${horizontal?'X':'Y'}`]||document.documentElement[`scroll${horizontal?'Left':'Top'}`]||0;switch(edge){case 'top':displacement=placement+$el.outerHeight();break;case 'left':displacement=placement+$el.outerWidth();break;case 'bottom':displacement=documentElement.clientHeight-placement;break;case 'right':displacement=documentElement.clientWidth-placement;break;default:displacement=0;}return displacement;}function calculateOffset(edge){let edgeOffset=0;const displacingElements=document.querySelectorAll(`[data-offset-${edge}]`);const n=displacingElements.length;for(let i=0;i&lt;n;i++){const el=displacingElements[i];if(el.style.display==='none')continue;let displacement=parseInt(el.getAttribute(`data-offset-${edge}`),10);if(isNaN(displacement))displacement=getRawOffset(el,edge);edgeOffset=Math.max(edgeOffset,displacement);}return edgeOffset;}function displace(broadcast=true){const newOffsets={};offsetKeys.forEach((edge)=&gt;{newOffsets[edge]=calculateOffset(edge);});offsetKeys.forEach((edge)=&gt;{offsets[edge]=newOffsets[edge];});if(broadcast)$(document).trigger('drupalViewportOffsetChange',offsets);return offsets;}Drupal.behaviors.drupalDisplace={attach(){if(this.displaceProcessed)return;this.displaceProcessed=true;$(window).on('resize.drupalDisplace',debounce(displace,200));}};Drupal.displace=displace;Object.defineProperty(Drupal.displace,'offsets',{value:offsets,writable:false});Drupal.displace.calculateOffset=calculateOffset;})(jQuery,Drupal,Drupal.debounce);;
(($,Drupal,{isTabbable})=&gt;{$.extend($.expr[':'],{tabbable(element){Drupal.deprecationError({message:'The :tabbable selector is deprecated in Drupal 9.2.0 and will be removed in Drupal 11.0.0. Use the core/tabbable library instead. See https://www.drupal.org/node/3183730'});return isTabbable(element);}});})(jQuery,Drupal,window.tabbable);;
(($)=&gt;{let cachedScrollbarWidth=null;const {max,abs}=Math;const regexHorizontal=/left|center|right/;const regexVertical=/top|center|bottom/;const regexOffset=/[+-]\d+(\.[\d]+)?%?/;const regexPosition=/^\w+/;const regexPercent=/%$/;const _position=$.fn.position;function getOffsets(offsets,width,height){return [parseFloat(offsets[0])*(regexPercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(regexPercent.test(offsets[1])?height/100:1)];}function parseCss(element,property){return parseInt(window.getComputedStyle(element)[property],10)||0;}function getDimensions(elem){const raw=elem[0];if(raw.nodeType===9)return {width:elem.width(),height:elem.height(),offset:{top:0,left:0}};if($.isWindow(raw))return {width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};if(raw.preventDefault)return {width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};return {width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}const collisions={fit:{left(position,data){const {within}=data;const withinOffset=within.isWindow?within.scrollLeft:within.offset.left;const outerWidth=within.width;const collisionPosLeft=position.left-data.collisionPosition.marginLeft;const overLeft=withinOffset-collisionPosLeft;const overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset;let newOverRight;if(data.collisionWidth&gt;outerWidth)if(overLeft&gt;0&amp;&amp;overRight&lt;=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else if(overRight&gt;0&amp;&amp;overLeft&lt;=0)position.left=withinOffset;else if(overLeft&gt;overRight)position.left=withinOffset+outerWidth-data.collisionWidth;else position.left=withinOffset;else if(overLeft&gt;0)position.left+=overLeft;else if(overRight&gt;0)position.left-=overRight;else position.left=max(position.left-collisionPosLeft,position.left);},top(position,data){const {within}=data;const withinOffset=within.isWindow?within.scrollTop:within.offset.top;const outerHeight=data.within.height;const collisionPosTop=position.top-data.collisionPosition.marginTop;const overTop=withinOffset-collisionPosTop;const overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset;let newOverBottom;if(data.collisionHeight&gt;outerHeight)if(overTop&gt;0&amp;&amp;overBottom&lt;=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else if(overBottom&gt;0&amp;&amp;overTop&lt;=0)position.top=withinOffset;else if(overTop&gt;overBottom)position.top=withinOffset+outerHeight-data.collisionHeight;else position.top=withinOffset;else if(overTop&gt;0)position.top+=overTop;else if(overBottom&gt;0)position.top-=overBottom;else position.top=max(position.top-collisionPosTop,position.top);}},flip:{left(position,data){const {within}=data;const withinOffset=within.offset.left+within.scrollLeft;const outerWidth=within.width;const offsetLeft=within.isWindow?within.scrollLeft:within.offset.left;const collisionPosLeft=position.left-data.collisionPosition.marginLeft;const overLeft=collisionPosLeft-offsetLeft;const overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft;const myOffset=data.my[0]==='left'?-data.elemWidth:data.my[0]==='right'?data.elemWidth:0;const atOffset=data.at[0]==='left'?data.targetWidth:data.at[0]==='right'?-data.targetWidth:0;const offset=-2*data.offset[0];let newOverRight;let newOverLeft;if(overLeft&lt;0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight&lt;0||newOverRight&lt;abs(overLeft))position.left+=myOffset+atOffset+offset;}else{if(overRight&gt;0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft&gt;0||abs(newOverLeft)&lt;overRight)position.left+=myOffset+atOffset+offset;}}},top(position,data){const {within}=data;const withinOffset=within.offset.top+within.scrollTop;const outerHeight=within.height;const offsetTop=within.isWindow?within.scrollTop:within.offset.top;const collisionPosTop=position.top-data.collisionPosition.marginTop;const overTop=collisionPosTop-offsetTop;const overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop;const top=data.my[1]==='top';const myOffset=top?-data.elemHeight:data.my[1]==='bottom'?data.elemHeight:0;const atOffset=data.at[1]==='top'?data.targetHeight:data.at[1]==='bottom'?-data.targetHeight:0;const offset=-2*data.offset[1];let newOverTop;let newOverBottom;if(overTop&lt;0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom&lt;0||newOverBottom&lt;abs(overTop))position.top+=myOffset+atOffset+offset;}else{if(overBottom&gt;0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop&gt;0||abs(newOverTop)&lt;overBottom)position.top+=myOffset+atOffset+offset;}}}},flipfit:{left(...args){collisions.flip.left.apply(this,args);collisions.fit.left.apply(this,args);},top(...args){collisions.flip.top.apply(this,args);collisions.fit.top.apply(this,args);}}};$.position={scrollbarWidth(){if(cachedScrollbarWidth!==undefined)return cachedScrollbarWidth;const div=$('&lt;div '+"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'&gt;"+"&lt;div style='height:100px;width:auto;'&gt;&lt;/div&gt;&lt;/div&gt;");const innerDiv=div.children()[0];$('body').append(div);const w1=innerDiv.offsetWidth;div[0].style.overflow='scroll';let w2=innerDiv.offsetWidth;if(w1===w2)w2=div[0].clientWidth;div.remove();cachedScrollbarWidth=w1-w2;return cachedScrollbarWidth;},getScrollInfo(within){const overflowX=within.isWindow||within.isDocument?'':window.getComputedStyle(within.element[0])['overflow-x'];const overflowY=within.isWindow||within.isDocument?'':window.getComputedStyle(within.element[0])['overflow-y'];const hasOverflowX=overflowX==='scroll'||(overflowX==='auto'&amp;&amp;within.width&lt;within.element[0].scrollWidth);const hasOverflowY=overflowY==='scroll'||(overflowY==='auto'&amp;&amp;within.height&lt;within.element[0].scrollHeight);return {width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo(element){const withinElement=$(element||window);const isWindow=$.isWindow(withinElement[0]);const isDocument=!!withinElement[0]&amp;&amp;withinElement[0].nodeType===9;const hasOffset=!isWindow&amp;&amp;!isDocument;return {element:withinElement,isWindow,isDocument,offset:hasOffset?$(element).offset():{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:withinElement.outerWidth(),height:withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);const within=$.position.getWithinInfo(options.within);const scrollInfo=$.position.getScrollInfo(within);const collision=(options.collision||'flip').split(' ');const offsets={};const target=typeof options.of==='string'?$(document).find(options.of):$(options.of);const dimensions=getDimensions(target);const targetWidth=dimensions.width;const targetHeight=dimensions.height;const targetOffset=dimensions.offset;if(target[0].preventDefault)options.at='left top';const basePosition=$.extend({},targetOffset);$.each(['my','at'],function(){let pos=(options[this]||'').split(' ');if(pos.length===1)pos=regexHorizontal.test(pos[0])?pos.concat(['center']):regexVertical.test(pos[0])?['center'].concat(pos):['center','center'];pos[0]=regexHorizontal.test(pos[0])?pos[0]:'center';pos[1]=regexVertical.test(pos[1])?pos[1]:'center';const horizontalOffset=regexOffset.exec(pos[0]);const verticalOffset=regexOffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[regexPosition.exec(pos[0])[0],regexPosition.exec(pos[1])[0]];});if(collision.length===1)collision[1]=collision[0];if(options.at[0]==='right')basePosition.left+=targetWidth;else{if(options.at[0]==='center')basePosition.left+=targetWidth/2;}if(options.at[1]==='bottom')basePosition.top+=targetHeight;else{if(options.at[1]==='center')basePosition.top+=targetHeight/2;}const atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){let using;const elem=$(this);const elemWidth=elem.outerWidth();const elemHeight=elem.outerHeight();const marginLeft=parseCss(this,'marginLeft');const marginTop=parseCss(this,'marginTop');const collisionWidth=elemWidth+marginLeft+parseCss(this,'marginRight')+scrollInfo.width;const collisionHeight=elemHeight+marginTop+parseCss(this,'marginBottom')+scrollInfo.height;const position=$.extend({},basePosition);const myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==='right')position.left-=elemWidth;else{if(options.my[0]==='center')position.left-=elemWidth/2;}if(options.my[1]==='bottom')position.top-=elemHeight;else{if(options.my[1]==='center')position.top-=elemHeight/2;}position.left+=myOffset[0];position.top+=myOffset[1];const collisionPosition={marginLeft,marginTop};$.each(['left','top'],function(i,dir){if(collisions[collision[i]])collisions[collision[i]][dir](position,{targetWidth,targetHeight,elemWidth,elemHeight,collisionPosition,collisionWidth,collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within,elem});});if(options.using)using=function(props){const left=targetOffset.left-position.left;const right=left+targetWidth-elemWidth;const top=targetOffset.top-position.top;const bottom=top+targetHeight-elemHeight;const feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right&lt;0?'left':left&gt;0?'right':'center',vertical:bottom&lt;0?'top':top&gt;0?'bottom':'middle'};if(targetWidth&lt;elemWidth&amp;&amp;abs(left+right)&lt;targetWidth)feedback.horizontal='center';if(targetHeight&lt;elemHeight&amp;&amp;abs(top+bottom)&lt;targetHeight)feedback.vertical='middle';if(max(abs(left),abs(right))&gt;max(abs(top),abs(bottom)))feedback.important='horizontal';else feedback.important='vertical';options.using.call(this,props,feedback);};elem.offset($.extend(position,{using}));});};if(!$.hasOwnProperty('ui'))$.ui={};$.ui.position=collisions;})(jQuery);;
(function($,Drupal,Bootstrap,Attributes){'use strict';var $document=$(document);Bootstrap.modalFindFocusableElement=function(modal){return modal.$dialogBody.find(':input,:button,.btn').not('.visually-hidden,.sr-only');};$document.on('shown.bs.modal',function(e){var $modal=$(e.target);var modal=$modal.data('bs.modal');var $ckeditor=$modal.find('[data-ckeditor5-id]');if($ckeditor.length)$('.ck-body-wrapper').appendTo($modal);if(modal&amp;&amp;modal.options.focusInput){var $focusable=Bootstrap.modalFindFocusableElement(modal);if($focusable&amp;&amp;$focusable[0]){var $input=$focusable.filter(':visible:first').focus();if(modal.options.selectText&amp;&amp;$input.is(':text'))$input[0].setSelectionRange(0,$input[0].value.length);}else{if(modal.$close.is(':visible'))modal.$close.focus();}}});Bootstrap.once('modal',function(settings){Bootstrap.replacePlugin('modal',function(){var BootstrapModal=this;Bootstrap.Modal=function(element,options){this.$body=$(document.body);this.$element=$(element);this.$dialog=this.$element.find('.modal-dialog');this.$header=this.$dialog.find('.modal-header');this.$title=this.$dialog.find('.modal-title');this.$close=this.$header.find('.close');this.$footer=this.$dialog.find('.modal-footer');this.$content=this.$dialog.find('.modal-content');this.$dialogBody=this.$dialog.find('.modal-body');this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;this.options=this.mapDialogOptions(options);};Bootstrap.Modal.DEFAULTS=$.extend({},BootstrapModal.DEFAULTS,{animation:!!settings.modal_animation,backdrop:settings.modal_backdrop==='static'?'static':!!settings.modal_backdrop,focusInput:!!settings.modal_focus_input,selectText:!!settings.modal_select_text,keyboard:!!settings.modal_keyboard,remote:null,show:!!settings.modal_show,size:settings.modal_size});Bootstrap.Modal.prototype=BootstrapModal.prototype;Bootstrap.Modal.prototype.destroy=function(){this.hide();Drupal.detachBehaviors(this.$element[0]);this.$element.removeData('bs.modal').remove();};Bootstrap.Modal.prototype.init=function(){if(this.options.remote)this.$content.load(this.options.remote,$.proxy(function(){this.$element.trigger('loaded.bs.modal');},this));};Bootstrap.Modal.prototype.mapDialogOptions=function(options){return options||{};};var Plugin=function(){var args=Array.prototype.slice.call(arguments);var method=args[0];var options=args[1]||{};var relatedTarget=args[2]||null;if($.isPlainObject(method)){relatedTarget=options||null;options=method;method=null;}var ret=void 0;this.each(function(){var $this=$(this);var data=$this.data('bs.modal');var initialize=false;var showMethods=['open','show','toggle'];if(!data&amp;&amp;method&amp;&amp;showMethods.indexOf(method)===-1)return;options=Bootstrap.normalizeObject($.extend({},Bootstrap.Modal.DEFAULTS,data&amp;&amp;data.options,$this.data(),options));delete options['bs.modal'];if(!data){$this.data('bs.modal',(data=new Bootstrap.Modal(this,options)));initialize=true;}if(initialize||(!method&amp;&amp;!args.length))data.init();if(method)if(typeof data[method]==='function')try{ret=data[method].apply(data,args.slice(1));}catch(e){Drupal.throwError(e);}else Bootstrap.unsupported('method',method);else{data.option(options);if(options.show&amp;&amp;!data.isShown)data.show(relatedTarget);}});return this.length===1&amp;&amp;ret!==void 0?ret:this;};Plugin.Constructor=Bootstrap.Modal;$document.off('click.bs.modal.data-api').on('click.bs.modal.data-api','[data-toggle="modal"]',function(e){var $this=$(this);var href=$this.attr('href');var target=$this.attr('data-target')||(href&amp;&amp;href.replace(/.*(?=#[^\s]+$)/,''));var $target=$document.find(target);var options=$target.data('bs.modal')?'toggle':$.extend({remote:!/#/.test(href)&amp;&amp;href},$target.data(),$this.data());if($this.is('a'))e.preventDefault();$target.one('show.bs.modal',function(showEvent){if(showEvent.isDefaultPrevented())return;$target.one('hidden.bs.modal',function(){$this.is(':visible')&amp;&amp;$this.trigger('focus');});});$target.modal(options,this);});return Plugin;});$.extend(Drupal.theme,{bootstrapModal:function(variables){var output='';var settings=drupalSettings.bootstrap||{};var defaults={attributes:{class:['modal'],tabindex:-1,role:'dialog'},body:'',closeButton:true,description:{attributes:{class:['help-block']},content:null,position:'before'},footer:'',id:'drupal-modal',size:settings.modal_size?settings.modal_size:'',title:{attributes:{class:['modal-title']},content:Drupal.t('Loading...'),html:false,tag:'h4'}};variables=$.extend(true,{},defaults,variables);var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id));if(settings.modal_animation)attributes.addClass('fade');output+='&lt;div'+attributes+'&gt;';output+=Drupal.theme('bootstrapModalDialog',_.omit(variables,'attributes'));output+='&lt;/div&gt;';return output;},bootstrapModalDialog:function(variables){var output='';var defaults={attributes:{class:['modal-dialog'],role:'document'},id:'drupal-modal'};variables=$.extend(true,{},defaults,variables);var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id+'--dialog'));if(variables.size)attributes.addClass(variables.size);output+='&lt;div'+attributes+'&gt;';output+=Drupal.theme('bootstrapModalContent',_.omit(variables,'attributes'));output+='&lt;/div&gt;';return output;},bootstrapModalContent:function(variables){var output='';var defaults={attributes:{class:['modal-content']},id:'drupal-modal'};variables=$.extend(true,{},defaults,variables);var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id+'--content'));output+='&lt;div'+attributes+'&gt;';variables=_.omit(variables,'attributes');output+=Drupal.theme('bootstrapModalHeader',variables);output+=Drupal.theme('bootstrapModalBody',variables);output+=Drupal.theme('bootstrapModalFooter',variables);output+='&lt;/div&gt;';return output;},bootstrapModalBody:function(variables){var output='';var defaults={attributes:{class:['modal-body']},body:'',description:{attributes:{class:['help-block']},content:null,position:'before'},id:'drupal-modal'};variables=$.extend(true,{},defaults,variables);var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id+'--body'));output+='&lt;div'+attributes+'&gt;';if(typeof variables.description==='string')variables.description=$.extend({},defaults.description,{content:variables.description});var description=variables.description;description.attributes=Attributes.create(defaults.description.attributes).merge(description.attributes);if(description.content&amp;&amp;description.position==='invisible')description.attributes.addClass('sr-only');if(description.content&amp;&amp;description.position==='before')output+='&lt;p'+description.attributes+'&gt;'+description.content+'&lt;/p&gt;';output+=variables.body;if(description.content&amp;&amp;(description.position==='after'||description.position==='invisible'))output+='&lt;p'+description.attributes+'&gt;'+description.content+'&lt;/p&gt;';output+='&lt;/div&gt;';return output;},bootstrapModalClose:function(variables){var defaults={attributes:{'aria-label':Drupal.t('Close'),class:['close'],'data-dismiss':'modal',type:'button'}};variables=$.extend(true,{},defaults,variables);var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);return '&lt;button'+attributes+'&gt;&lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;';},bootstrapModalFooter:function(variables,force){var output='';var defaults={attributes:{class:['modal-footer']},footer:'',id:'drupal-modal'};variables=$.extend(true,{},defaults,variables);if(force||variables.footer){var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id+'--footer'));output+='&lt;div'+attributes+'&gt;';output+=variables.footer;output+='&lt;/div&gt;';}return output;},bootstrapModalHeader:function(variables){var output='';var defaults={attributes:{class:['modal-header']},closeButton:true,id:'drupal-modal',title:{attributes:{class:['modal-title']},content:Drupal.t('Loading...'),html:false,tag:'h4'}};variables=$.extend(true,{},defaults,variables);if(typeof variables.title==='string')variables.title=$.extend({},defaults.title,{content:variables.title});var title=Drupal.theme('bootstrapModalTitle',variables.title);if(title){var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id+'--header'));output+='&lt;div'+attributes+'&gt;';if(variables.closeButton)output+=Drupal.theme('bootstrapModalClose',_.omit(variables,'attributes'));output+=title;output+='&lt;/div&gt;';}return output;},bootstrapModalTitle:function(variables){var output='';var defaults={attributes:{class:['modal-title']},closeButton:true,id:'drupal-modal',content:Drupal.t('Loading...'),html:false,tag:'h4'};if(typeof variables==='string')variables=$.extend({},defaults,{content:title});variables=$.extend(true,{},defaults,variables);var attributes=Attributes.create(defaults.attributes).merge(variables.attributes);attributes.set('id',attributes.get('id',variables.id+'--title'));output+='&lt;'+Drupal.checkPlain(variables.tag)+Attributes.create(defaults.attributes).merge(variables.attributes)+'&gt;';if(variables.closeButton)output+=Drupal.theme('bootstrapModalClose',_.omit(variables,'attributes'));output+=(variables.html?variables.content:Drupal.checkPlain(variables.content));output+='&lt;/'+Drupal.checkPlain(variables.tag)+'&gt;';return output;}});});})(window.jQuery,window.Drupal,window.Drupal.bootstrap,window.Attributes);;
(function($,Drupal,Bootstrap,Attributes){Bootstrap.Dialog=Bootstrap.Dialog||{};Bootstrap.Dialog.handlers={};Bootstrap.Dialog.Handler=function(type,data){this.ctor=$.fn.modal;this.extend=null;this.plugin='modal';this.prefix='modal';this.themeHooks={modal:'bootstrapModal',dialog:'bootstrapModalDialog',header:'bootstrapModalHeader',title:'bootstrapModalTitle',close:'bootstrapModalClose',content:'bootstrapModalContent',body:'bootstrapModalBody',footer:'bootstrapModalFooter'};this.type=type;this.selectors={dialog:'.modal-dialog',header:'.modal-header',title:'.modal-title',close:'.close',content:'.modal-content',body:'.modal-body',footer:'.modal-footer',buttons:'.modal-buttons'};$.extend(this,data);if(this.extend)Bootstrap.extend(this.plugin,this.extend);};Bootstrap.Dialog.Handler.get=function(type){if(type instanceof $)type=type[0];if(type instanceof HTMLElement)type=type.dialogType;if(!type)type='modal';if(!Bootstrap.Dialog.handlers[type])Bootstrap.Dialog.handlers[type]=new Bootstrap.Dialog.Handler();return Bootstrap.Dialog.handlers[type];};Bootstrap.Dialog.Handler.register=function(type,data){Bootstrap.Dialog.handlers[type]=new Bootstrap.Dialog.Handler(type,data);};Bootstrap.Dialog.Handler.prototype.invoke=function(context){var args=Array.prototype.slice.call(arguments);return this.ctor.apply(context,args.slice(1));};Bootstrap.Dialog.Handler.prototype.theme=function(hook){var args=Array.prototype.slice.call(arguments);return $(Drupal.theme.apply(Drupal.theme,[this.themeHooks[hook]].concat(args.slice(1))));};Bootstrap.Dialog.Handler.prototype.ensureModalStructure=function(element,options){var $element=$(element);if($element.is('[data-drupal-theme="'+this.themeHooks.modal+'"]'))return;var attributes=Attributes.create(element).remove('style').set('data-drupal-theme',this.themeHooks.modal);if(options.$trigger&amp;&amp;options.$trigger[0]){var trigger=options.$trigger[0];var data={};for(var i=0,l=trigger.attributes.length;i&lt;l;i++){var name=trigger.attributes[i].name;if(name&amp;&amp;name.substring(0,5)==='data-')data[name]=trigger.getAttribute(name);}attributes.merge(data);}options=$.extend(true,{},options,{attributes});var $modal=this.theme('modal',options);var $body=$element.find(this.selectors.body);var $existing=$body[0]?$body.contents():$element.contents();$element.attr(Attributes.create($modal).toPlainObject());$element.append($modal.html());$element.find(this.selectors.body).append($existing);};})(jQuery,Drupal,Drupal.bootstrap,Attributes);;
(function($,Drupal,Bootstrap,Attributes,drupalSettings){'use strict';Bootstrap.once('modal.jquery.ui.bridge',function(settings){var rtl=document.documentElement.getAttribute('dir').toLowerCase()==='rtl';$(function(){drupalSettings.dialog.buttonClass='btn';drupalSettings.dialog.buttonPrimaryClass='btn-primary';});Bootstrap.Dialog.Bridge=function(options){var args=Array.prototype.slice.call(arguments);var $element=$(this);var type=options&amp;&amp;options.dialogType||$element[0].dialogType||'modal';$element[0].dialogType=type;var handler=Bootstrap.Dialog.Handler.get(type);if(args.length===1&amp;&amp;typeof options==='object'){this.each(function(){handler.ensureModalStructure(this,options);});return handler.invoke(this,{dialogOptions:options,jQueryUiBridge:true});}var ret;try{ret=handler.invoke.apply(handler,[this].concat(args));}catch(e){Bootstrap.warn(e);}return this.length===1&amp;&amp;ret!==void 0?ret:this;};Bootstrap.createPlugin('dialog',Bootstrap.Dialog.Bridge);Bootstrap.Modal.Bridge=function(){var Modal=this;return {DEFAULTS:{jQueryUiBridge:false},prototype:{close:function(){var _this=this;this.hide.apply(this,arguments);setTimeout(function(){if(!_this.isShown&amp;&amp;_this.$backdrop)_this.hideModal();},(Modal.TRANSITION_DURATION!==void 0?Modal.TRANSITION_DURATION:300)+10);},createButtons:function(){var handler=Bootstrap.Dialog.Handler.get(this.$element);this.$footer.find(handler.selectors.buttons).remove();var buttons=this.options.dialogOptions&amp;&amp;this.options.dialogOptions.buttons||[];if(!Array.isArray(buttons)){var array=[];for(var k in buttons)if(typeof buttons[k]==='function')array.push({label:k,click:buttons[k]});else if(buttons[k].text||buttons[k].label){Bootstrap.warn('Malformed jQuery UI dialog button: @key. The button object should be inside an array.',{'@key':k});array.push(buttons[k]);}else Bootstrap.unsupported('button',k,buttons[k]);buttons=array;}if(buttons.length){var $buttons=$('&lt;div class="modal-buttons"/&gt;').appendTo(this.$footer);for(var i=0,l=buttons.length;i&lt;l;i++){var button=buttons[i];var $button=$(Drupal.theme('bootstrapModalDialogButton',button));if(typeof button.create==='function')button.create.call($button[0]);if(typeof button.click==='function')$button.on('click',button.click.bind(this.$element));$buttons.append($button);}}this.$footer[this.$footer.children()[0]?'show':'hide']();},init:function(){var handler=Bootstrap.Dialog.Handler.get(this.$element);if(!this.$dialog)this.$dialog=this.$element.find(handler.selectors.dialog);this.$dialog.addClass('js-drupal-dialog');if(!this.$header)this.$header=this.$dialog.find(handler.selectors.header);if(!this.$title)this.$title=this.$dialog.find(handler.selectors.title);if(!this.$close)this.$close=this.$header.find(handler.selectors.close);if(!this.$footer)this.$footer=this.$dialog.find(handler.selectors.footer);if(!this.$content)this.$content=this.$dialog.find(handler.selectors.content);if(!this.$dialogBody)this.$dialogBody=this.$dialog.find(handler.selectors.body);if(this.options.jQueryUiBridge){this.$element.on('hide.bs.modal',Bootstrap.relayEvent(this.$element,'dialogbeforeclose',false));this.$element.on('hidden.bs.modal',Bootstrap.relayEvent(this.$element,'dialogclose',false));this.$element.on('show.bs.modal',Bootstrap.relayEvent(this.$element,'dialogcreate',false));this.$element.on('shown.bs.modal',Bootstrap.relayEvent(this.$element,'dialogopen',false));}if(!this.$footer[0])this.$footer=handler.theme('footer',{},true).insertAfter(this.$dialogBody);$.extend(true,this.options,this.mapDialogOptions(this.options));this.createButtons();this.super();if(this.options.dialogOptions&amp;&amp;this.options.dialogOptions.autoResize&amp;&amp;this.options.dialogOptions.position)this.position(this.options.dialogOptions.position);if(this.options.jQueryUiBridge&amp;&amp;this.options.show&amp;&amp;!this.isShown)this.show();},instance:function(){Bootstrap.unsupported('method','instance',arguments);},isOpen:function(){return !!this.isShown;},mapDialogOptions:function(options){var handler=Bootstrap.Dialog.Handler.get(this.$element);var mappedOptions={};var dialogOptions=options.dialogOptions||{};delete options.dialogOptions;for(var k in options)if(Modal.DEFAULTS.hasOwnProperty(k))mappedOptions[k]=options[k];else dialogOptions[k]=options[k];var cssUnitRegExp=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)?$/;var parseCssUnit=function(value,defaultUnit){var parts=(''+value).match(cssUnitRegExp);return parts&amp;&amp;parts[1]!==void 0?parts[1]+(parts[2]||defaultUnit||'px'):null;};var styles={};var cssProperties=['height','maxHeight','maxWidth','minHeight','minWidth','width'];for(var i=0,l=cssProperties.length;i&lt;l;i++){var prop=cssProperties[i];if(dialogOptions[prop]!==void 0){var value=parseCssUnit(dialogOptions[prop]);if(value){styles[prop]=value;if(dialogOptions.autoResize&amp;&amp;(prop==='height'||prop==='maxHeight')){styles.display='flex';styles.flexDirection='column';this.$dialogBody.css('overflow','scroll');}}}}this.$content.css(styles);var classesMap={'ui-dialog':'modal-content','ui-dialog-titlebar':'modal-header','ui-dialog-title':'modal-title','ui-dialog-titlebar-close':'close','ui-dialog-content':'modal-body','ui-dialog-buttonpane':'modal-footer'};if(dialogOptions.dialogClass){if(dialogOptions.classes===void 0)dialogOptions.classes={};if(dialogOptions.classes['ui-dialog']===void 0)dialogOptions.classes['ui-dialog']='';var dialogClass=dialogOptions.classes['ui-dialog'].split(' ');dialogClass.push(dialogOptions.dialogClass);dialogOptions.classes['ui-dialog']=dialogClass.join(' ');delete dialogOptions.dialogClass;}for(k in classesMap)this.$element.find('.'+classesMap[k]).addClass(k);var events=['beforeClose','close','create','drag','dragStart','dragStop','focus','open','resize','resizeStart','resizeStop'];for(i=0,l=events.length;i&lt;l;i++){var event=events[i].toLowerCase();if(dialogOptions[event]===void 0||typeof dialogOptions[event]!=='function')continue;this.$element.on('dialog'+event,dialogOptions[event]);}var title;if((dialogOptions.title===null||dialogOptions.title===void 0)&amp;&amp;(title=this.$element.attr('title')))dialogOptions.title=title;for(var name in dialogOptions){if(!dialogOptions.hasOwnProperty(name)||dialogOptions[name]===void 0)continue;switch(name){case 'appendTo':Bootstrap.unsupported('option',name,dialogOptions.appendTo);break;case 'autoOpen':mappedOptions.show=dialogOptions.show=!!dialogOptions.autoOpen;break;case 'classes':if(dialogOptions.classes)for(var key in dialogOptions.classes)if(dialogOptions.classes.hasOwnProperty(key)&amp;&amp;classesMap[key]!==void 0){var attributes=Attributes.create().addClass(dialogOptions.classes[key]).toPlainObject();var selector='.'+classesMap[key];this.$element.find(selector).addClass(attributes['class']);}break;case 'closeOnEscape':mappedOptions.keyboard=!!dialogOptions.closeOnEscape;if(!dialogOptions.closeOnEscape&amp;&amp;dialogOptions.modal)mappedOptions.backdrop='static';break;case 'closeText':Bootstrap.unsupported('option',name,dialogOptions.closeText);break;case 'draggable':this.$content.draggable({handle:handler.selectors.header,drag:Bootstrap.relayEvent(this.$element,'dialogdrag'),start:Bootstrap.relayEvent(this.$element,'dialogdragstart'),end:Bootstrap.relayEvent(this.$element,'dialogdragend')}).draggable(dialogOptions.draggable?'enable':'disable');break;case 'hide':if(dialogOptions.hide===false||dialogOptions.hide===true){this.$element[dialogOptions.hide?'addClass':'removeClass']('fade');mappedOptions.animation=dialogOptions.hide;}else Bootstrap.unsupported('option',name+' (complex animation)',dialogOptions.hide);break;case 'modal':if(!dialogOptions.closeOnEscape&amp;&amp;dialogOptions.modal)mappedOptions.backdrop='static';else mappedOptions.backdrop=dialogOptions.modal;if(!dialogOptions.modal&amp;&amp;!dialogOptions.position)this.position({my:'center',of:window});break;case 'position':this.position(dialogOptions.position);break;case 'resizable':this.$content.resizable({resize:Bootstrap.relayEvent(this.$element,'dialogresize'),start:Bootstrap.relayEvent(this.$element,'dialogresizestart'),end:Bootstrap.relayEvent(this.$element,'dialogresizeend')}).resizable(dialogOptions.resizable?'enable':'disable');break;case 'show':if(dialogOptions.show===false||dialogOptions.show===true){this.$element[dialogOptions.show?'addClass':'removeClass']('fade');mappedOptions.animation=dialogOptions.show;}else Bootstrap.unsupported('option',name+' (complex animation)',dialogOptions.show);break;case 'title':this.$title.text(dialogOptions.title);break;}}mappedOptions.dialogOptions=dialogOptions;return mappedOptions;},moveToTop:function(){Bootstrap.unsupported('method','moveToTop',arguments);},option:function(){var clone={options:{}};this.super.apply(clone,arguments);$.extend(true,this.options,this.mapDialogOptions(clone.options));this.createButtons();},position:function(position){this.$element.css({bottom:'initial',overflow:'visible',right:'initial'});this.$element.position(position);},open:function(){this.show.apply(this,arguments);},widget:function(){return this.$element;}}};};Bootstrap.extendPlugin('modal',Bootstrap.Modal.Bridge);Bootstrap.Dialog.Handler.register('dialog');Bootstrap.Dialog.Handler.register('modal');$.extend(Drupal.theme,{bootstrapModalDialogButton:function(button){var attributes=Attributes.create();var icon='';var iconPosition=button.iconPosition||'beginning';iconPosition=(iconPosition==='end'&amp;&amp;!rtl)||(iconPosition==='beginning'&amp;&amp;rtl)?'after':'before';if(button.bootstrapIcon)icon=Drupal.theme('icon','bootstrap',button.icon);else{if(button.icon){var iconAttributes=Attributes.create().addClass(['ui-icon',button.icon]).set('aria-hidden','true');icon='&lt;span'+iconAttributes+'&gt;&lt;/span&gt;';}}var value=button.label||button.text;if(icon&amp;&amp;((button.showLabel!==void 0&amp;&amp;!button.showLabel)||(button.text!==void 0&amp;&amp;!button.text)))value='&lt;span'+Attributes.create().addClass('sr-only')+'&gt;'+value+'&lt;/span&gt;';attributes.set('value',iconPosition==='before'?icon+value:value+icon);attributes[button.disabled?'set':'remove']('disabled','disabled');if(button.classes)attributes.addClass(Object.keys(button.classes).map(function(key){return button.classes[key];}));if(button['class'])attributes.addClass(button['class']);if(button.primary)attributes.addClass('btn-primary');return Drupal.theme('button',attributes);}});});})(window.jQuery,window.Drupal,window.Drupal.bootstrap,window.Attributes,window.drupalSettings);;
(function($,Drupal,drupalSettings,bodyScrollLock){drupalSettings.dialog={autoOpen:true,dialogClass:'',buttonClass:'button',buttonPrimaryClass:'button--primary',close(event){Drupal.dialog(event.target).close();Drupal.detachBehaviors(event.target,null,'unload');}};Drupal.dialog=function(element,options){let undef;const $element=$(element);const dialog={open:false,returnValue:undef};function openDialog(settings){settings=$.extend({},drupalSettings.dialog,options,settings);$(window).trigger('dialog:beforecreate',[dialog,$element,settings]);$element.dialog(settings);dialog.open=true;if(settings.modal)bodyScrollLock.lock($element.get(0));$(window).trigger('dialog:aftercreate',[dialog,$element,settings]);}function closeDialog(value){$(window).trigger('dialog:beforeclose',[dialog,$element]);bodyScrollLock.clearBodyLocks();$element.dialog('close');dialog.returnValue=value;dialog.open=false;$(window).trigger('dialog:afterclose',[dialog,$element]);}dialog.show=()=&gt;{openDialog({modal:false});};dialog.showModal=()=&gt;{openDialog({modal:true});};dialog.close=closeDialog;return dialog;};})(jQuery,Drupal,drupalSettings,bodyScrollLock);;
(function($,Drupal,drupalSettings,debounce,displace){drupalSettings.dialog=$.extend({autoResize:true,maxHeight:'95%'},drupalSettings.dialog);function resetPosition(options){const offsets=displace.offsets;const left=offsets.left-offsets.right;const top=offsets.top-offsets.bottom;const leftString=`${(left&gt;0?'+':'-')+Math.abs(Math.round(left/2))}px`;const topString=`${(top&gt;0?'+':'-')+Math.abs(Math.round(top/2))}px`;options.position={my:`center${left!==0?leftString:''} center${top!==0?topString:''}`,of:window};return options;}function resetSize(event){const positionOptions=['width','height','minWidth','minHeight','maxHeight','maxWidth','position'];let adjustedOptions={};let windowHeight=$(window).height();let option;let optionValue;let adjustedValue;for(let n=0;n&lt;positionOptions.length;n++){option=positionOptions[n];optionValue=event.data.settings[option];if(optionValue)if(typeof optionValue==='string'&amp;&amp;/%$/.test(optionValue)&amp;&amp;/height/i.test(option)){windowHeight-=displace.offsets.top+displace.offsets.bottom;adjustedValue=parseInt(0.01*parseInt(optionValue,10)*windowHeight,10);if(option==='height'&amp;&amp;event.data.$element.parent().outerHeight()&lt;adjustedValue)adjustedValue='auto';adjustedOptions[option]=adjustedValue;}}if(!event.data.settings.modal)adjustedOptions=resetPosition(adjustedOptions);event.data.$element.dialog('option',adjustedOptions).trigger('dialogContentResize');}$(window).on({'dialog:aftercreate':function(event,dialog,$element,settings){const autoResize=debounce(resetSize,20);const eventData={settings,$element};if(settings.autoResize===true||settings.autoResize==='true'){const uiDialog=$element.dialog('option',{resizable:false,draggable:false}).dialog('widget');uiDialog[0].style.position='fixed';$(window).on('resize.dialogResize scroll.dialogResize',eventData,autoResize).trigger('resize.dialogResize');$(document).on('drupalViewportOffsetChange.dialogResize',eventData,autoResize);}},'dialog:beforeclose':function(event,dialog,$element){$(window).off('.dialogResize');$(document).off('.dialogResize');}});})(jQuery,Drupal,drupalSettings,Drupal.debounce,Drupal.displace);;
(($)=&gt;{$.widget('ui.dialog',$.ui.dialog,{_allowInteraction(event){if(event.target.classList===undefined)return this._super(event);return event.target.classList.contains('ck')||this._super(event);}});})(jQuery);;
(function(Drupal){Drupal.VizChartHelper={};Drupal.VizChartHelper.isNumeric=function(input){return (input-0)==input&amp;&amp;(''+input).trim().length&gt;0;};Drupal.VizChartHelper.hexToClass=function(hex){const value=hex.split('#')[1];return 'color-'+value;};Drupal.VizChartHelper.hexToRGB=function(hex){const value=hex.split('#')[1];if(value.length!=6)throw "Only six-digit hex colors are allowed.";var aRgbHex=value.match(/.{1,2}/g);var aRgb=[parseInt(aRgbHex[0],16),parseInt(aRgbHex[1],16),parseInt(aRgbHex[2],16)];const style=`rgb(${aRgb})`;return style;};Drupal.VizChartHelper.generateAccessibleTable=function(categories,names,columns,numberFormat='decimal',tableName,tableLabel,orientation='left'){let fractionDigits=0;if(numberFormat=='percent')fractionDigits=1;const numberFormatter=new Intl.NumberFormat('en-US',{style:numberFormat,currency:'USD',minimumFractionDigits:fractionDigits,maximumFractionDigits:fractionDigits});const accessibleContent=[];const schoolYearLeft=()=&gt;{let heading=`&lt;tr&gt;&lt;td&gt;Year&lt;/td&gt;`;if(isNaN(categories[0]))heading=`&lt;tr&gt;&lt;td&gt;&lt;/td&gt;`;for(let i=0;i&lt;columns.length;i++){const name=names[columns[i][0]];heading+=`&lt;th scope="col"&gt;${name}&lt;/th&gt;`;if(i===columns.length)heading+=`&lt;/tr&gt;`;}accessibleContent.push(heading);const rows=[];for(let i=0;i&lt;categories.length;i++){let row=`&lt;tr&gt;&lt;th scope="row"&gt;${categories[i]}&lt;/th&gt;`;rows.push(row);}rows.forEach((row,i)=&gt;{columns.forEach((col,j)=&gt;{let value;if(numberFormat=='percent')value=col[i+1]/100;else value=col[i+1];row+=`&lt;td&gt;${!Drupal.VizChartHelper.isNumeric(value)?'N/A':numberFormatter.format(value)}&lt;/td&gt;`;});accessibleContent.push(row);});};const schoolYearTop=()=&gt;{let heading=`&lt;tr&gt;&lt;td&gt;&lt;/td&gt;`;for(let i=0;i&lt;categories.length;i++){let category=categories[i];heading+=`&lt;th scope="col"&gt;${category}&lt;/th&gt;`;if(i===categories.length)heading+=`&lt;/tr&gt;`;}accessibleContent.push(heading);for(let i=0;i&lt;columns.length;i++){const name=names[columns[i][0]];let row=`&lt;tr&gt;&lt;th scope="row"&gt;${name}&lt;/th&gt;`;for(let j=1;j&lt;columns[i].length;j++){let value;if(numberFormat=='percent')value=columns[i][j]/100;else value=columns[i][j];row+=`&lt;td&gt;${!Drupal.VizChartHelper.isNumeric(value)?'N/A':numberFormatter.format(value)}&lt;/td&gt;`;if(j===columns[i].length)row+=`&lt;/tr&gt;`;}accessibleContent.push(row);}};if(orientation==='left')schoolYearLeft();if(orientation!=='left')schoolYearTop();const table=document.createElement('table');table.classList.add('chart-accessible-table');table.classList.add('bottom-table');table.innerHTML+=tableLabel?`&lt;caption&gt;${tableLabel}&lt;/caption&gt; ${accessibleContent.join('')}`:`${accessibleContent.join('')}`;const tableWrapper=document.querySelector(`#${tableName}AccessibleContent`);if(tableWrapper){tableWrapper.classList.add('chart-accessible-table--wrapper');tableWrapper.id=`${tableName}TableWrapper`;tableWrapper.appendChild(table);return tableWrapper;}else{const tableRefreshWrapper=document.querySelector(`#${tableName}TableWrapper`);if(tableRefreshWrapper){tableRefreshWrapper.innerHTML='';tableRefreshWrapper.setAttribute('aria-live','polite');tableRefreshWrapper.appendChild(table);return tableRefreshWrapper;}}};Drupal.VizChartHelper.renderAccessibleTableDialog=function(accessibleTable,dialogTitle,tableName){const containerId=`${tableName}TableWrapper`;const tableLinkId=`${tableName}AccessibleContentLink`;const tableWrapper=`${tableName}TableWrapper`;const tableTitle=dialogTitle!==''?dialogTitle:tableName;const accessibleLinkContainer=document.getElementById(tableLinkId);if(accessibleLinkContainer!==null){accessibleLinkContainer.innerHTML=`&lt;a href="#${containerId}" class="js-accessible-content-link"&gt;${Drupal.t(`${tableTitle} Chart data in tables`)}&lt;/a&gt;`;document.querySelector(`#${tableLinkId}`).addEventListener('click',function(e){e.preventDefault();let tableContainer=document.querySelector(`#${tableWrapper}`);if(!tableContainer)tableContainer=document.querySelector(`#${tableName}AccessibleContent`);tableContainer.setAttribute('aria-live','polite');tableContainer?.focus();});}};Drupal.VizChartHelper.legendBox=function(element,color){let colorClass=Drupal.VizChartHelper.hexToClass(color);element.append('span').attr('class',`legend-box ${colorClass}`).append('svg').attr('width',10).attr('height',10).append("rect").attr("x",0).attr("y",0).attr("width",10).attr("height",10).attr("fill",color);return element;};Drupal.VizChartHelper.legendBoxHashed=function(element,color,hashedId){const svg=element.append('span').attr('class',`legend-box`).append('svg').attr('width',10).attr('height',10);const svgDefs=svg.append('defs');const pattern=svgDefs.append("pattern").attr("id",hashedId).attr("height",4).attr("width","10%").attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(45)");pattern.append("rect").attr("height",6).attr("width","100%").attr("fill",'#fff').attr("patternUnits","userSpaceOnUse");pattern.append("rect").attr("height",6).attr("width","100%").attr("y",2).attr("fill",color).attr("patternUnits","userSpaceOnUse");svg.append("rect").attr("x",0).attr("y",0).attr("width",10).attr("height",10).attr("fill",`url("#${hashedId}")`);return element;};})(Drupal);;
(function($){var checkReadyState=setInterval(()=&gt;{if(document.readyState==='complete'){clearInterval(checkReadyState);buildPerformanceLineGraph();}},100);function buildPerformanceLineGraph(){var program_id=$("article").attr("paramnum");var hdrTxtTemplate=$('#performance h4').text();var stateSelected=false;var width=330;var height=300;var currentHoveron="";var currentHoveronTitle="";var dnaSubject="";var isPrivProtected=false;var showMissingDataRange=false;var missing_data_ranges=[];var missingDataVizMessageRange=[];var missing_data_regions=[];var dashed_data_regions=[];var displayMissingDataIcon=false;var missing_data_x_pos=[];var missing_data_y_pos=[];var visualizationMessage="";var displayVizMsgInChart=false;var program="";var sbccallback=constructSBCRequest();update(sbccallback);function update(callback){var containerId="#performanceViz";$.getJSON(callback,function(dta){var api_v2_data=dta.api_v2.data;dta=api_v2_data.values;if($('#performanceRadios').is(':empty'))appendRadioButtons(dta);var chartObj=createJsonChartObj(dta,stateSelected);var chartType=(stateSelected!="undefined"&amp;&amp;stateSelected==true)?'area':'line';var xCategories='';if('xCategories' in api_v2_data)xCategories=api_v2_data.xCategories;if('program' in api_v2_data)program=api_v2_data.program;if('missingDataRange' in api_v2_data)missing_data_ranges=api_v2_data.missingDataRange;if('displayMissingDataIcon' in api_v2_data.options)displayMissingDataIcon=api_v2_data.options.displayMissingDataIcon;if('displayVizMsgInChart' in api_v2_data.options)displayVizMsgInChart=api_v2_data.options.displayVizMsgInChart;if('visualizationMessage' in api_v2_data.options)visualizationMessage=api_v2_data.options.visualizationMessage;if('missingDataVizMessageRange' in api_v2_data)missingDataVizMessageRange=api_v2_data.missingDataVizMessageRange;if('displayMissingDataIcon' in api_v2_data.options)displayMissingDataIcon=api_v2_data.options.displayMissingDataIcon;if('showMissingDataRange' in api_v2_data.options)showMissingDataRange=api_v2_data.options.showMissingDataRange;if(showMissingDataRange){dashed_data_regions.data1=[];dashed_data_regions.data2=[];api_v2_data.missingDataRange.forEach(function(range){var range_config={axis:'x',start:range-1,end:range,class:'missing-data-line-chart'};missing_data_regions.push(range_config);});}if('data' in chartObj){missing_data_x_pos=[];missing_data_y_pos=[];var chart=c3.generate({bindto:containerId,size:{width,height},axis:{x:{type:'category',tick:{rotate:75,multiline:false,culling:false,fit:true,format:function(d){return xCategories[d];}},height:50},y:{min:5,max:100,tick:{format:function(d){if(isNumeric(d))d=d.toFixed(0)+"%";return d;}},padding:{top:25,bottom:0}}},bar:{width:{ratio:0.8}},line:{connectNull:false},data:{columns:chartObj.data.values,regions:dashed_data_regions,names:chartObj.data.names[0],type:chartType,labels:{format:function(v,id,i,j){}},groups:[chartObj.data.groups],colors:chartObj.data.colors,color:function(color,d){return color;},onmouseover:function(d){var catId=d['x'];currentHoveronTitle=xCategories[catId];currentHoveron=d['id'];}},onrendered:function(){var labels=d3.select(this.config.bindto+" .c3-texts").selectAll(".c3-text");labels.each(function(label,i){if(Array.isArray(missing_data_ranges)&amp;&amp;!missing_data_ranges.length===false)if(missing_data_ranges.includes(i))if($(this)[0].attributes.x.value!=='undefined'){if(isNumeric($(this)[0].attributes.x.value))missing_data_x_pos.push(parseInt($(this)[0].attributes.x.value));if(isNumeric($(this)[0].attributes.y.value))missing_data_y_pos.push(parseInt($(this)[0].attributes.y.value));}});},regions:missing_data_regions,legend:{show:false},tooltip:{format:{value:function(d){if(isNumeric(d))d=d.toFixed(1)+"%";return d;}},position:function(data,width,height,thisElement){var containerWidth,element,tooltipWidth,x,y,windowWidth;element=document.getElementById("participationViz");containerWidth=element.clientWidth;tooltipWidth=element.querySelector('.c3-tooltip-container').clientWidth;windowWidth=$(window).width();x=parseInt(thisElement.getAttribute('x'));y=thisElement.getAttribute('y')-60;if(windowWidth&lt;700)x=containerWidth-tooltipWidth-width/1.05;else x=containerWidth+tooltipWidth-(width);return {top:y,left:x};},contents:function(d,defaultTitleFormat,defaultValueFormat,color){return generateCustomTooltip(d);}}});var C3svg=document.querySelector('#performanceViz svg');C3svg.setAttribute('width',width+20);if(!($("#performanceWrapper .legend")[0]))createLegend(chart,containerId);if(displayMissingDataIcon&amp;&amp;(missing_data_x_pos.length!==0&amp;&amp;missing_data_y_pos.length!==0))addMissingDataIcon();if(displayVizMsgInChart&amp;&amp;visualizationMessage!=='')if(Array.isArray(missing_data_ranges)&amp;&amp;!missing_data_ranges.length===false)d3.select("#performanceViz svg").append("foreignObject").attr("x",(width-170)).attr("y",5).attr("width",160).attr("height",50).append("xhtml:body").style("font","10px 'helvetica'").html(visualizationMessage);}});}function addMissingDataIcon(){var icon_width=24;var icon_height=24;missing_data_x_pos.forEach(function(x_pos,i){d3.select("#performanceViz .c3-regions").append("image").attr("class","missing-data-icon").attr("xlink:href","https://eddataexpress.ed.gov/themes/custom/ede/img/no-data-exclam-icon--small.png").attr("width",icon_width).attr("height",icon_height).attr("x",x_pos-(icon_width/2)).attr("y",missing_data_y_pos[i]+20);;});}function isNumeric(num){return !isNaN(num);}function constructSBCRequest(){pgm=$("article").attr("paramnum");num=$("#performance").attr("paramnum");var current_state_tid=$('#edit-state option:selected').val();var queryString=window.location.search;if(typeof current_state_tid!="undefined"){st=current_state_tid;if(current_state_tid!="1035")stateSelected=true;else stateSelected=false;}else{st="00";stateSelected=false;}if(queryString!="")queryString=queryString+"&amp;type=json";else queryString="?type=json";req="/api/v2/"+pgm+"/"+num+queryString;return req;}performance_state_change=function(){update(constructSBCRequest());};function appendRadioButtons(ds){var radiobuttons="";if(ds!="undefined"&amp;&amp;(ds.length&gt;0||Object.keys(ds).length&gt;0)){radiobuttons+="&lt;ul&gt;";ds.forEach(function(data,i){radiobuttons+="&lt;li&gt;&lt;input type='radio' name='subject' value='"+i+"'"+" id='rb"+i+"' /&gt;"+"&lt;label for='rb"+i+"'&gt;"+data['subject']+"&lt;/label&gt;"+"&lt;/li&gt;";});radiobuttons+="&lt;/ul&gt;";}$('#performanceRadios').append(radiobuttons);$('#rb0').attr('checked','checked');updateChartSubheader();$('input[name="subject"]').on('change',function(){update(constructSBCRequest());updateChartSubheader();});return radiobuttons;}function updateChartSubheader(defaultHeader){var defaultHeader=hdrTxtTemplate;var selectedSubject=$('input[name="subject"]:checked');var lblTxt=$(selectedSubject).siblings("label").text();var hdrTxt=defaultHeader.replace('[Subject]',lblTxt);$('#performance h4').html(hdrTxt);}function isEmpty(str){return (!str||0===str.length);}function createJsonChartObj(datasets,state_selected){var chartObj=[];var data={};data.groups=[];data.colors=[];data.values=[];data.xCategories=[];data.names=[];var categories=[];var nameObj={};var colorObj={};var selectedRB=$('input[name="subject"]:checked').val();if(selectedRB!=null&amp;&amp;datasets.length&gt;0){var subjectData=datasets[selectedRB];var vals=subjectData["data"];dnaSubject="";if(state_selected==true)vals.forEach(function(subject,i){var dsName="data"+(i+1);nameObj[dsName]=subject['label'];data.names.push(nameObj);colorObj[dsName]=subject['color'];data.colors.push(colorObj);var chartValues=[];if(subject['values'].length&gt;0)subject['values'].forEach(function(values,index){var year=values['x'];var value=values['y'];if(index==0)chartValues.push(dsName);chartValues.push(value);if($.inArray(year,categories)=='-1'){var yr_lbl=formatXLabelYr(year);categories.push(yr_lbl);}});else{chartValues.push(dsName);dnaSubject=subject['label'];}data.values.push(chartValues);});else{var yearLabels=[];var dataLbl='data1';var lblName="Proficiency Gap";if($('#edit-state').length&amp;&amp;$('#edit-state option:selected').text()=='US')lblName='Average Proficiency Gap Across States';nameObj[dataLbl]=lblName;data.names.push(nameObj);colorObj[dataLbl]=subjectData['color'];data.colors.push(colorObj);var dataset=datasets[selectedRB]['data'];var gaps=[];gaps.push(dataLbl);if(typeof dataset[0]!='undefined'&amp;&amp;typeof dataset[1]!='undefined')if(dataset[0]['values'].length&gt;0)for(var i=0;i&lt;dataset[0]['values'].length;i++){var year=dataset[0]['values'][i]['x'];var yr_lbl=formatXLabelYr(year);var gap=dataset[0]['values'][i]['y'];if(gap==null||dataset[1]['values'][i]['y']==null)gap=null;else{if(typeof dataset[1]['values'][i]!='undefined')gap=gap-dataset[1]['values'][i]['y'];}gaps.push(gap);yearLabels.push(yr_lbl);}else{if(dataset[1]['values'].length&gt;0)for(var i=0;i&lt;dataset[1]['values'].length;i++){var year=dataset[1]['values'][i]['x'];var yr_lbl=formatXLabelYr(year);var gap=dataset[1]['values'][i]['y'];gaps.push(gap);yearLabels.push(yr_lbl);}}categories=yearLabels;data.values.push(gaps);}data.xCategories=categories;chartObj.data=data;}return chartObj;}function formatXLabelYr(year){if(year==='2019-2020')year='19-20';else if(year==='2020-2021')year='20-21';else year=year.split('20').join('');year='SY '+year;return year;}function createLegend(chart,container){var dataKeys=Object.keys(chart.internal.data.xs);var names=chart.data.names();$(container).css("width",chart.internal.currentWidth);d3.select(container).insert('div','.chart').attr('class','legend').selectAll('div').data(dataKeys).enter().append('div').attr('class','legend-item').attr('data-id',function(id){return id;}).each(function(id){Drupal.VizChartHelper.legendBox(d3.select(this),chart.color(id));var text=names[id];if(!text)text=id;d3.select(this).append('span').html(text).attr('class','legend-text');}).on('mouseover',function(id){chart.focus(id);}).on('mouseout',function(id){chart.revert();}).on('click',function(id){$(this).toggleClass("c3-legend-item-hidden");chart.toggle(id);});}function generateCustomTooltip(d){var tooltip="";var tooltip_content="";var total=0;var tooltip_parts=[];isPrivProtected=false;if(!(d===undefined&amp;&amp;d.length==0)){tooltip="&lt;div class='line-chart'&gt;&lt;table class='chart-tooltip'&gt;&lt;tr&gt;&lt;td colspan='2' class='header'&gt;"+currentHoveronTitle+"&lt;/td&gt;";d.forEach(function(data,index){var value='';tooltip_content="&lt;tr&gt;";if(missing_data_ranges.includes(data.x))if(missingDataVizMessageRange.includes(data.x))value=visualizationMessage;else if(data.value==null)value='Missing Data';else{value=data.value;value=value.toFixed(1)+"%";}else{value=data.value;value=value.toFixed(1)+"%";}tooltip_content+="&lt;td class='title'&gt;"+data.name+"&lt;/td&gt;"+"&lt;td class='value'&gt;"+value+"&lt;/td&gt;"+"&lt;/tr&gt;";tooltip_parts.push(tooltip_content);if(program=="Title I, Part C"&amp;&amp;(data.value=="0"||data.value===0))isPrivProtected=true;});if(isPrivProtected){var msg='&lt;tr style="border-top: 1px solid;"&gt;&lt;td colspan="2"&gt;&lt;b&gt;Note:&lt;/b&gt; Value displaying as "0" due to privacy protections.&lt;/td&gt;&lt;/tr&gt;';tooltip_parts.push(msg);}if(dnaSubject!=''){var dna="&lt;tr&gt;&lt;td class='title'&gt;"+dnaSubject+"&lt;/td&gt;"+"&lt;td class='value'&gt;Data Not Available&lt;/td&gt;"+"&lt;/tr&gt;";tooltip_parts.push(dna);}tooltip_parts.forEach(function(part,i){tooltip+=part;});if(!isEmpty(tooltip_parts))tooltip+="&lt;/table&gt;&lt;/div&gt;";}return tooltip;}};})(jQuery);;
(function($){var checkReadyState=setInterval(()=&gt;{if(document.readyState==='complete'){clearInterval(checkReadyState);buildSackedBarChart();}},100);function buildSackedBarChart(){var currentHoveron="";var containerId="participate";var otherIDSlug='participation';var vizId="";var width=350;var height=300;var xHeight=50;var chartObj="";var program_name="";var table_name='participation';var num_format=",.1f";var format=d3.format(num_format);var vizContainerId="#participationViz";var sbccallback=constructSBCRequest();update(sbccallback);function update(callback){$.getJSON(callback,function(dta){chartObj=dta.api_v2;program_name=chartObj.data.program;if(program_name==='Title I, Part D, Subpart 2')var interval=setInterval(function(){if($('#participationWrapper').length&amp;&amp;$('#fundingWrapper').length)clearInterval(interval);},1000);var type='bar';var missing_data_ranges=[];var missing_data_regions=[];if('missingDataRange' in chartObj.data){missing_data_ranges=chartObj.data.missingDataRange;chartObj.data.missingDataRange.forEach(function(range){var range_config={axis:'x',start:range,end:range,class:'missing-data-bar-chart'};missing_data_regions.push(range_config);});}if("options" in chartObj.data){var decimals=0;var order='desc';var percentage=false;if('decimalPlaces' in chartObj.data.options)decimals=chartObj.data.options.decimalPlaces;num_format=",."+decimals+"f";format=d3.format(num_format);if('showAsPercentage' in chartObj.data.options)if(chartObj.data.options.showAsPercentage===true)percentage=true;if('order' in chartObj.data.options)order=chartObj.data.options.order;}if(program_name==='Title I, Part D, Subpart 1'){var is_grouped_by_category=true;if(is_grouped_by_category===true){chartObj=parseChartJson(dta['chart']);setChartData(chartObj);xHeight=100;height=350;}}if(program_name==='Title I, Part A')order=null;let categories=chartObj.data.xCategories;let names=chartObj.data.names;let columns=chartObj.data.values;let dialogTitle=Drupal.t('Participation chart data');const accessibleTable=Drupal.VizChartHelper?.generateAccessibleTable(categories,names,columns,'decimal',table_name);Drupal.VizChartHelper?.renderAccessibleTableDialog(accessibleTable,dialogTitle,table_name);var chart=c3.generate({bindto:vizContainerId,size:{width,height},axis:{x:{type:'category',categories:chartObj.data.xCategories,tick:{rotate:70,multiline:false},height:xHeight},y:{tick:{format:function(d){if(isNumeric(d)){var format=d3.format(",.0f");var val=format(d);if(program_name==TITLE_I_PART_D&amp;&amp;!getIsStateSelected())if(percentage===true)val=val+"%";return val;}}}}},regions:missing_data_regions,bar:{width:{ratio:.8}},data:{columns:chartObj.data.values,names:chartObj.data.names,groups:[chartObj.data.groups],type,labels:false,colors:chartObj.data.colors,color:function(color,d){if(Array.isArray(missing_data_ranges)&amp;&amp;!missing_data_ranges.length===false)if(missing_data_ranges.includes(d.index))color="grey";return color;},order,onmouseover:function(d){currentHoveron=d['id'];}},legend:{show:false},tooltip:{format:{value:function(d){if(isNumeric(d))if(percentage===true)d=format(d)+"%";else d=format(d);return d;}},position:function(data,width,height,thisElement){var containerWidth,element,tooltipWidth,x,y,windowWidth;element=document.getElementById(`${otherIDSlug}Viz`);containerWidth=element.clientWidth;tooltipWidth=element.querySelector('.c3-tooltip-container').clientWidth;windowWidth=$(window).width();x=(windowWidth&lt;700)?containerWidth-tooltipWidth-width/1.05:containerWidth+tooltipWidth-(width);y=thisElement.getAttribute('y');return {top:y,left:x};},contents:function(d){return generateCustomTooltip(d);}}});var C3svg=document.querySelector(vizContainerId+' svg');C3svg.setAttribute('width',width+20);if(!($("#participationWrapper .legend")[0]))createLegend(chart,vizContainerId);});}function appendRadioButtons(ds){var radiobuttons="";if(ds!="undefined"&amp;&amp;ds.length&gt;0){radiobuttons+="&lt;ul&gt;";ds.forEach(function(data,i){radiobuttons+="&lt;li&gt;&lt;input type='radio' name='subject' value='"+i+"'"+" id='rb"+i+"' /&gt;"+"&lt;label for='rb"+i+"'&gt;"+data['key']+"&lt;/label&gt;"+"&lt;/li&gt;";});radiobuttons+="&lt;/ul&gt;";}$('#performanceRadios').append(radiobuttons);$('#rb0').attr('checked','checked');updateChartSubheader();$('input[name="subject"]').on('change',function(){updateChartSubheader();update(constructSBCRequest());});return radiobuttons;}participation_state_change=function(){update(constructSBCRequest());};function constructSBCRequest(){pgm=$("article").attr("paramnum");num=$("#"+containerId).attr("paramnum");var curr_state=$('#edit-state option:selected').val();if(typeof curr_state==="undefined"||curr_state==="00"||curr_state==="110")ststr="";else ststr="&amp;s="+curr_state;sy=$("#edit-school-year option:selected").val();if(typeof sy!="undefined")ststr=ststr+"&amp;sy="+sy;req="/api/v2/"+pgm+"/"+num+"?type=json"+ststr;return req;}function setChartData(data){chartData=data;}function getChartData(){return chartObj;}function getIsStateSelected(){var isStateSelected=false;var selected=$("#edit-state option:selected").val();if(typeof selected!=="undefined"&amp;&amp;selected!="1035")isStateSelected=true;return isStateSelected;}function parseChartJson(datasets){var ds=datasets['data'][0];if(program_name===TITLE_III||program_name===TITLE_I_PART_C)ds=ds.reverse();return parseChartData(ds);}function parseChartData(datasets){var groups=[];var colors=[];var columns=[];var names={};var categories=[];var counter=0;datasets.forEach(function(dataset,index){if(dataset['key']!==null){var dataLabel=getDataLabel(index);groups.push(dataLabel);colors.push(parseColorObj(dataLabel,dataset['color']));names[dataLabel]=dataset["key"];var values=dataset['values'];var dataValues=[];dataValues.push(dataLabel);values.forEach(function(ds){var xVal=ds["x"];var yVal=ds["y"];if(ds["x"]!=="Subpart 1 Overall"&amp;&amp;ds["x"]!=="Subpart 2 Overall"){dataValues.push(yVal);if($.inArray(xVal,categories)=='-1')categories.push(xVal);}});columns[counter]=dataValues;counter=counter+1;}});chartObj={chart:{data:{columns,names,groups:[groups],colors},axis:{x:{categories}}}};return chartObj;}function getDataLabel(index){return "data"+index;}function parseColorObj(dataLabel,color){var colorObj={};colorObj[dataLabel]=color;return colorObj;}function numberWithCommas(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}function isEmpty(str){return (!str||0===str.length);}function getSelectedSchoolYearTid(){yr=$("#edit-school-year option:selected").val();return yr;}function getProgramName(program_id){var TITLE_I_PART_D='Title I, Part D';var program_name=$("#edit-program option[value='"+program_id+"']").text();program_name=program_name.trim();if(program_name.indexOf(TITLE_I_PART_D)&gt;=0)program_name=TITLE_I_PART_D;return program_name;}function generateCustomTooltip(d){var tooltip="";var tooltip_content="";var total=0;var tooltip_parts=[];var chartData=getChartData();var categories=chartObj.data.xCategories;var tooltips=chartData.data.tooltips;var curr_index=d[0].index;var tooltip_header=categories[curr_index];var num_format=",.0f";var format=d3.format(num_format);var value="";if(!(d===undefined&amp;&amp;d.length===0)){tooltip="&lt;div class='stacked-chart'&gt;&lt;table class='chart-tooltip'&gt;&lt;tr&gt;&lt;td colspan='2' class='header'&gt;"+tooltip_header+"&lt;/td&gt;";if(program_name==='Title I, Part A')d.reverse();d.forEach(function(data,index){tooltip_content="";value=data.value;var hover_tr=(currentHoveron===data['id'])?"&lt;tr class='current-hover'&gt;":"&lt;tr&gt;";tooltip_content+=hover_tr;if((program_name===TITLE_III||program_name===TITLE_I_PART_C))value=tooltips[index][data.x];if(isNumeric(value)){total=index===0?value:total+value;value=format(value);}tooltip_content+="&lt;td class='title'&gt;"+data.name+"&lt;/td&gt;"+"&lt;td class='value'&gt;"+value+"&lt;/td&gt;"+"&lt;/tr&gt;";tooltip_parts.push(tooltip_content);});tooltip_parts.forEach(function(part,i){tooltip+=part;});if(program_name===MCKINNEY_VENTO||program_name===TITLE_I_PART_A)tooltip+="&lt;tr&gt;&lt;td class='title'&gt;Total: &lt;/td&gt;"+"&lt;td class='value'&gt;"+format(total)+"&lt;/td&gt;"+"&lt;/tr&gt;";if(!isEmpty(tooltip_parts))tooltip+="&lt;/table&gt;&lt;/div&gt;";}return tooltip;}function isNumeric(num){return !isNaN(num);}function createLegend(chart,container){var dataKeys=Object.keys(chart.internal.data.xs);var names=chart.data.names();if(program_name==='Title I, Part A')dataKeys.reverse();$(container).css("width",chart.internal.currentWidth);d3.select(container).insert('div','.chart').attr('class','legend').selectAll('div').data(dataKeys).enter().append('div').attr('class','legend-item').attr('data-id',function(id){return id;}).each(function(id){Drupal.VizChartHelper.legendBox(d3.select(this),chart.color(id));var text=names[id];if(!text)text=id;d3.select(this).append('span').html(text).attr('class','legend-text');}).on('mouseover',function(id){chart.focus(id);}).on('mouseout',function(id){chart.revert();}).on('click',function(id){$(this).toggleClass("c3-legend-item-hidden");chart.toggle(id);});}};})(jQuery);;
var funding_state_change=function(st){};var d3v5=d3;(function($){$(document).ready(function(){var funding={};var program_funding={};var categoriesdata=[];var statename='';var current_statename='None';var program_abbr=getProgramAbbr();var program=$('.field--name-field-program .field--item').html();var data1=['data1',1,2,3];var data2=['data2',4,5,6];function reloadFunding(error,fundingdata){program=$('.field--name-field-program .field--item').html();statename=$("#edit-state option:selected").text();if(statename!=current_statename){current_statename=statename;var namesdata={data1:program+" (State Agency Program)",data2:"Total Federal Elementary and Secondary Education Programs"};data1=getProgramFunding(statename);data2=getOESEfunding(statename);programfunding=(findIndexOf(data1,Number.isNaN)&lt;0);oesefunding=(findIndexOf(data2,Number.isNaN)&lt;0);if(!programfunding&amp;&amp;!oesefunding){$("#fundingWrapper h5").html("No Funding Information for "+statename);$("#chart2y svg").html("");}else{var axes_obj={data1:'y',data2:'y2'};if($.inArray("N/A",data1)&gt;-1||!programfunding){namesdata.data1="No Funding Information for "+statename;axes_obj={data2:'y2'};}var columndata=[data1,data2];var ylabel=program+' Program Funding';var state_s='';$("#fundingWrapper h5").html("( "+statename+" in thousands )");if(statename!='US')state_s=statename+"'s ";var ylabel2='Total Federal Funding for '+state_s+'Elementary and Secondary Education Programs';var chart2y=c3.generate({bindto:'#chart2y',data:{columns:columndata,axes:axes_obj,names:namesdata},axis:{x:{type:'category',categories:categoriesdata},y:{label:{text:ylabel,position:'outer-middle'},tick:{format:d3v5.format("$,")}},y2:{show:true,label:{text:ylabel2,position:'outer-middle'},tick:{format:d3v5.format("$,")}}},tooltip:{format:{title:function(d){return categoriesdata[d]+' Funding in thousands';}},position:function(data,width,height,element){return {top:-100,left:0};}},legend:{item:{onclick:function(d){}}}});}}}funding_state_change=function(st){reloadFunding();};function multiline(second){if(typeof second=='object'){setTimeout(function(){multiline(1);},300);return false;}var htm1='';$(".c3-axis-y2-label tspan").each(function(i){htm1=htm1+$(this).html()+' ';$(this).remove();});if(htm1==''){}else $(".c3-axis-y2-label").html(htm1);d3v5.select(".c3-axis-y2-label").call(wrap,d3v5.select(".c3-event-rect-0").attr('height'));}function importFundingCSV(data){yr=data['Year'];st=data['State'];if(typeof yr=='undefined'||typeof st=='undefined')return;if(!funding[yr]){funding[yr]={};categoriesdata.push(yr);}funding[yr][st]=data['Amount'];}function importProgramFundingCSV(data){yr=data['Year'];st=data['State'];if(typeof yr=='undefined'||typeof st=='undefined')return;if(!program_funding[yr])program_funding[yr]={};program_funding[yr][st]=data['Amount'];}function findIndexOf(items,param){var index=-1;for(var i=0;i&lt;items.length;++i)if(items[i]==param){index=i;break;}return index;}function getOESEfunding(statename){ar=['data2'];abbr=getStateAbbr(statename);for(year in categoriesdata){val=Math.round(parseInt(funding[categoriesdata[year]][abbr])/1000);ar.push(val);}return ar;}function getProgramFunding(statename){ar=['data1'];abbr=getStateAbbr(statename);for(year in categoriesdata){datum=program_funding[categoriesdata[year]][abbr];if(datum=='-1')val="N/A";else val=Math.round(parseInt(datum)/1000);ar.push(val);}return ar;}function getProgramAbbr(){pgm='';var programregex=RegExp('/dashboard.*/([^/]+)/?$','g');var array1;if((array1=programregex.exec(window.location.pathname))!==null)pgm=array1[1];return pgm;}function getStateAbbr(name){switch(name){case "Alabama":st="AL";break;case "Alaska":st="AK";break;case "Arizona":st="AZ";break;case "Arkansas":st="AR";break;case "California":st="CA";break;case "Colorado":st="CO";break;case "Connecticut":st="CT";break;case "Delaware":st="DE";break;case "District of Columbia":st="DC";break;case "Florida":st="FL";break;case "Georgia":st="GA";break;case "Hawaii":st="HI";break;case "Idaho":st="ID";break;case "Illinois":st="IL";break;case "Indiana":st="IN";break;case "Iowa":st="IA";break;case "Kansas":st="KS";break;case "Kentucky":st="KY";break;case "Louisiana":st="LA";break;case "Maine":st="ME";break;case "Maryland":st="MD";break;case "Massachusetts":st="MA";break;case "Michigan":st="MI";break;case "Minnesota":st="MN";break;case "Mississippi":st="MS";break;case "Missouri":st="MO";break;case "Montana":st="MT";break;case "Nebraska":st="NE";break;case "Nevada":st="NV";break;case "New Hampshire":st="NH";break;case "New Jersey":st="NJ";break;case "New Mexico":st="NM";break;case "New York":st="NY";break;case "North Carolina":st="NC";break;case "North Dakota":st="ND";break;case "Ohio9":st="OH";break;case "Oklahoma":st="OK";break;case "Oregon":st="OR";break;case "Pennsylvania":st="PA";break;case "Rhode Island":st="RI";break;case "South Carolina":st="SC";break;case "South Dakota":st="SD";break;case "Tennessee":st="TN";break;case "Texas":st="TX";break;case "Utah":st="UT";break;case "Vermont":st="VT";break;case "Virginia":st="VA";break;case "Washington":st="WA";break;case "West Virginia":st="WV";break;case "Wisconsin":st="WI";break;case "Wyoming":st="WY";break;case "US":st="US";break;default:st="N/A";};return st;}function wrap(text,width){text.each(function(){var text=d3v5.select(this),words=text.text().split(/\s+/).reverse(),word,line=[],lineNumber=0,lineHeight=1.1,y=text.attr("y"),dy=parseFloat(text.attr("dy")),x=text.attr("x"),tspan=text.text(null).append("tspan").attr("x",x).attr("y",y).attr("dy",dy);while(word=words.pop()){line.push(word);tspan.text(line.join(" "));l=tspan.node().getComputedTextLength();if(tspan.node().getComputedTextLength()&gt;width){line.pop();tspan.text(line.join(" "));line=[word];var sum=++lineNumber+dy;if(lineNumber&gt;0)dy=10;tspan=text.append("tspan").attr("x",x).attr("y",y).attr("dy",10).text(word);}}});}window.addEventListener("resize",multiline);});})(jQuery);;
var funding_state_change=function(st){};(function($,Drupal,once){$(document).ready(function(){var funding={};var program_funding={};var categoriesdata=[];var statename='';var current_statename='None';var program=$('.field--name-field-program .field--item').html();var program_abbr=getProgramAbbr(program);var table_name='funding';var oese_funding_file="/modules/custom/visualizations/data/oese-funding.csv";var program_funding_file="/modules/custom/visualizations/data/"+program_abbr+"-funding.csv";var updated_programs=['homeless','mep','title-iii','title-i-part-a','title-i-part-d-subpart-1','title-i-part-d-subpart-2'];var updated_program_year=2022;function processData(){getProgramFundingCSV(oese_funding_file,parseFundingCSVData);getProgramFundingCSV(program_funding_file,parseProgramFundingCSVData);setTimeout(reloadFunding,3000);}processData();function reloadFunding(){var containerId='#fundingViz';program=$('.field--name-field-program .field--item').html();statename=$("#edit-state option:selected").text();if(statename!=current_statename){var namesdata={data1:`${program} (State Agency Program)`,data2:"Total Federal Elementary and Secondary Education Programs"};current_statename=statename;data1=getProgramFunding(statename);data2=getOESEfunding(statename);let oesefunding=(findIndexOf(data2,Number.isNaN)&lt;0);let programfunding=(findIndexOf(data1,Number.isNaN)&lt;0);if(!programfunding&amp;&amp;!oesefunding){$("#fundingWrapper h5").html("No Funding Information for "+statename);$("#chart2y svg").html("");}else{var axes_obj={data1:'y'};if($.inArray("N/A",data1)&gt;-1||!programfunding){namesdata.data1="No Funding Information for "+statename;columndata=[data2];axes_obj={data2:'y2'};}var columndata=[data1,data2];var ylabel=program+' Program Funding';$("#fundingWrapper h5").html("( "+statename+" in thousands )");var state_s=(statename!='US')?statename+"'s ":'';var formattedYLabels=[];categoriesdata.forEach((yLabel)=&gt;{var newLabel='FY '+yLabel;formattedYLabels.push(newLabel);});let categories=categoriesdata.map((value)=&gt;{return value;});let names=namesdata;let columns=[data1,data2];let dialogTitle=`${statename}: ${ylabel}`;const accessibleTable=Drupal.VizChartHelper?.generateAccessibleTable(categories,names,columns,'currency',table_name,'Funding by year in thousands');Drupal.VizChartHelper?.renderAccessibleTableDialog(accessibleTable,dialogTitle,table_name);const chart=c3.generate({bindto:containerId,data:{columns:columndata,axes:axes_obj,names:namesdata},size:{width:350,height:300},axis:{x:{type:'category',categories:formattedYLabels,tick:{rotate:75,multiline:false},height:50},y:{min:0,padding:{top:100,bottom:0},label:{text:ylabel,position:'outer-middle'},tick:{format:d3.format("$,")}}},tooltip:{format:{title:function(d){return categoriesdata[d]+' Funding in thousands';}},position:function(data,width,height,element){return {top:-100,left:0};},contents:function(d,defaultTitleFormat,defaultValueFormat,color){var ind=d[0].index;var $$=this,config=$$.config,titleFormat=config.tooltip_format_title||defaultTitleFormat,nameFormat=config.tooltip_format_name||function(name){return name;},valueFormat=config.tooltip_format_value||defaultValueFormat,text,i,title,value,name,bgcolor;for(i=0;i&lt;d.length;i++){if(!(d[i]&amp;&amp;(d[i].value||d[i].value===0)))continue;if(!text){title=titleFormat?titleFormat(d[i].x):d[i].x;text="&lt;table class='"+$$.CLASS.tooltip+"'&gt;"+(title||title===0?"&lt;tr&gt;&lt;th colspan='2'&gt;"+title+"&lt;/th&gt;&lt;/tr&gt;":"");}name=nameFormat(d[i].name);value=valueFormat(d[i].value,d[i].ratio,d[i].id,d[i].index);bgcolor=$$.levelColor?$$.levelColor(d[i].value):color(d[i].id);text+="&lt;tr class='"+$$.CLASS.tooltipName+"-"+d[i].id+"'&gt;";text+="&lt;td class='name'&gt;&lt;span style='background-color:"+bgcolor+"'&gt;&lt;/span&gt;"+name+"&lt;/td&gt;";text+="&lt;td class='value'&gt;"+value+"&lt;/td&gt;";text+="&lt;/tr&gt;";}value=valueFormat(data2[ind+1]);name=namesdata.data2;bgcolor="orange";text+="&lt;tr class='"+$$.CLASS.tooltipName+"-2'&gt;";text+="&lt;td class='name'&gt;&lt;span style='background-color:"+bgcolor+"'&gt;&lt;/span&gt;"+name+"&lt;/td&gt;";text+="&lt;td class='value'&gt;"+value+"&lt;/td&gt;";text+="&lt;/tr&gt;&lt;/table&gt;";return text;}},legend:{show:false}});if(!($("#fundingWrapper .legend")[0]))createLegend(chart,containerId);multiline();chart.hide('data2',{withLegend:false});}}}function getProgramFundingCSV(file_name,parsing_method){$.ajax({url:file_name,dataType:'text'}).done(function(data){parsing_method(data);});}function parseFundingCSVData(data){var allRows=data.split(/\r?\n|\r/);var headers=allRows[0].split(',');for(var row=1;row&lt;allRows.length;row++){var rowCells=allRows[row].split(',');var dataObj=new Object();for(var rowCell=0;rowCell&lt;rowCells.length;rowCell++)if(rowCells[rowCell]==updated_program_year){if(updated_programs.includes(program_abbr)){dataObj[headers[rowCell]]=rowCells[rowCell];importFundingCSV(dataObj);}}else{dataObj[headers[rowCell]]=rowCells[rowCell];importFundingCSV(dataObj);}}}function importFundingCSV(data){yr=data['Year'];st=data['State'];if(typeof yr=='undefined'||typeof st=='undefined')return;if(!funding[yr]){funding[yr]={};categoriesdata.push(yr);}funding[yr][st]=data['Amount'];}function parseProgramFundingCSVData(data){var allRows=data.split(/\r?\n|\r/);var headers=allRows[0].split(',');for(var row=1;row&lt;allRows.length;row++){var rowCells=allRows[row].split(',');var dataObj=new Object();for(var rowCell=0;rowCell&lt;rowCells.length;rowCell++){dataObj[headers[rowCell]]=rowCells[rowCell];importProgramFundingCSV(dataObj);}}}function importProgramFundingCSV(data){yr=data['Year'];st=data['State'];if(typeof yr=='undefined'||typeof st=='undefined')return;if(!program_funding[yr])program_funding[yr]={};program_funding[yr][st]=data['Amount'];}function findIndexOf(items,param){var index=-1;for(var i=0;i&lt;items.length;++i)if(items[i]==param){index=i;break;}return index;}funding_state_change=function(st){reloadFunding();};function multiline(second){if(typeof second=='object'){setTimeout(function(){multiline(1);},300);return false;}var htm1='';$(".c3-axis-y1-label tspan").each(function(i){htm1=htm1+$(this).html()+' ';$(this).remove();});if(htm1=='');else $(".c3-axis-y1-label").html(htm1);}function createLegend(chart,container){var dataKeys=Object.keys(chart.internal.data.xs);var names=chart.data.names();$(container).css("width",chart.internal.currentWidth);d3.select(container).insert('div','.chart').attr('class','legend').selectAll('div').data(dataKeys).enter().append('div').attr('class','legend-item').attr('data-id',function(id){return id;}).each(function(id){if(id!="data2"){Drupal.VizChartHelper.legendBox(d3.select(this),chart.color(id));var text=names[id];if(!text)text=id;d3.select(this).append('span').html(text).attr('class','legend-text');}}).on('mouseover',function(id){chart.focus(id);}).on('mouseout',function(id){chart.revert();}).on('click',function(id){$(this).toggleClass("c3-legend-item-hidden");chart.toggle(id);});}function getOESEfunding(statename){ar=['data2'];abbr=getStateAbbr(statename);for(year in categoriesdata){val=Math.round(parseInt(funding[categoriesdata[year]][abbr])/1000);ar.push(val);}return ar;}function getProgramFunding(statename){ar=['data1'];abbr=getStateAbbr(statename);for(year in categoriesdata){var datum=0;if(typeof categoriesdata[year]!='undefined'&amp;&amp;typeof program_funding[categoriesdata[year]]!='undefined')if(typeof program_funding[categoriesdata[year]][abbr]!='undefined'){datum=program_funding[categoriesdata[year]][abbr];if(datum=='-1')val="N/A";else val=Math.round(parseInt(datum)/1000);ar.push(val);}}return ar;}function getProgramAbbr(program){program_abbr='';program_abbr=window.location.pathname.split("dashboard/");program_abbr=program_abbr[1].split("/")[0];if(program_abbr===""){program_abbr=program.toLowerCase().replace(/ /g,"-");program_abbr=program_abbr.replace(/,/g,'');}return program_abbr;}function getStateAbbr(name){switch(name){case "Alabama":st="AL";break;case "Alaska":st="AK";break;case "Arizona":st="AZ";break;case "Arkansas":st="AR";break;case "California":st="CA";break;case "Colorado":st="CO";break;case "Connecticut":st="CT";break;case "Delaware":st="DE";break;case "District of Columbia":st="DC";break;case "Florida":st="FL";break;case "Georgia":st="GA";break;case "Hawaii":st="HI";break;case "Idaho":st="ID";break;case "Illinois":st="IL";break;case "Indiana":st="IN";break;case "Iowa":st="IA";break;case "Kansas":st="KS";break;case "Kentucky":st="KY";break;case "Louisiana":st="LA";break;case "Maine":st="ME";break;case "Maryland":st="MD";break;case "Massachusetts":st="MA";break;case "Michigan":st="MI";break;case "Minnesota":st="MN";break;case "Mississippi":st="MS";break;case "Missouri":st="MO";break;case "Montana":st="MT";break;case "Nebraska":st="NE";break;case "Nevada":st="NV";break;case "New Hampshire":st="NH";break;case "New Jersey":st="NJ";break;case "New Mexico":st="NM";break;case "New York":st="NY";break;case "North Carolina":st="NC";break;case "North Dakota":st="ND";break;case "Ohio":st="OH";break;case "Oklahoma":st="OK";break;case "Oregon":st="OR";break;case "Pennsylvania":st="PA";break;case "Puerto Rico":st="PR";break;case "Rhode Island":st="RI";break;case "South Carolina":st="SC";break;case "South Dakota":st="SD";break;case "Tennessee":st="TN";break;case "Texas":st="TX";break;case "Utah":st="UT";break;case "Vermont":st="VT";break;case "Virginia":st="VA";break;case "Washington":st="WA";break;case "West Virginia":st="WV";break;case "Wisconsin":st="WI";break;case "Wyoming":st="WY";break;case "US":st="US";break;default:st="N/A";};return st;}function wrap(text,width){text.each(function(){var text=d3.select(this),words=text.text().split(/\s+/).reverse(),word,line=[],lineNumber=0,lineHeight=1.1,y=text.attr("y"),dy=parseFloat(text.attr("dy")),x=text.attr("x"),tspan=text.text(null).append("tspan").attr("x",x).attr("y",y).attr("dy",dy);while(word=words.pop()){line.push(word);tspan.text(line.join(" "));l=tspan.node().getComputedTextLength();if(tspan.node().getComputedTextLength()&gt;width){line.pop();tspan.text(line.join(" "));line=[word];var sum=++lineNumber+dy;if(lineNumber&gt;0)dy=10;tspan=text.append("tspan").attr("x",x).attr("y",y).attr("dy",10).text(word);}}});}window.addEventListener("resize",multiline);});})(jQuery,Drupal,once);;
(function(global,factory){typeof exports==='object'&amp;&amp;typeof module!=='undefined'?module.exports=factory():typeof define==='function'&amp;&amp;define.amd?define(factory):(global=global||self,global.geoAlbersUsaPr=factory());}(this,(function(){'use strict';var geoAlbersUsaPr=function(){var ε=1e-6;var lower48=d3.geoAlbers();var alaska=d3.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var hawaii=d3.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var puertoRico=d3.geoConicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]);var point,pointStream={point:function(x,y){point=[x,y];}},lower48Point,alaskaPoint,hawaiiPoint,puertoRicoPoint;function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];point=null;(lower48Point(x,y),point)||(alaskaPoint(x,y),point)||(hawaiiPoint(x,y),point)||(puertoRicoPoint(x,y),point);return point;}albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return (y&gt;=.120&amp;&amp;y&lt;.234&amp;&amp;x&gt;=-.425&amp;&amp;x&lt;-.214?alaska:y&gt;=.166&amp;&amp;y&lt;.234&amp;&amp;x&gt;=-.214&amp;&amp;x&lt;-.115?hawaii:y&gt;=.204&amp;&amp;y&lt;.234&amp;&amp;x&gt;=.320&amp;&amp;x&lt;.380?puertoRico:lower48).invert(coordinates);};albersUsa.stream=function(stream){var lower48Stream=lower48.stream(stream),alaskaStream=alaska.stream(stream),hawaiiStream=hawaii.stream(stream),puertoRicoStream=puertoRico.stream(stream);return {point:function(x,y){lower48Stream.point(x,y);alaskaStream.point(x,y);hawaiiStream.point(x,y);puertoRicoStream.point(x,y);},sphere:function(){lower48Stream.sphere();alaskaStream.sphere();hawaiiStream.sphere();puertoRicoStream.sphere();},lineStart:function(){lower48Stream.lineStart();alaskaStream.lineStart();hawaiiStream.lineStart();puertoRicoStream.lineStart();},lineEnd:function(){lower48Stream.lineEnd();alaskaStream.lineEnd();hawaiiStream.lineEnd();puertoRicoStream.lineEnd();},polygonStart:function(){lower48Stream.polygonStart();alaskaStream.polygonStart();hawaiiStream.polygonStart();puertoRicoStream.polygonStart();},polygonEnd:function(){lower48Stream.polygonEnd();alaskaStream.polygonEnd();hawaiiStream.polygonEnd();puertoRicoStream.polygonEnd();}};};albersUsa.precision=function(_){if(!arguments.length)return lower48.precision();lower48.precision(_);alaska.precision(_);hawaii.precision(_);puertoRico.precision(_);return albersUsa;};albersUsa.scale=function(_){if(!arguments.length)return lower48.scale();lower48.scale(_);alaska.scale(_*.35);hawaii.scale(_);puertoRico.scale(_);return albersUsa.translate(lower48.translate());};albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream).point;alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+ε,y+.120*k+ε],[x-.214*k-ε,y+.234*k-ε]]).stream(pointStream).point;hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+ε,y+.166*k+ε],[x-.115*k-ε,y+.234*k-ε]]).stream(pointStream).point;puertoRicoPoint=puertoRico.translate([x+.350*k,y+.224*k]).clipExtent([[x+.320*k,y+.204*k],[x+.380*k,y+.234*k]]).stream(pointStream).point;return albersUsa;};return albersUsa.scale(1070);};return geoAlbersUsaPr;})));;
(function(Drupal){Drupal.VizMapHelper={};Drupal.VizMapHelper.checkIsIE=function(){var isIE=false||!!document.documentMode;return isIE;};Drupal.VizMapHelper.isNumeric=function(input){return (input-0)==input&amp;&amp;(''+input).trim().length&gt;0;};Drupal.VizMapHelper.kFormatter=function(num){return Math.abs(num)&gt;999?Math.sign(num)*((Math.abs(num)/1000).toFixed(1))+'k':Math.sign(num)*Math.abs(num);};Drupal.VizMapHelper.numberWithCommas=function(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");};Drupal.VizMapHelper.replaceAll=function(str,find,replace){return str.replace(new RegExp(find,'g'),replace);};Drupal.VizMapHelper.tryParseInt=function(str,defaultValue){var retValue=defaultValue;if(str!==null)if(str.length&gt;0)if(!isNaN(str))retValue=parseInt(str);return retValue;};Drupal.VizMapHelper.floorOrderOfMagnitude=function(n){var order=Math.floor(Math.log(n)/Math.LN10+0.000000001);return Math.pow(10,order);};Drupal.VizMapHelper.convert0to1=function(num,max,min){let retval=0;const oldRange=max-min;if(Drupal.VizMapHelper.isNumeric(num)){var num_float=parseFloat(num);if(num_float&lt;min)retval=0;else if(num_float&gt;=max)retval=1;else retval=(num_float-min)/oldRange;}return retval;};Drupal.VizMapHelper.getLegendScale=function(lo,hi){const domain=Drupal.VizMapHelper.calculateLegendDomain(hi,lo,program_name);const negativeRange=['#ff0000','#081d58','#253494','#225ea8','#1d91c0','#41b6c4'];let positiveRange=['#f5f5f5','#ffffd9','#d7f0d5','#b2e1d0','#8cd3cc','#67c4c8','#41b6c4','#1d91c0','#225ea8','#253494','#081d58','#fff3cd','#fce38a','#f8b777','#dc7633','#9c392b'];if(program_name=='Chronic Absenteeism'&amp;&amp;currentMap=='pct_difference')positiveRange=['#f5f5f5','#ffffd9','#d7f0d5','#b2e1d0','#8cd3cc','#67c4c8','#fff3cd','#fce38a','#f8b777','#dc7633','#9c392b'];let range=[];for(let i=0;i&lt;domain.length;i++)if(domain[i]&lt;=0)range.push(negativeRange[Math.min(i,negativeRange.length-1)]);else range.push(positiveRange[Math.min(i,positiveRange.length-1)]);var threshold=d3.scaleThreshold().domain(domain).range(range);return threshold;};Drupal.VizMapHelper.calculateLegendDomain=function(hi,lo,program_name){const urlParams=new URL(window.location.href).searchParams;let currentstate=urlParams.get('s');console.log(currentstate);var currentHash=new URL(document.URL).hash;if(currentHash)currentMap=currentHash.slice(1);if(program_name=='Chronic Absenteeism'){if(lo&lt;0||isNaN(lo))lo=lo;lo=parseInt(lo);}else{if(lo&lt;0||isNaN(lo))lo=0;lo=parseInt(lo);}let domain=[0,0];if(hi&lt;=0||isNaN(hi))return domain;if(program_name=='Chronic Absenteeism'&amp;&amp;currentMap=='pct_difference')if(currentstate=='1035'||currentstate=='2658')domain=[-50,-40,-30,-20,-10,0,10,20,30,40,50];else domain=[-100,-80,-60,-40,-20,0,20,40,60,80,100];else if(hi-lo&lt;90){lo=Math.floor(lo);hi=Math.ceil(hi);let tenthOffset=10-((hi-lo)%10);if(tenthOffset!=10)while(tenthOffset&gt;0){if(lo&gt;0){lo--;tenthOffset--;}if(tenthOffset&gt;0){hi++;tenthOffset--;}}let increment=(hi-lo)/10;if(increment!=5&amp;&amp;(increment%2)==0&amp;&amp;lo&gt;0&amp;&amp;(lo%2)==1){lo--;hi--;}domain=[lo,lo+increment,lo+increment*2,lo+increment*3,lo+increment*4,lo+increment*5,lo+increment*6,lo+increment*7,lo+increment*8,lo+increment*9,hi];}else{let tenth=Math.ceil(hi/10);const oom=Drupal.VizMapHelper.floorOrderOfMagnitude(tenth);tenth=Math.ceil(tenth/oom)*oom;domain=[0,tenth,2*tenth,3*tenth,4*tenth,5*tenth,6*tenth,7*tenth,8*tenth,9*tenth,10*tenth];}return domain;};Drupal.VizMapHelper.calculateLegendColorFromDomain=function(num,domain){const tenth=(domain[1]-domain[0]);if(tenth==0)return "gray";let domainVal=0;for(let i=0;i&lt;domain.length;i++)if(num&gt;domain[i])domainVal=domain[i+1];return Drupal.VizMapHelper.calculateLegendColor(domainVal,domain[domain.length-1],domain[0]);};Drupal.VizMapHelper.calculateLegendColor=function(value,max,min){const scalarVal=Drupal.VizMapHelper.convert0to1(value,max,min);const steppedVal=Math.ceil(scalarVal*10)/10;return d3.interpolateBlues(steppedVal);};Drupal.VizMapHelper.checkForNaOrSuppressed=function(value){value=value.trim();if(value==='S'||value==='N/A'||value==='Suppressed'||value==='PS'||value==='MISSING')return -9999;return value;};Drupal.VizMapHelper.cleanTextValueString=function(value){if(Drupal.VizMapHelper.checkForNaOrSuppressed(value)===-9999)return -9999;value=value.replace(['&lt;='],"LE");value=value.replace(['&gt;='],"GE");value=value.replace(['&gt;'],"GE");value=value.replace(['&lt;'],"LE");value=value.replace(['%'],"");value=value.replace(['='],"");value=value.replace([' '],"");value=value.trim();return value;};Drupal.VizMapHelper.getColorMappingForTitleIA=function(value,program_name){if(Drupal.VizMapHelper.checkForNaOrSuppressed(value)===-9999)return -9999;var original_value=value;value=value.replace(['&lt;='],"LE");value=value.replace(['&gt;='],"GE");value=value.replace(['&gt;'],"GE");value=value.replace(['&lt;'],"LE");value=value.replace(['%'],"");value=value.replace(['='],"");value=value.replace([' '],"");value=value.trim();var intVal=Drupal.VizMapHelper.tryParseInt(value,0);var colorNum=-1;if(intVal===0){if(value==="LE10"||value==="LE5"||value==="LE1"||value==="6-9")colorNum=1;else if(value==="10-14"||value==="14-19"||value==="11-19")colorNum=10;else if(value==="20-24"||value==="25-29"||value==="20-29")colorNum=20;else if(value==="30-34"||value==="35-39"||value==="30-39")colorNum=30;else if(value==="40-44"||value==="45-49"||value==="40-49")colorNum=40;else if(value==="50-54"||value==="55-59"||value==="50-59")colorNum=50;else if(value==="60-64"||value==="65-69"||value==="60-69")colorNum=60;else if(value==="70-74"||value==="75-79"||value==="70-79")colorNum=70;else if(value==="80-84"||value==="85-89"||value==="80-89")colorNum=80;else{if(value==="GE90"||value==="GE95"||value==="GE99"||value==="90-94")colorNum=90;}if(colorNum===-1&amp;&amp;value.includes("-")){var values_split=value.split("-");if(values_split.length===2)if(values_split[1]-values_split[0]&lt;=10){value=values_split[0];intVal=Drupal.VizMapHelper.tryParseInt(value.charAt(0),0);if(intVal!=='undefined')colorNum=intVal+10;}}}else if(program_name==program_name=="Chronic Absenteeism"){}else if(intVal&gt;=0&amp;&amp;intVal&lt;10)colorNum=1;else if(intVal&gt;=10&amp;&amp;intVal&lt;20)colorNum=10;else if(intVal&gt;=20&amp;&amp;intVal&lt;30)colorNum=20;else if(intVal&gt;=30&amp;&amp;intVal&lt;40)colorNum=30;else if(intVal&gt;=40&amp;&amp;intVal&lt;50)colorNum=40;else if(intVal&gt;=50&amp;&amp;intVal&lt;60)colorNum=50;else if(intVal&gt;=60&amp;&amp;intVal&lt;70)colorNum=60;else if(intVal&gt;=70&amp;&amp;intVal&lt;80)colorNum=70;else if(intVal&gt;=80&amp;&amp;intVal&lt;90)colorNum=80;else{if(intVal&gt;=90&amp;&amp;intVal&lt;=100)colorNum=90;}return colorNum;};Drupal.VizMapHelper.getFipAsStr=function(fip){var stfp=fip+"";if(stfp.length==1)stfp="0"+stfp;return stfp;};Drupal.VizMapHelper.fips2tid=function(fipscd){var sn=Drupal.VizMapHelper.getStateName(fipscd);return jQuery('#edit-state option:contains("'+sn+'")').val();};Drupal.VizMapHelper.getStateLEAIdList=function(data){var leaIdList=[];for(var i=0;i&lt;data.length;i++){var id=data[i].properties['id'];if(id!=null)leaIdList.push(id);}return leaIdList;};Drupal.VizMapHelper.formatValuesForTooltip=function(val,c){val=val.replace("%","");val=val.replace("GE","&gt;=");val=val.replace("LE","&lt;=");if(val.indexOf("NA")&gt;=0||val.indexOf("PS")&gt;=0)val=val.replace("%","");return val;};Drupal.VizMapHelper.state_info={'US':{fips:'00',abbr:'US'},'United States':{fips:'00',abbr:'US'},'Alabama':{fips:'01',abbr:'AL'},'Alaska':{fips:'02',abbr:'AK'},'Arizona':{fips:'04',abbr:'AZ'},'Arkansas':{fips:'05',abbr:'AR'},'California':{fips:'06',abbr:'CA'},'Colorado':{fips:'08',abbr:'CO'},'Connecticut':{fips:'09',abbr:'CT'},'Delaware':{fips:'10',abbr:'DE'},'District of Columbia':{fips:'11',abbr:'DC'},'Florida':{fips:'12',abbr:'FL'},'Georgia':{fips:'13',abbr:'GA'},'Hawaii':{fips:'15',abbr:'HI'},'Idaho':{fips:'16',abbr:'ID'},'Illinois':{fips:'17',abbr:'IL'},'Indiana':{fips:'18',abbr:'IN'},'Iowa':{fips:'19',abbr:'IA'},'Kansas':{fips:'20',abbr:'KS'},'Kentucky':{fips:'21',abbr:'KY'},'Louisiana':{fips:'22',abbr:'LA'},'Maine':{fips:'23',abbr:'ME'},'Maryland':{fips:'24',abbr:'MD'},'Massachusetts':{fips:'25',abbr:'MA'},'Michigan':{fips:'26',abbr:'MI'},'Minnesota':{fips:'27',abbr:'MN'},'Mississippi':{fips:'28',abbr:'MS'},'Missouri':{fips:'29',abbr:'MO'},'Montana':{fips:'30',abbr:'MT'},'Nebraska':{fips:'31',abbr:'NE'},'Nevada':{fips:'32',abbr:'NV'},'New Hampshire':{fips:'33',abbr:'NH'},'New Jersey':{fips:'34',abbr:'NJ'},'New Mexico':{fips:'35',abbr:'NM'},'New York':{fips:'36',abbr:'NY'},'North Carolina':{fips:'37',abbr:'NC'},'North Dakota':{fips:'38',abbr:'ND'},'Ohio':{fips:'39',abbr:'OH'},'Oklahoma':{fips:'40',abbr:'OK'},'Oregon':{fips:'41',abbr:'OR'},'Pennsylvania':{fips:'42',abbr:'PA'},'Puerto Rico':{fips:'72',abbr:'PR'},'Rhode Island':{fips:'44',abbr:'RI'},'South Carolina':{fips:'45',abbr:'SC'},'South Dakota':{fips:'46',abbr:'SD'},'Tennessee':{fips:'47',abbr:'TN'},'Texas':{fips:'48',abbr:'TX'},'Utah':{fips:'49',abbr:'UT'},'Vermont':{fips:'50',abbr:'VT'},'Virginia':{fips:'51',abbr:'VA'},'Washington':{fips:'53',abbr:'WA'},'West Virginia':{fips:'54',abbr:'WV'},'Wisconsin':{fips:'55',abbr:'WI'},'Wyoming':{fips:'56',abbr:'WY'}};Drupal.VizMapHelper.parsePipe=function(toParse){const target="|";let position=-1;if(txt.indexOf(pipe)!=position)position=txt.indexOf(pipe);else position=toParse.length;return toParse.slice(0,position);};Drupal.VizMapHelper.getStateName=function(fipscd){switch(fipscd){case "00":st="US";break;case "01":st="Alabama";break;case "02":st="Alaska";break;case "04":st="Arizona";break;case "05":st="Arkansas";break;case "06":st="California";break;case "08":st="Colorado";break;case "09":st="Connecticut";break;case "10":st="Delaware";break;case "11":st="District of Columbia";break;case "12":st="Florida";break;case "13":st="Georgia";break;case "15":st="Hawaii";break;case "16":st="Idaho";break;case "17":st="Illinois";break;case "18":st="Indiana";break;case "19":st="Iowa";break;case "20":st="Kansas";break;case "21":st="Kentucky";break;case "22":st="Louisiana";break;case "23":st="Maine";break;case "24":st="Maryland";break;case "25":st="Massachusetts";break;case "26":st="Michigan";break;case "27":st="Minnesota";break;case "28":st="Mississippi";break;case "29":st="Missouri";break;case "30":st="Montana";break;case "31":st="Nebraska";break;case "32":st="Nevada";break;case "33":st="New Hampshire";break;case "34":st="New Jersey";break;case "35":st="New Mexico";break;case "36":st="New York";break;case "37":st="North Carolina";break;case "38":st="North Dakota";break;case "39":st="Ohio";break;case "40":st="Oklahoma";break;case "41":st="Oregon";break;case "42":st="Pennsylvania";break;case "44":st="Rhode Island";break;case "45":st="South Carolina";break;case "46":st="South Dakota";break;case "47":st="Tennessee";break;case "48":st="Texas";break;case "49":st="Utah";break;case "50":st="Vermont";break;case "51":st="Virginia";break;case "53":st="Washington";break;case "54":st="West Virginia";break;case "55":st="Wisconsin";break;case "56":st="Wyoming";break;case "72":st="Puerto Rico";break;default:st="N/A";};return st;};})(Drupal);;
var mainviz_state_change=function(st){};var mainviz_year_change=function(yr){};var state_changed=false;var TITLE_I_PART_A='Title I, Part A';var TITLE_I_PART_C='Title I, Part C';var TITLE_I_PART_D='Title I, Part D';var MCKINNEY_VENTO='McKinney-Vento Act';var TITLE_III='Title III';var EDUCATORS='Educators';var CHRONIC_ABSENTEEISM='Chronic Absenteeism';const educator_default="inexperienced_pct";const chronic_asenteeism_default="inexperienced_pct";var currentMap="";var isDistrictZoomed=false;var isCADistrictZoomed=false;var hideLegend=false;var disableStateClick=false;var disableDistrictZoom=false;var educator_keys=new Object();(function($,Drupal,geoAlbersUsaPr){var checkReadyState=setInterval(()=&gt;{if(document.readyState==='complete'){clearInterval(checkReadyState);buildLeaMap();}},100);function buildLeaMap(){var width=800;var height=500;var formatPercent=d3.format(".0%");var selected_state="All";var states=d3.select("#states");var stateborders=d3.select("#state-borders");var districts=d3.select("#districts");var active=d3.select(null);var mapdata=d3.map();var statemapdata=d3.map();var stateds;var tooltips=[];var sttooltips=[];var dlatest=0;var paramString=window.location.search;var currentMap="";var projection=geoAlbersUsaPr().scale([960]).translate([width/2,height/2]);var path=d3.geoPath().projection(projection);var path2=d3.geoPath().projection(projection);var statebordersfeature;var lowval=0;var highval=10000;var statehighval=56000;var statelowval=100;var legend_text="";var yr=$('#edit-school-year option:selected').val();var current_state_name=$("#edit-state option:selected").text();var current_state_tid=$('#edit-school-year option:selected').val();var dt=new Date();tm=dt.getTime();param1=$("article").attr("paramnum");param2=$("section#primary").attr("paramnum");var tooltip=d3.select('body').append('div').attr('class','tooltipx').attr('id','tooltipx').classed('tthide',true);var program_name=$("#edit-program option:selected").text();const mainSVG=d3.selectAll('svg#mapWrapper');const defs=mainSVG.append("defs");const pattern=defs.append("pattern").attr("id",`hashed`).attr("height",1).attr("width","10%").attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(-25)");pattern.append("rect").attr("height",0.5).attr("width","100%").attr("fill",'lightgray').attr("patternUnits","userSpaceOnUse");pattern.append("rect").attr("height",0.5).attr("width","100%").attr("y",0.5).attr("fill",'gray').attr("patternUnits","userSpaceOnUse");const statePattern=defs.append("pattern").attr("id",`stateHashed`).attr("height",10).attr("width","10%").attr("patternUnits","userSpaceOnUse").attr("patternTransform","rotate(-25)");statePattern.append("rect").attr("height",5).attr("width","100%").attr("fill",'lightgray').attr("patternUnits","userSpaceOnUse");statePattern.append("rect").attr("height",5).attr("width","100%").attr("y",5).attr("fill",'gray').attr("patternUnits","userSpaceOnUse");if(program_name.indexOf(TITLE_I_PART_D)&gt;=0){if(program_name==='Title I, Part D, Subpart 1')disableDistrictZoom=true;program_name=TITLE_I_PART_D;}var firstrun=true;if(!Drupal.VizMapHelper.checkIsIE()){lea_usmap_callback="/api/v2/"+param1+"/"+param2+"?sy="+yr+"&amp;type=json";lea_update(lea_usmap_callback);}$('#zoomOutWrapper').on('click',function(e){var spinner=createSpinner();startSpinner(spinner);resetDataNotes(e);reset(e);setTimeout(function(){stopZoomOutSpinner(spinner);},2500);});$('#zoomOutWrapper').on('keydown',function(e){if(e.key=='Enter'||e.key==' ')$(this).trigger('click');});var api_v2=[];var show_tooltips=true;var hide_tooltips=false;var visualization_message="";var displayPlaceholderChart=false;var displayMissingDataIcon=false;var disableZoom=false;function lea_update(lea_usmap_callback){yr=$('#edit-school-year option:selected').val();current_state_tid=$('#edit-state option:selected').val();updateQueryParams(current_state_tid,yr);var currentHash=new URL(document.URL).hash;currentMap=educator_default;if(currentHash)currentMap=currentHash.slice(1);var files=["/modules/custom/visualizations/data/us.json?",lea_usmap_callback];var promises=[];files.forEach(function(url){promises.push(d3.json(url));});Promise.all(promises).then(lea_ready);const capitalize=(string)=&gt;{return string.charAt(0).toUpperCase()+string.slice(1).toLowerCase();};const getObjKey=(obj,value)=&gt;{return Object.keys(obj).find((key)=&gt;obj[key]===value);};const mapTable=()=&gt;{let param1=$("article").attr("paramnum");let param2=$("section#primary").attr("paramnum");var yr=$('#edit-school-year option:selected').val();let lea_usmap_callback="/api/v2/"+param1+"/"+param2+"?sy="+yr+"&amp;type=json";fetch(lea_usmap_callback).then((r)=&gt;r.json()).then(function(data){var state_lookup=data.api_v2.data.requestParams[4].state_lookup;let map_data=data.data;buildMapTable(map_data,state_lookup);}).catch((e)=&gt;console.log(e));};const buildHeaderValues=(data)=&gt;{const headerValues='';return headerValues;};const buildMapTable=(data,state_lookup)=&gt;{$('.state-chart-accessible-table').remove();$('.us-chart-accessible-table').remove();data=Object.entries(data);let table=`
      &lt;table class="us-chart-accessible-table chart-accessible-table"&gt;
        &lt;tbody&gt;
          ${buildTableRows(data,state_lookup)}
        &lt;/tbody&gt;
      &lt;/table&gt;
      &lt;br&gt;
      `;$('#mainVizAccessibleContent').append(table);Drupal.VizChartHelper?.renderAccessibleTableDialog('',educatorParseValue(educator_keys[currentMap],true),'mainViz');};const buildTableRows=(row_data,state_lookup)=&gt;{return row_data.map((item,index)=&gt;{if(index===0)return `&lt;tr&gt;
                ${buildHeaderData(item,state_lookup)}
                &lt;/tr&gt;
                &lt;tr&gt;
                &lt;!--build row data--&gt;
                ${buildRowData(item,state_lookup)}
                &lt;/tr&gt;
                `;else return `&lt;tr&gt;
                &lt;!--build row data--&gt;
                ${buildRowData(item,state_lookup)}
              &lt;/tr&gt;`;}).join('');};let labelMap={all_students_grad_rate:"All Students Graduation Rate",econ_disadv_grad_rate:"Economically Disadvantaged Graduation Rate",all_students_cohort_count:"All Students Cohort Count",econ_disadv_cohort_count:"Economically Disadvantaged Cohort Count",ADLTCORR:"Adult Correction",ALL:"All",ATRISK:"At Risk",JUVCORR:"Juvenile Correction",JUVDET:"Juvenile Detention",NEGLECT:"Neglected Programs",OTHER:"Other",inexperienced_pct:"Percent inexperienced teachers",emergency_pct:"Percent teachers with emergency or provisional credentials",not_teaching_in_field_pct:"Percent teachers teaching out of field",not_fully_certified_pct:"Percent teachers teaching not fully certified",all_teachers:"All teachers",inexperienced:"Inexperienced",emergency_or_provisional:"Emergency or provisional",not_teaching_in_field:"Not Teaching in Field",all_teachers_ti:"All Title II Teachers",not_fully_certified:"Title II Teachers who are not fully certified",absent_kids:"Absent Kids",all_students:"All Students",old_absent_kids:"Old Absent Kids",old_all_students:"Old All Students",old_inexperienced_pct:"Old Inexperienced Percent",pct_difference:"Percent Difference",pct_difference_den:"Percent Difference Denominator",pct_difference_num:"Percent Difference Numerator"};const buildHeaderData=(header_data)=&gt;{let state=header_data[0];header_data=Object.entries(header_data[1]);if(program_name=="Chronic Absenteeism"){const curr_year=$('#edit-school-year option:selected').text();header_values_to_return=["State","Percent Students Who Are Chronically Absent for SY "+curr_year,"Percent Students Who Are Chronically Absent 3 Years Prior","Percent Point difference of Percent Students Who are Chronically Absent From 3 Years Prior","Chronically Absent Students for SY "+curr_year,"Chronically Absent Students 3 Years Prior","Percent Change of Number of Chronically Absent Students From 3 Years Prior","All Students for SY "+curr_year,"All Students 3 Years Prior","Percent Change of Number of All Students From 3 Years Prior"];return '&lt;th&gt;'+header_values_to_return.join(`&lt;/th&gt;&lt;th&gt;`)+`&lt;/th&gt;`;}header_data.unshift(state);return header_data.map(function(row,index){if(index===0)return `&lt;th&gt;State&lt;/th&gt;`;else{const headerLabels=row[0];return `&lt;th&gt;${labelMap[row[0]]}&lt;/th&gt;`;}}).join("");};const buildRowData=(row_data,state_lookup)=&gt;{console.log("building sea table rows");let state=row_data[0];state=capitalize(getObjKey(state_lookup,state));row_data=Object.entries(row_data[1]);if(program_name=="Chronic Absenteeism"){const hm=row_data.reduce((acc,[key,values])=&gt;{acc[key]=values;return acc;},{});let new_row_data=[hm["inexperienced_pct"][1],hm["old_inexperienced_pct"][1],hm["pct_difference"][1],hm["absent_kids"][3],hm["old_all_students"][3],hm["pct_difference_num"][1],hm["all_students"][2],hm["old_absent_kids"][2],hm["pct_difference_den"][1]];row_data_to_return=[`&lt;th&gt;${state}&lt;/th&gt;`];for(const row of new_row_data)row_data_to_return.push(`&lt;td&gt;${row}&lt;/td&gt;`);return row_data_to_return.join("");}row_data.unshift(state);return row_data.map(function(row,index){if(index===0)return `&lt;th&gt;${row}&lt;/th&gt;`;else return `&lt;td&gt;${row[1][1]}&lt;/td&gt;`;}).join("");};function lea_ready(values){var us=values[0];var statevalues=values[1];var tooltipTemplate=statevalues['tooltip'];if(program_name=="Educators"||program_name=="Chronic Absenteeism"){var currentHash=new URL(document.URL).hash;if(currentHash)currentMap=currentHash.slice(1);else if(currentMap.length&gt;0){newURL=new URL(document.URL);newURL.hash=('#'+currentMap.toString());document.location.href=newURL;}else currentMap=educator_default;if(statevalues){Object.keys(statevalues['descriptor']).forEach(function(k){Object.keys(statevalues['descriptor'][k]).forEach(function(v){educator_keys[v]=statevalues['descriptor'][k][v];});});var educatorArray=Object.keys(educator_keys);if(program_name=="Educators"&amp;&amp;educatorArray.includes(currentMap)){educatorLegend(4);changeMainTitle();}if(program_name=="Chronic Absenteeism"&amp;&amp;educatorArray.includes(currentMap)){educatorLegend(2);changeMainTitle();}}}var range_min=0;var range_max=100;if(statevalues.hasOwnProperty('EducatorRange')&amp;&amp;educatorArray.includes(currentMap)){if(Drupal.VizMapHelper.isNumeric(statevalues['EducatorRange'][currentMap]['min']))range_min=statevalues['EducatorRange'][currentMap]['min'];if(Drupal.VizMapHelper.isNumeric(statevalues['EducatorRange'][currentMap]['max']))range_max=statevalues['EducatorRange'][currentMap]['max'];}else{if(Drupal.VizMapHelper.isNumeric(statevalues['range']['min']))range_min=statevalues['range']['min'];if(Drupal.VizMapHelper.isNumeric(statevalues['range']['max']))range_max=statevalues['range']['max'];}if("api_v2" in values[1]){api_v2=values[1]['api_v2'];if("options" in api_v2.data){if('hideToolTips' in api_v2.data.options){hide_tooltips=api_v2.data.options.hideToolTips;if(hide_tooltips===true)show_tooltips=false;}if('visualizationMessage' in api_v2.data.options)visualization_message=api_v2.data.options.visualizationMessage;if('displayPlaceholderChart' in api_v2.data.options)displayPlaceholderChart=api_v2.data.options.displayPlaceholderChart;if('displayMissingDataIcon' in api_v2.data.options){displayMissingDataIcon=api_v2.data.options.displayMissingDataIcon;if(displayMissingDataIcon){setHideLegend(true);setDisableStateClick(true);}}if('legendText' in api_v2.data.options)legend_text=api_v2.data.options.legendText;}}var pctg=false;if(program_name==MCKINNEY_VENTO||program_name==TITLE_I_PART_A||program_name==TITLE_III||program_name==EDUCATORS||program_name==CHRONIC_ABSENTEEISM)pctg=true;var legendScale=Drupal.VizMapHelper.getLegendScale(range_min,range_max);var tooltipTokens=getTooltipTokens(tooltipTemplate);tooltips=generateUSLevelTooltips(tooltipTemplate,tooltipTokens,statevalues.data,values[1]['api_v2']['data']['tooltipUsData']);let statevalues_data=statevalues.data;let pathIndex=0;states.append('g').attr('class','states').selectAll('path').data(topojson.feature(us,us.objects.states).features).enter().append('path').attr('tabindex','-1').attr('aria-selected','false').attr('fill',function(d){let stfp=Drupal.VizMapHelper.getFipAsStr(d.id);let state_tid=Drupal.VizMapHelper.fips2tid(stfp);let num=-9999;if(displayMissingDataIcon)num=-9999;else if(typeof mapdata.get(stfp)=='undefined')num=-9999;else if(program_name===EDUCATORS||program_name===CHRONIC_ABSENTEEISM){if(typeof state_tid!='undefined'&amp;&amp;typeof currentMap!='undefined')if(typeof statevalues_data[state_tid][currentMap]!='undefined'){let state_string_value=statevalues_data[state_tid][currentMap][1];num=Drupal.VizMapHelper.cleanTextValueString(state_string_value);}}else num=Drupal.VizMapHelper.checkForNaOrSuppressed(mapdata.get(stfp));if(program_name===CHRONIC_ABSENTEEISM)if(num&lt;-50)if(num===-9999)return "url('#stateHashed')";else return "lightgray";else return legendScale(num);else if(num&lt;0)if(num===-9999)return "url('#stateHashed')";else return "lightgray";else return legendScale(num);}).attr('d',path).attr('stroke',function(d){if(displayMissingDataIcon)return "white";else return "black";}).attr('stroke-width','.25px').attr('id',function(d){return 's'+d.id;}).attr('data-index',function(d){let index=pathIndex;pathIndex=parseInt(pathIndex)+1;return index;}).attr('data-name',function(d){return getDataName(d);}).on('mousemove focus',function(d){if(document.activeElement&amp;&amp;document.activeElement!=d3.event.srcElement)document.activeElement.blur();let stfp=Drupal.VizMapHelper.getFipAsStr(d.id);let st=Drupal.VizMapHelper.getStateName(stfp);let str='';str='&lt;p class="statename" style="font-weight: bold;"&gt;'+st+'&lt;/p&gt;';str+='&lt;p class="datarow"&gt;';if(typeof tooltips[stfp]=="string")str+=tooltips[stfp];else str+="Data not available.";str+='&lt;/p&gt;';let pageX=0;let pageY=0;if(d3.event.toString()=='[object MouseEvent]'){pageX=d3.event.pageX;pageY=d3.event.pageY;}else{const boundingRect=d3.event.srcElement.getBoundingClientRect();pageX=window.scrollX+boundingRect.x+(boundingRect.width/2);pageY=window.scrollY+boundingRect.y+(boundingRect.height/2);}tooltip.classed('tthide',false).style("left",pageX+"px").style("top",pageY+"px").style("display","inline-block").html(str);d3.event.srcElement.setAttribute('aria-selected','true');d3.event.srcElement.setAttribute('aria-labelledby','tooltipx');}).on('mouseout blur',function(d){d3.event.srcElement.setAttribute('aria-selected','false');d3.event.srcElement.removeAttribute('aria-labelledby');tooltip.classed('tthide',true);}).on('click',mapStateClicked).on('keydown',function(d){if(d3.event.key=='Enter'||d3.event.key==' '){mapStateClicked(d);return false;}else if(d3.event.key=='ArrowLeft'){currentElement=d3.event.srcElement;let currentIndex=currentElement.getAttribute('data-index');let allStatePaths=document.querySelectorAll('#states .states path');let previousElement=allStatePaths.item(parseInt(currentIndex)-1);if(!previousElement)previousElement=allStatePaths.item(allStatePaths.length-1);previousElement.tabIndex=0;currentElement.tabIndex=-1;previousElement.focus();return false;}else{if(d3.event.key=='ArrowRight'){currentElement=d3.event.srcElement;let currentIndex=currentElement.getAttribute('data-index');let allStatePaths=document.querySelectorAll('#states .states path');let nextElement=allStatePaths.item(parseInt(currentIndex)+1);if(!nextElement)nextElement=allStatePaths.item(0);nextElement.tabIndex=0;currentElement.tabIndex=-1;nextElement.focus();return false;}}});mapTable();states.select('.states path').node().setAttribute('tabindex','0');statebordersfeature=topojson.mesh(us,us.objects.states,function(a,b){return a!==b;});stateborders.append("path").attr("class","state-borders").attr("d",path(statebordersfeature));div=100;highval=range_max;lowval=range_min;if(!hideLegend){drawLegend(highval,lowval,legend_text,div,pctg,legendScale);const legendWrapper=document.querySelector('#mainLegendWrapper');if($('div.sub-legend').length==0)if(program_name!="Chronic Absenteeism"){const subLegend=`&lt;div class="sub-legend"&gt;&lt;svg viewBox="10 10 10 2" xmlns="http://www.w3.org/2000/svg"&gt;&lt;g&gt;&lt;rect height="20" width="30" fill="url('#hashed')"&gt;&lt;/rect&gt;&lt;/g&gt;&lt;/svg&gt;&lt;p&gt;Suppressed (S), not available (N/A), or missing&lt;/p&gt; &lt;/div&gt; &lt;div class="sub-legend"&gt;&lt;svg viewBox="10 10 10 2" xmlns="http://www.w3.org/2000/svg"&gt;&lt;g&gt;&lt;rect height="20" width="30" fill="lightgray"&gt;&lt;/rect&gt;&lt;/g&gt;&lt;/svg&gt;&lt;p&gt;Data are blurred with a percentage range greater than 10 percent&lt;/p&gt;&lt;/div&gt;`;legendWrapper.innerHTML+=subLegend;}else{const subLegend=`&lt;div class="sub-legend"&gt;&lt;svg viewBox="10 10 10 2" xmlns="http://www.w3.org/2000/svg"&gt;&lt;g&gt;&lt;rect height="20" width="30" fill="url('#hashed')"&gt;&lt;/rect&gt;&lt;/g&gt;&lt;/svg&gt;&lt;p&gt;Suppressed (S), not available (N/A), or missing&lt;/p&gt; &lt;/div&gt;`;legendWrapper.innerHTML+=subLegend;}}if(displayMissingDataIcon){$('.map-no-data-display').css('display','block');$('.map-no-data-message').html(visualization_message);}if(firstrun){firstrun=false;var stateNameParam=getParameterByName('s');if(stateNameParam!==null){var stateTid=stateNameParam;selstate=$('#edit-state option[value="'+stateTid+'"]').text();}else selstate=$("#edit-state option:selected").text();if(selstate!=='US'){fips=Drupal.VizMapHelper.state_info[selstate].fips;if(fips.substr(0,1)=="0")fips=fips.substr(1);state_changed=true;var selection=d3.select("#s"+fips);var event=document.createEvent("SVGEvents");event.initEvent("click",true,true);selection.node().dispatchEvent(event);}}$('#zoomOutWrapper').css('display','none').attr('tabindex','-1');}d3.selectAll('#mapWrapper').style('cursor','zoom-in');}function getDataName(d){stfp=Drupal.VizMapHelper.getFipAsStr(d.id);n=mapdata.get(stfp);sn=Drupal.VizMapHelper.getStateName(stfp);str=sn;if(typeof n!=="undefined")str=str+": "+n;return str;}function getTooltipTokens(tooltipTemplate){var pattern=/(\[([a-zA-Z.]*_*)+\]%*)/g;var tooltipTokens=new Map();while((match=pattern.exec(tooltipTemplate))!=null){var isPerc=false;var clean_match=match[0].replace('[','').replace(']','');if(clean_match.indexOf('%')&gt;-1){isPerc=true;clean_match=clean_match.replace('%','');}tooltipTokens.set(clean_match,isPerc);}return tooltipTokens;}function generateUSLevelTooltips(tooltipTemplate,tooltipTokens,statevalues_data,usvalues){var us_tooltips=[];var map_value_tokens_by_program=[];map_value_tokens_by_program.push({'McKinney-Vento Act':'perc_sea_student_count'});for(var state_tid in statevalues_data)if(!isNaN(parseFloat(state_tid))&amp;&amp;isFinite(state_tid)){var state_name=$("#edit-state option[value='"+state_tid+"']").html();if(state_name!='Bureau Of Indian Education')var state_fips=Drupal.VizMapHelper.state_info[state_name].fips;var tooltip=tooltipTemplate;var counter=0;currentMap=educator_default;var currentHash=new URL(document.URL).hash;if(currentHash)currentMap=currentHash.slice(1);tooltipTokens.forEach(function(isPerc,token){if(typeof statevalues_data[state_tid][token]!='undefined'){var map_value=statevalues_data[state_tid][token][0];if(program_name!="Chronic Absenteeism")var tooltip_value=statevalues_data[state_tid][token][1];else{if(token=='absent_kids'||token=='old_absent_kids')var tooltip_value=statevalues_data[state_tid][token][3];else if(token=='all_students'||token=='old_all_students')var tooltip_value=statevalues_data[state_tid][token][2];else if(token=='pct_difference')if(statevalues_data[state_tid][token][1]!='N/A')var tooltip_value=statevalues_data[state_tid][token][1]+' percentage point change';else var tooltip_value=statevalues_data[state_tid][token][1];else if(token=='pct_difference_num'||token=='pct_difference_den')if(statevalues_data[state_tid][token][1]!='N/A')var tooltip_value=statevalues_data[state_tid][token][1]+' percent change';else var tooltip_value=statevalues_data[state_tid][token][1];else var tooltip_value=statevalues_data[state_tid][token][1];if(tooltip_value=='0'||tooltip_value==''||tooltip_value=='MISSING')tooltip_value='N/A';}if(map_value_tokens_by_program[0].hasOwnProperty(program_name)){var map_value=0;map_value=statevalues_data[state_tid][map_value_tokens_by_program[0][program_name]][0];mapdata.set(state_fips,map_value);}else if(program_name=="Educators"||program_name=="Chronic Absenteeism"){var map_value=0;if(token==currentMap){map_value=statevalues_data[state_tid][currentMap][0];mapdata.set(state_fips,map_value);}}else{if(counter==0){if(!Drupal.VizMapHelper.isNumeric(map_value))map_value=0;mapdata.set(state_fips,map_value);}}if(program_name!="Chronic Absenteeism")tooltip_value=Drupal.VizMapHelper.replaceAll(tooltip_value,'%','');if(Drupal.VizMapHelper.isNumeric(tooltip_value))tooltip_value=Drupal.VizMapHelper.numberWithCommas(tooltip_value);tooltip=tooltip.replace('['+token+']',' '+tooltip_value);}else if(token.substring(0,3)=='us_'){var us_tooltip_value='';switch(token){case 'us_all_students_grad_rate':us_tooltip_value=usvalues['t0'][1];break;case 'us_econ_disadv_grad_rate':us_tooltip_value=usvalues['t1'][1];break;case 'us_all_students_cohort_count':us_tooltip_value=usvalues['t2'][1];break;case 'us_econ_disadv_cohort_count':us_tooltip_value=usvalues['t3'][1];break;default:us_tooltip_value='N/A';}tooltip=tooltip.replace('['+token+']',Drupal.VizMapHelper.numberWithCommas(us_tooltip_value));}else tooltip=tooltip.replace('['+token+']','N/A');counter++;});tooltip=Drupal.VizMapHelper.replaceAll(tooltip,'&lt;p&gt;','');tooltip=Drupal.VizMapHelper.replaceAll(tooltip,'&lt;/p&gt;','&lt;br/&gt;');tooltip=Drupal.VizMapHelper.replaceAll(tooltip,'N/A%','N/A');tooltip=Drupal.VizMapHelper.replaceAll(tooltip,'S%','S');tooltip=Drupal.VizMapHelper.replaceAll(tooltip,'%%','%');us_tooltips[state_fips]=tooltip;counter++;}return us_tooltips;}function showStateMap(fips){if(!disableZoom){d3.selectAll('svg#zoomOutWrapper').style('display','block').attr('tabindex','0');var spinner=createSpinner();startSpinner(spinner);var leaIdList=[];pathtemp=path2;var school_year=$('#edit-school-year option:selected').text();statehighval=0;statehighleaid=0;fips=Drupal.VizMapHelper.getFipAsStr(fips);sttid=Drupal.VizMapHelper.fips2tid(fips);stateds=defaultRequest(param1,param2,sttid);selected_state=fips;var files=["/modules/custom/visualizations/data/map-json-by-sy/"+school_year+"/d-"+fips+".json?"+tm,stateds];var promises=[];files.forEach(function(url){promises.push(d3.json(url));});Promise.all(promises).then(map_ready);$('.state-chart-accessible-table').remove();const buildRowData=(row_data)=&gt;{let district=row_data[1].n;let lea_id=row_data[0];row_data=Object.entries(row_data[1].data);if(program_name=="Chronic Absenteeism"){const hm=row_data.reduce((acc,[key,values])=&gt;{acc[key]=values;return acc;},{});let new_row_data=[hm["t0"][1],hm["t2"][1],hm["t1"][1],hm["t3"][2],hm["t6"][2],hm["t7"][1],hm["t4"][3],hm["t5"][3],hm["t8"][1]];row_data_to_return=[`&lt;th&gt;${district}&lt;/th&gt;`,`&lt;td&gt;${lea_id}&lt;/td&gt;`];for(const row of new_row_data)row_data_to_return.push(`&lt;td&gt;${row}&lt;/td&gt;`);return row_data_to_return.join("");}row_data=[district,lea_id,...row_data];return row_data.map(function(row,index){if(index===0)return `&lt;th&gt;${row}&lt;/th&gt;`;else if(index===1)return `&lt;td&gt;${row}&lt;/td&gt;`;else return `&lt;td&gt;${row[1][1]}&lt;/td&gt;`;}).join("");};const labelMap={all_students_grad_rate:"All Students Graduation Rate",econ_disadv_grad_rate:"Economically Disadvantaged Graduation Rate",all_students_cohort_count:"All Students Cohort Count",econ_disadv_cohort_count:"Economically Disadvantaged Cohort Count",ADLTCORR:"Adult Correction",ALL:"All",ATRISK:"At Risk",JUVCORR:"Juvenile Correction",JUVDET:"Juvenile Detention",NEGLECT:"Neglected Programs",OTHER:"Other",t0:"Inexperienced Teachers",t1:"Emergency or Provisional Teachers",t2:"Out of Field Teachers",t3:"All Title III Teachers who are not fully certified",t4:"All Teachers",t5:"Inexperienced Teachers",t6:"Emergency or Provisional Teachers",t7:"Out of Field Teachers",t8:"All Teachers",t9:"All Title III Teachers who are not fully certified"};const buildHeaderData=(header_data)=&gt;{if(program_name=="Chronic Absenteeism"){const curr_year=$('#edit-school-year option:selected').text();header_values_to_return=["District","LEA ID","Percent Students Who Are Chronically Absent for SY "+curr_year,"Percent Students Who Are Chronically Absent 3 Years Prior","Percent Point difference of Percent Students Who are Chronically Absent From 3 Years Prior","Chronically Absent Students for SY "+curr_year,"Chronically Absent Students 3 Years Prior","Percent Change of Number of Chronically Absent Students From 3 Years Prior","All Students for SY "+curr_year,"All Students 3 Years Prior","Percent Change of Number of All Students From 3 Years Prior"];return '&lt;th&gt;'+header_values_to_return.join(`&lt;/th&gt;&lt;th&gt;`)+`&lt;/th&gt;`;}let header_labels=[];let program=$('select[name="program"]  option:selected').text();let state=header_data[0];let header_values=Object.entries(header_data[1]);let rowData=Object.entries(header_values[1][1]);if(program==="Title I, Part A")header_labels=['all_students_grad_rate','econ_disadv_grad_rate','all_students_cohort_count','econ_disadv_cohort_count'];else header_labels=array_keys(header_values[1][1]);let header_array=[header_data[0],header_data[1].n,...header_labels];return header_array.map(function(row,index){if(index===0)return `&lt;th&gt;District&lt;/th&gt;`;else if(index===1)return `&lt;th&gt;LEA ID&lt;/th&gt;`;else return `&lt;th&gt;${labelMap[row]}&lt;/th&gt;`;}).join("");};const buildTableRows=(row_data)=&gt;{row_data=Object.entries(row_data);return row_data.map((item,index)=&gt;{if(item[0]!=='range')if(index===0)return `&lt;tr&gt;
                    ${buildHeaderData(item)}
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;!--build row data--&gt;
                    ${buildRowData(item)}
                  &lt;/tr&gt;`;else return `&lt;tr&gt;
                  &lt;!--build row data--&gt;
                  ${buildRowData(item)}
                &lt;/tr&gt;`;}).join('');};function buildStateTable(data){let table=`
            &lt;table class="state-chart-accessible-table chart-accessible-table"&gt;
              &lt;tbody&gt;
                ${buildTableRows(data.leas)}
              &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;br&gt;
          `;$('#mainVizAccessibleContent').prepend(table);Drupal.VizChartHelper?.renderAccessibleTableDialog('',educatorParseValue(educator_keys[currentMap],true),'mainViz');}function map_ready(values){var us=values[0];var currentHash=new URL(document.URL).hash;currentMap=educator_default;if(currentHash)currentMap=currentHash.slice(1);var districtdata=topojson.feature(us,us.objects.districts);leaIdList=Drupal.VizMapHelper.getStateLEAIdList(districtdata.features);var districtinfo=values[1];buildStateTable(districtinfo);var hasData=(districtinfo.length==0)?false:true;if(program_name==TITLE_I_PART_A)sttooltips=formatDistrictTooltipTitleIPartA(sttooltips,districtinfo,districtdata,current_state_name);else if(program_name==TITLE_III)sttooltips=formatDistrictTooltipTitleIII(sttooltips,districtinfo,districtdata,current_state_name);else if(program_name==MCKINNEY_VENTO)sttooltips=formatDistrictTooltipMcKinneyVento(sttooltips,districtinfo,districtdata,current_state_name);else if(program_name=="Educators"||program_name=="Chronic Absenteeism"){if(districtinfo.hasOwnProperty('sea_data')){let educator_state_data=districtinfo['sea_data'];let sea_tokens=getTooltipTokens(districtinfo['tooltip']);let us_data=[];if(districtinfo.sea_data.hasOwnProperty('map')){}let sea_tooltips=generateUSLevelTooltips(districtinfo['tooltip'],sea_tokens,educator_state_data,us_data);districtinfo['tooltip']=sea_tooltips;sttooltips=formatDistrictTooltipEducator(sttooltips,districtinfo,districtdata,current_state_name);}}else sttooltips=formatDistrictTooltipOther(sttooltips,districtinfo,districtdata,current_state_name);if(program_name==TITLE_I_PART_A||program_name==TITLE_III){statehighval=100;statelowval=0;}else{statehighval=100;statelowval=0;for(let i=0;i&lt;leaIdList.length;i++){let tempLeaId=leaIdList[i];let valueCount=statemapdata.get(tempLeaId);if(valueCount&lt;0)valueCount=undefined;if(statemapdata.get(tempLeaId)!=null)if(!statehighval||valueCount&gt;statehighval)statehighval=valueCount;}}if(program_name=='Educators'||program_name=="Chronic Absenteeism"){var thisHash=extractHash();if(thisHash)currentMap=(typeof currentMap!=='undefined'&amp;&amp;currentMap.length&gt;0)?currentMap:thisHash;resetEducatorButton();educatorArray=Object.keys(educator_keys);var mapIndex=educatorArray.indexOf(currentMap);if(districtinfo['leas']&amp;&amp;districtinfo['leas']['range']){statehighval=districtinfo['leas']['range'][mapIndex]['max'];statelowval=districtinfo['leas']['range'][mapIndex]['min'];if(statehighval==0)statehighval=100;}else{statehighval=districtinfo['range']['max'];statelowval=districtinfo['range']['min'];}}let legendScale=Drupal.VizMapHelper.getLegendScale(statelowval,statehighval);let pathIndex=0;districts.append('g').attr('class','dist').selectAll('path').data(districtdata.features).enter().append('path').attr('tabindex','-1').attr("fill",function(d){var num=-9999;var lea_id=d.properties.id;if((program_name===TITLE_I_PART_A||program_name===TITLE_III)&amp;&amp;(districtinfo&amp;&amp;districtinfo['leas']&amp;&amp;districtinfo.hasOwnProperty('leas'))){obj=districtinfo['leas'][lea_id];if(typeof obj!=="undefined"&amp;&amp;obj.data!=="undefined")num=Drupal.VizMapHelper.getColorMappingForTitleIA(obj.data.t0[1]);else num=-9999;}else if((program_name===MCKINNEY_VENTO)&amp;&amp;(districtinfo&amp;&amp;districtinfo['leas']&amp;&amp;districtinfo.hasOwnProperty('leas'))){obj=districtinfo['leas'][lea_id];if(typeof obj!=="undefined"&amp;&amp;obj.data!=="undefined")num=Drupal.VizMapHelper.checkForNaOrSuppressed(obj.data.t0[1]);else num=-9999;}else if(typeof statemapdata.get(d.properties.id)==="undefined"){num=-9999;statemapdata.set(d.properties.id,num);}else if(program_name==='Educators'||program_name=="Chronic Absenteeism"){var thisHash=extractHash();if(thisHash)currentMap=(typeof currentMap!=='undefined'&amp;&amp;currentMap.length&gt;0)?currentMap:thisHash;var mapIndex=educatorArray.indexOf(currentMap);obj=districtinfo['leas'][lea_id];var currentTarget="t"+mapIndex;if(typeof obj!=="undefined"&amp;&amp;obj.data!=="undefined"){num=obj.data[currentTarget][1];num=Drupal.VizMapHelper.checkForNaOrSuppressed(num);if(num!==-9999){num=num.replace(['%'],"");if(isNaN(num)&amp;&amp;num.includes("-"))num=Drupal.VizMapHelper.getColorMappingForTitleIA(num,program_name);else num=Drupal.VizMapHelper.tryParseInt(num,num);}}}else num=statemapdata.get(d.properties.id);if(program_name===CHRONIC_ABSENTEEISM)if(num&lt;-100)if(num===-9999)return "url('#stateHashed')";else return "lightgray";else return legendScale(num);else if(num&lt;0)if(num===-9999)return "url('#hashed')";else return "lightgray";else return legendScale(num);}).attr('d',pathtemp).attr('stroke','black').attr('stroke-width','.2px').attr('id',function(d){return 'd'+d.properties.id;}).attr('data-index',function(d){let index=pathIndex;pathIndex=parseInt(pathIndex)+1;return index;}).on('mousemove focus',showDistrictLevelData).on('mouseout blur',function(d){d3.event.srcElement.removeAttribute('aria-labelledby');tooltip.classed('tthide',true);}).on('click',zoomDistrictLevel).on('keydown',function(d){if(d3.event.key=='Enter'||d3.event.key==' '){zoomDistrictLevel(d);return false;}else if(d3.event.key=='ArrowLeft'){currentElement=d3.event.srcElement;let currentIndex=currentElement.getAttribute('data-index');let allDistPaths=document.querySelectorAll('#districts .dist path');let previousElement=allDistPaths.item(parseInt(currentIndex)-1);if(!previousElement)previousElement=allDistPaths.item(allDistPaths.length-1);previousElement.tabIndex=0;currentElement.tabIndex=-1;previousElement.focus();return false;}else{if(d3.event.key=='ArrowRight'){currentElement=d3.event.srcElement;let currentIndex=currentElement.getAttribute('data-index');let allDistPaths=document.querySelectorAll('#districts .dist path');let nextElement=allDistPaths.item(parseInt(currentIndex)+1);if(!nextElement)nextElement=allDistPaths.item(0);nextElement.tabIndex=0;currentElement.tabIndex=-1;nextElement.focus();return false;}}});districts.select('.dist path').attr('tabindex',0);if(hasData){var legendtext='';var highval=statehighval;var lowval=0;var divisor=1;var isPerc=false;if(program_name==TITLE_I_PART_A){highval=100;legendtext='Percentage (Colors based on "All Students Graduation Rate")';isPerc=true;lowval=statelowval;divisor=100;}else if(program_name==TITLE_III){highval=100;legendtext='District colors based on values for "Percent who attained proficiency on the ELP"';isPerc=true;divisor=100;}else if(program_name==MCKINNEY_VENTO)legendtext='Number of Homeless Students Enrolled';else{if(program_name=='Educators'||program_name=='Chronic Absenteeism'){isPerc=true;divisor=100;}}drawLegend(highval,lowval,legendtext,divisor,isPerc,legendScale);$('#mainLegendWrapper').css('display','block');$('#mainLegend').css('display','block');}var currentState=$('#edit-state option:selected').val();updateCharts(currentState);stopSpinner(spinner);}}}function updateCharts(currentState){yr=$('#edit-school-year option:selected').val();current_state_tid=$('#edit-state option:selected').val();current_state=currentState;updateQueryParams(current_state_tid,yr);if($.isFunction(window.funding_state_change))funding_state_change(currentState);if($.isFunction(window.participation_state_change))participation_state_change(currentState);if($.isFunction(window.performance_state_change))performance_state_change(currentState);setStateLabel();}function setStateLabel(){current_state_name=$("#edit-state option:selected").text();if(current_state_name=="US")current_state_name="United States";$("#primary .statelabel").html(current_state_name);$("#middlebar .statelabel").html(current_state_name);}function setDistrictLabel(e){current_state_name=$("#edit-state option:selected").text();if(current_state_name=="US")current_state_name="United States";$("#primary .statelabel").html(current_state_name);if(program_name=='Chronic Absenteeism')$("#middlebar .statelabel").html(current_state_name+" - "+e.properties.name+"&amp;emsp;NCES ID: "+e.properties.id);else $("#middlebar .statelabel").html(current_state_name);}function updateQueryParams(state_tid,year_tid){var queryParams=new URLSearchParams(window.location.search);var fullUrl=new URL(document.URL);var hash="";hash=fullUrl.hash;queryParams.set("s",state_tid);queryParams.set("sy",year_tid);history.pushState(null,null,"?"+queryParams.toString()+hash);}function createSpinner(){var opts={lines:13,length:38,width:17,radius:45,scale:1,corners:1,color:'#ff8040',fadeColor:'transparent',speed:1,rotate:0,animation:'spinner-line-fade-quick',direction:1,zIndex:2e9,className:'spinner',top:'25%',left:'50%',shadow:'0 0 1px transparent',position:'absolute'};return new Spinner(opts);}function startSpinner(spinner){$('.waiting-block').addClass('active');$('#loader_container').css('display','block');var target=document.getElementById('loader_container');spinner.spin(target);}function stopSpinner(spinner){spinner.stop();$('#loader_container').css('display','none');$('#zoomOutWrapper').css('display','block').attr('tabindex','0');$('.waiting-block').removeClass('active');}function stopZoomOutSpinner(spinner){spinner.stop();$('#loader_container').css('display','none');$('.waiting-block').removeClass('active');}function formatDistrictTooltipOther(sttooltips,districtinfo,districtdata,current_state_name){for(var i=0;i&lt;districtdata.features.length;i++){var alt_programs=["Educators","Chronic Absenteeism"];var alt_program_check=(alt_programs.indexOf(program_name)&gt;-1);var temp_tooltip=(alt_program_check)?districtinfo['tooltip'][Drupal.VizMapHelper.state_info[current_state_name].fips]:districtinfo['tooltip'];var pattern=/\[\d\]/g;var val_count=((temp_tooltip||'').match(pattern)||[]).length;var feature=districtdata.features[i];var district_id=feature.properties.id;var district_name=feature.properties.name;if(districtinfo.hasOwnProperty('leas'))if(districtinfo['leas'].hasOwnProperty(district_id)){var dist=districtinfo['leas'][district_id];if(typeof dist!="undefined"){var state_map_value=dist.data.t0[0];var tmp_str=state_map_value+"";tmp_str=tmp_str.replace(',','');state_map_value=parseInt(tmp_str);statemapdata.set(district_id,state_map_value);var c=0;while(typeof dist.data['t'+c]!="undefined"){var datazero=dist.data['t'+c][0];if(datazero)datazero=datazero.toLocaleString();if(program_name==="Chronic Absenteeism"){if(c==3||c==5)var val=dist.data['t'+c][2]?dist.data['t'+c][2]:datazero;else if(c==4||c==6)var val=dist.data['t'+c][3]?dist.data['t'+c][3]:datazero;else if(c==1)if(dist.data['t'+c][1]=='N/A')var val=dist.data['t'+c][1]?dist.data['t'+c][1]:datazero;else var val=dist.data['t'+c][1]?dist.data['t'+c][1]+' percentage point change':datazero;else if(c==7||c==8)if(dist.data['t'+c][1]=='N/A')var val=dist.data['t'+c][1]?dist.data['t'+c][1]:datazero;else var val=dist.data['t'+c][1]?dist.data['t'+c][1]+' percent change':datazero;else var val=dist.data['t'+c][1]?dist.data['t'+c][1]:datazero;if(val=='MISSING')val='N/A';}else var val=dist.data['t'+c][1]?dist.data['t'+c][1]:datazero;if(typeof val!=="undefined")temp_tooltip=temp_tooltip.replace("["+c+"]",val);else temp_tooltip=temp_tooltip.replace(/\[[0-9]\]/,'N/A');c=c+1;}}}temp_tooltip=replaceEmptyTooltipValues(val_count,temp_tooltip);var str=formatBaseDistrictTooltip(temp_tooltip,current_state_name,district_id,district_name);sttooltips[district_id]=str;}return sttooltips;}function formatDistrictTooltipMcKinneyVento(sttooltips,districtinfo,districtdata,current_state_name){for(var i=0;i&lt;districtdata.features.length;i++){var temp_tooltip=districtinfo['tooltip'];var pattern=/\[\d\]/g;var val_count=((temp_tooltip||'').match(pattern)||[]).length;var feature=districtdata.features[i];var district_id=feature.properties.id;var district_name=feature.properties.name;if(districtinfo.hasOwnProperty('leas'))if(districtinfo['leas'].hasOwnProperty(district_id)){var dist=districtinfo['leas'][district_id];if(typeof dist!="undefined"){var state_map_value=dist.data.t0[0];var tmp_str=state_map_value+"";tmp_str=tmp_str.replace(',','');state_map_value=parseInt(tmp_str);statemapdata.set(district_id,state_map_value);var c=0;while(typeof dist.data['t'+c]!="undefined"){if(c==1)temp_tooltip=temp_tooltip.replace("["+c+"]",dist.data['t1'][1]);else{var datazero=dist.data['t'+c][0];if(datazero)datazero=datazero.toLocaleString();var val=dist.data['t'+c][1]?dist.data['t'+c][1]:datazero;if(typeof val!=="undefined")if(!Drupal.VizMapHelper.isNumeric(val))temp_tooltip=temp_tooltip.replace("["+c+"]",val);else{var val_str=Drupal.VizMapHelper.numberWithCommas(val);temp_tooltip=temp_tooltip.replace("["+c+"]",val_str);}else temp_tooltip=temp_tooltip.replace(/\[[0-9]\]/,'N/A');}c=c+1;}}}temp_tooltip=replaceEmptyTooltipValues(val_count,temp_tooltip);var str=formatBaseDistrictTooltip(temp_tooltip,current_state_name,district_id,district_name);sttooltips[district_id]=str;}return sttooltips;}function formatDistrictTooltipTitleIII(sttooltips,districtinfo,districtdata,current_state_name){var template_tooltip=districtinfo['tooltip'];var tokens=['state','us'];var value_count=4;for(var token of tokens)for(var ti=0;ti&lt;value_count;ti++)if(districtinfo[token].hasOwnProperty('t'+ti)){var value_str=districtinfo[token]['t'+ti][1];value_str=Drupal.VizMapHelper.formatValuesForTooltip(value_str,ti);if(!value_str.includes('%'))if(ti&gt;1)value_str=Drupal.VizMapHelper.numberWithCommas(value_str);template_tooltip=template_tooltip.replace('['+token+'.'+ti+']',value_str);}else template_tooltip=template_tooltip.replace('['+token+'.'+ti+']','N/A');for(var i=0;i&lt;districtdata.features.length;i++){var temp_tooltip=template_tooltip;var feature=districtdata.features[i];var district_id=feature.properties.id;var district_name=feature.properties.name;if(districtinfo['leas'].hasOwnProperty(district_id)&amp;&amp;districtinfo['leas'][district_id].hasOwnProperty('data')){var district_data_vals=districtinfo['leas'][district_id]['data'];for(var i3=0;i3&lt;value_count;i3++){var display_value='N/A';if(typeof district_data_vals['t'+i3]!=='undefined'&amp;&amp;typeof district_data_vals['t'+i3][1]!=='undefined'){display_value=Drupal.VizMapHelper.formatValuesForTooltip(district_data_vals['t'+i3][1],i3);if(!display_value.includes('%'))display_value=Drupal.VizMapHelper.numberWithCommas(display_value);}temp_tooltip=temp_tooltip.replace('[district.'+i3+']',display_value);}}else for(var i4=0;i4&lt;value_count;i4++)temp_tooltip=temp_tooltip.replace('[district.'+i4+']','N/A');temp_tooltip=removeExtraPercentageSymbols(temp_tooltip);sttooltips[district_id]=formatBaseDistrictTooltip(temp_tooltip,current_state_name,district_id,district_name);}return sttooltips;}function formatDistrictTooltipTitleIPartA(sttooltips,districtinfo,districtdata,current_state_name){var template_tooltip=districtinfo['tooltip'];var tokens=['state','us'];var value_count=4;for(var token of tokens)for(var ti=0;ti&lt;value_count;ti++)if(districtinfo[token].hasOwnProperty('t'+ti)){var value_str=districtinfo[token]['t'+ti][1];value_str=Drupal.VizMapHelper.formatValuesForTooltip(value_str,ti);if(!value_str.includes('%'))if(ti&gt;1)value_str=Drupal.VizMapHelper.numberWithCommas(value_str);template_tooltip=template_tooltip.replace('['+token+'.'+ti+']',value_str);}else template_tooltip=template_tooltip.replace('['+token+'.'+ti+']','N/A');for(var i=0;i&lt;districtdata.features.length;i++){var temp_tooltip=template_tooltip;var feature=districtdata.features[i];var district_id=feature.properties.id;var district_name=feature.properties.name;if(districtinfo['leas'].hasOwnProperty(district_id)&amp;&amp;districtinfo['leas'][district_id].hasOwnProperty('data')){var district_data_vals=districtinfo['leas'][district_id]['data'];for(var i3=0;i3&lt;value_count;i3++){var display_value='N/A';if(typeof district_data_vals['t'+i3]!=='undefined'&amp;&amp;typeof district_data_vals['t'+i3][1]!=='undefined'){display_value=Drupal.VizMapHelper.formatValuesForTooltip(district_data_vals['t'+i3][1],i3);if(!display_value.includes('%'))display_value=Drupal.VizMapHelper.numberWithCommas(display_value);}temp_tooltip=temp_tooltip.replace('[district.'+i3+']',display_value);}}else for(var i4=0;i4&lt;value_count;i4++)temp_tooltip=temp_tooltip.replace('[district.'+i4+']','N/A');temp_tooltip=removeExtraPercentageSymbols(temp_tooltip);sttooltips[district_id]=formatBaseDistrictTooltip(temp_tooltip,current_state_name,district_id,district_name);}return sttooltips;}function removeExtraPercentageSymbols(temp_tooltip){temp_tooltip=Drupal.VizMapHelper.replaceAll(temp_tooltip,'N/A%','N/A');temp_tooltip=Drupal.VizMapHelper.replaceAll(temp_tooltip,'NA%','NA');temp_tooltip=Drupal.VizMapHelper.replaceAll(temp_tooltip,'S%','S');temp_tooltip=Drupal.VizMapHelper.replaceAll(temp_tooltip,'%%','%');temp_tooltip=Drupal.VizMapHelper.replaceAll(temp_tooltip,'Suppressed%','S');return temp_tooltip;}function formatBaseDistrictTooltip(temp_tooltip,current_state_name,district_id,district_name){var str='&lt;div class="dttip"&gt;';str+='&lt;div class="dst"&gt;&lt;span class="dlbl"&gt;'+current_state_name+'&lt;/span&gt;&lt;/div&gt;&lt;br/&gt;';str+='&lt;div class="dnm"&gt;&lt;span&gt;LEA Name: &lt;/span&gt;&lt;strong&gt;'+district_name+'&lt;/strong&gt;&lt;/div&gt;';str+='&lt;div class="did"&gt;&lt;span&gt;LEA NCES ID: &lt;/span&gt;&lt;strong&gt;'+district_id+'&lt;/strong&gt;&lt;/div&gt;';str+=temp_tooltip+'&lt;/div&gt;';return str;}function replaceEmptyTooltipValues(val_count,temp_tooltip){for(var i=0;i&lt;val_count+1;i++){temp_tooltip=temp_tooltip.replace('['+i+']%','N/A');temp_tooltip=temp_tooltip.replace("["+i+"]",'N/A');temp_tooltip=temp_tooltip.replace(/Suppressed%/g,"S");temp_tooltip=temp_tooltip.replace(/N\/A%/g,"N/A");}return temp_tooltip;}function zoomDistrictLevel(e){setDistrictLabel(e);$("#edit-district").val(e.properties.id).trigger('change');const input=document.querySelector('#edit-district');const event=new KeyboardEvent('keydown',{key:'a'});input.dispatchEvent(event);active.classed("active",false);active=d3.select(this).classed("active",true);if(!isDistrictZoomed||!isCADistrictZoomed){d3.selectAll('svg#mapWrapper').style('cursor','default');var bounds=path.bounds(e),dx=bounds[1][0]-bounds[0][0],dy=bounds[1][1]-bounds[0][1],x=(bounds[0][0]+bounds[1][0])/2,y=(bounds[0][1]+bounds[1][1])/2,scale=.25/Math.max(dx/width,dy/height),translate=[width/2-scale*x,height/2-scale*y];}else{d3.selectAll('svg#mapWrapper').style('cursor','pointer');var bounds=path.bounds(e),dx=bounds[1][0]-bounds[0][0],dy=bounds[1][1]-bounds[0][1],x=(bounds[0][0]+bounds[1][0])/2,y=(bounds[0][1]+bounds[1][1])/2,scale=0/Math.max(dx/width,dy/height),translate=[width/2-scale*x,height/2-scale*y];}d3.select('body svg#mapWrapper g').transition().duration(1500).attr('transform','translate('+translate+') scale('+scale+')');d3.selectAll('svg#mapWrapper .dist path').attr('stroke-width','.05px');if(program_name!='Chronic Absenteeism')isDistrictZoomed=true;else isCADistrictZoomed=true;}function showDistrictLevelData(d){if(document.activeElement&amp;&amp;document.activeElement!=d3.event.srcElement)document.activeElement.blur();let pageX=0;let pageY=0;if(d3.event.toString()=='[object MouseEvent]'){pageX=d3.event.pageX;pageY=d3.event.pageY;}else{const boundingRect=d3.event.srcElement.getBoundingClientRect();pageX=window.scrollX+boundingRect.x+(boundingRect.width/2);pageY=window.scrollY+boundingRect.y+(boundingRect.height/2);}lea_id=d.properties.id;dlatest=lea_id;if(typeof sttooltips[lea_id]=="string"){var tooltip_txt=sttooltips[lea_id];tooltip.classed('tthide',false).style("left",pageX+"px").style("top",pageY+"px").style("display","inline-block").html(tooltip_txt);}else d3.json(stateds+'&amp;d='+lea_id).then(function(error,dttip){if(error)throw error;id=dttip['id'];stnm=Drupal.VizMapHelper.getStateName(lea_id.substring(0,2));dstnm=dttip['n'];if(typeof dstnm=="undefined")dstnm="N/A";ttip=dttip.tooltip;str='&lt;div class="dttip"&gt;';if(stnm!="")str+='&lt;div class="dst"&gt;&lt;span class="dlbl" style="font-weight: bold; font-size: 10px;"&gt;'+stnm+'&lt;/span&gt;&lt;/div&gt;';if(id!="N/A")str+='&lt;div class="did"&gt;&lt;span class="dlbl" style="font-weight: bold;"&gt;LEA NCES ID: &lt;/span&gt;'+id+'&lt;/div&gt;';if(id=="N/A"||dstnm=="N/A")str+='&lt;div class="dst"&gt;&lt;span class="dlbl" style="font-weight: bold;"&gt;Data is not available.&lt;/span&gt;&lt;/div&gt;';else{for(i in dttip['data']){if(dttip['data'][i][1])ttiptxt=dttip['data'][i][1];else ttiptxt=dttip['data'][i][0];ttip=ttip.replace('['+i+']',ttiptxt.toLocaleString());ttip=ttip.replace(/Suppressed%/g,'S');}str+='&lt;div class="dnm"&gt;&lt;span class="dlbl" style="font-weight: bold;"&gt;Local Educational Agency Name: &lt;/span&gt;'+dstnm+'&lt;/div&gt;';str+=ttip;}str+='&lt;/div&gt;';if(id==dlatest)tooltip.classed('tthide',false).style("left",pageX+"px").style("top",pageY+"px").style("display","inline-block").html(str);sttooltips[id]=str;});d3.event.srcElement.setAttribute('aria-labelledby','tooltipx');}function setDisableStateClick(disableStateClick){this.disableStateClick=disableStateClick;}function getDisableStateClick(){return this.disableStateClick;}function setHideLegend(hideLegend){this.hideLegend=hideLegend;}function getHideLegend(){return this.hideLegend;}function defaultRequest(param1,param2,sttid){ststr="";var school_year_tid=$('#edit-school-year option:selected').val();var current_state_tid=$('#edit-state option:selected').val();if(current_state_tid)ststr="&amp;s="+current_state_tid;return "/api/v2/"+param1+"/"+param2+"?sy="+school_year_tid+ststr+'&amp;type=json';}function getParameterByName(name,url=window.location.href){name=name.replace(/[\[\]]/g,'\\$&amp;');var regex=new RegExp('[?&amp;]'+name+'(=([^&amp;#]*)|&amp;|#|$)'),results=regex.exec(url);if(!results)return null;if(!results[2])return '';return decodeURIComponent(results[2].replace(/\+/g,' '));}function drawLegend(hi,lo,legendtext,divisor,percentage,legendScale=null){if(!getHideLegend()){d3.select('#mainLegend').style('width','400px');if($('#mainLegend g rect').length)d3.selectAll("#mainLegend g rect").remove();if(!legendScale)legendScale=Drupal.VizMapHelper.getLegendScale(lo,hi,program_name,current_state_tid);var legendHeight=30;var legendWidth=300;var numTicks=10;var blockWidth=(legendWidth/numTicks);var marginRight=20;var xScale=d3.scaleLinear().range([blockWidth,legendWidth]).domain(d3.extent(legendScale.domain().slice(1)));d3.select("#mainLegend svg").attr("viewBox",[0,0,legendWidth+marginRight,legendHeight]);var xAxis=d3.axisBottom(xScale).tickValues(legendScale.domain().slice(1)).tickSize(13).tickFormat(function(d){if(percentage&amp;&amp;!isNaN(d)&amp;&amp;!isNaN(divisor))return formatPercent(d/divisor);else if(d&gt;=1000)return Drupal.VizMapHelper.kFormatter(d);else{if(d&lt;1000)return d;}});var g=d3.select("#mainLegend g").attr('transform','translate(0,0)').call(xAxis);var currX=-blockWidth;g.select(".domain").remove();g.select(".legendtxt").remove();g.selectAll("rect").data(legendScale.range().slice(1)).enter().insert("rect",".tick").attr("height",8).attr("x",function(d){currX=currX+blockWidth;return currX;}).attr("width",legendWidth/numTicks).attr("fill",function(d){return d;});if(legendtext!=''&amp;&amp;legendtext!='undefined')if(program_name!='Educators'||program_name!='Chronic Absenteeism')$('.legendtitle').html(legendtext);else $('.legendtitle').html(educatorParseValue(educator_keys[currentMap],true));}}function mapStateClicked(e){if(!disableZoom){if(state_changed){changeStateDropDown(e.id);refreshDataNotes(e.id);}if(!getDisableStateClick()&amp;&amp;!disableDistrictZoom)zoomIntoState(e);var currentState=$('#edit-state option:selected').val();updateCharts(currentState);}}function resetDataNotes(e){var viewName='data_notes_by_visualization';var instances=Drupal.views.instances;var myViews;$.each(instances,function getInstance(index,element){if(element.settings.view_name==viewName){myViews='.js-view-dom-id-'+element.settings.view_dom_id;if(typeof myViews!=='undefined'){var curr_state=1035;var curr_year=$("#edit-school-year option:selected").val();var view_args=element['refreshViewAjax']['submit']['view_args'];var pieces=view_args.split('/');var args=pieces[0]+'/'+curr_year+'/'+curr_state;element['refreshViewAjax']['submit']['view_args']=args;$(myViews).trigger('RefreshView');}}});}function refreshDataNotes(e){fips=Drupal.VizMapHelper.getFipAsStr(e);sn=Drupal.VizMapHelper.getStateName(fips);var selector="#edit-state option:contains("+sn+")";if(typeof $(selector).val()=="string"){var viewName='data_notes_by_visualization';var instances=Drupal.views.instances;var myViews;$.each(instances,function getInstance(index,element){if(element.settings.view_name==viewName){myViews='.js-view-dom-id-'+element.settings.view_dom_id;if(typeof myViews!=='undefined'){var curr_state=$(selector).val();var curr_year=$("#edit-school-year option:selected").val();var view_args=element['refreshViewAjax']['submit']['view_args'];var pieces=view_args.split('/');var args=pieces[0]+'/'+curr_year+'/'+curr_state;element['refreshViewAjax']['submit']['view_args']=args;$(myViews).trigger('RefreshView');}}});}}function zoomIntoState(e){d3.selectAll('#states path').attr('tabindex','-1');d3.selectAll('#districts g.dist').remove();showStateMap(e.id);changeStateDropDown(e.id);var bounds=path.bounds(e),dx=bounds[1][0]-bounds[0][0],dy=bounds[1][1]-bounds[0][1],x=(bounds[0][0]+bounds[1][0])/2,y=(bounds[0][1]+bounds[1][1])/2,scale=.9/Math.max(dx/width,dy/height),translate=[width/2-scale*x,height/2-scale*y];d3.select('body svg#mapWrapper g').transition().duration(1500).attr('transform','translate('+translate+') scale('+scale+')');}function reset(e){if(isCADistrictZoomed==true)isDistrictZoomed=true;if(!isDistrictZoomed){$('#mainLegendWrapper').css('display','block');d3.selectAll('.dist').attr('visibility','hidden');d3.select('#states path.active').transition().duration(500).style('opacity',1.0).transition().duration(200);active.classed('active',false);active=d3.select(null);d3.select('body svg#mapWrapper g').transition().duration(750).style('stroke-width','1.5px').attr('transform','');d3.selectAll('#districts g.dist path').attr('tabindex','-1').attr('aria-selected','false');d3.selectAll('#states path').attr('tabindex','-1').attr('aria-selected','false').style('visibility','visible');d3.select('#states .states path').attr('tabindex',0).attr('aria-selected','true');changeStateDropDown('00');updateQueryParams(1035,yr);var perc=false;if(program_name==TITLE_I_PART_A||program_name==MCKINNEY_VENTO||program_name==TITLE_III)perc=true;drawLegend(highval,lowval,legend_text,div,perc);$('#zoomOutWrapper').css('display','none').attr('tabindex','-1');var currentState=$('#edit-state option:selected').val();lea_update(lea_usmap_callback);updateCharts(currentState);}else{$("#edit-district").val(1).trigger('change');const input=document.querySelector('#edit-district');const event=new KeyboardEvent('keydown',{key:'a'});input.dispatchEvent(event);var st=$('#edit-state').children('option:selected').text();var fips=Drupal.VizMapHelper.state_info[st].fips;var fips_num=parseInt(fips);isDistrictZoomed=false;isCADistrictZoomed=false;d3.select('#s'+fips_num).dispatch('click');d3.selectAll('#mapWrapper').style('cursor','zoom-in');}}function changeStateDropDown(fips){fips=Drupal.VizMapHelper.getFipAsStr(fips);sn=Drupal.VizMapHelper.getStateName(fips);var selector="#edit-state option:contains("+sn+")";if(typeof $(selector).val()=="string"){$("#edit-state").val($(selector).val()).trigger("change");state_tid=Drupal.VizMapHelper.fips2tid(fips);}}mainviz_state_change=function(st){st=$("#edit-state option[value$='"+st+"']").text();fips=Drupal.VizMapHelper.state_info[st].fips;if(fips=="00")reset();else{fips_num=parseInt(fips);d3.select("#s"+fips_num).dispatch('click');}};mainviz_year_change=function(yr){if(current_state=="United States"){var callback="/api/v2/"+param1+"/"+param2+"?sy="+yr+"&amp;type=json";if(!Drupal.VizMapHelper.checkIsIE())lea_update(callback);}else{st=$("#edit-state option[value='"+st+"']").text();fips=Drupal.VizMapHelper.state_info[st].fips;if(!Drupal.VizMapHelper.checkIsIE())showStateMap(fips);}};function formatDistrictTooltipEducator(sttooltips,districtinfo,districtdata,current_state_name){return formatDistrictTooltipOther(sttooltips,districtinfo,districtdata,current_state_name);}function educatorLegend(optionLength){var mw=d3.select('div#mainWrapper');mw.attr('class','row');mw.style('position','relative');var mv=d3.select('div#mainViz');var ml=d3.select('#mainLegendWrapper');mv.attr('class','col-sm-12 col-md-11');ml.attr('class','col-sm-12');if($("div#edulegend").length==0){var educatorArray=Object.keys(educator_keys);var legend="&lt;ul&gt;";var checked="";for(var i=0;i&lt;optionLength;i++){var key=educatorArray[i];var value=educatorParseValue(educator_keys[educatorArray[i]],true);checked=(key==currentMap)?"checked":"";legend=legend+`&lt;li class="eduli input-group"&gt;&lt;input type="radio" id="${key}" name="educatorL" value="${key}" ${checked} &gt;
              &lt;label for="${key}"&gt;${value}&lt;/label&gt;&lt;/li&gt;`;}legend=legend+"&lt;/ul&gt;";d3.select('div#mainWrapper').insert('div','div#mainLegendWrapper').attr("id",'edulegend').attr("class","col-sm-12 col-md-3 col-md-push-9").append('div').attr('class','edulegend-inner').html(legend);}$(once("newOnceId","input[type='radio'][name='educatorL']")).each(function(){$(this).on('click',function(){var educator_mode=$("input[type='radio'][name='educatorL']:checked").val();if(educator_mode){currentMap=educator_mode;changeMap(educator_mode);}});});}window.addEventListener('hashchange',function(){if(program_name=='Educators'||program_name!='Chronic Absenteeism')changeMap();});function changeMap(token){var screenPosition=window.scrollY;educatorArray=Object.keys(educator_keys);if(typeof token=='string'&amp;&amp;token.length&gt;0&amp;&amp;educatorArray.includes(token))currentMap=token;else{var currentHash=extractHash();if(currentHash.length&gt;0&amp;&amp;currentMap!=currentHash)currentMap=stripHash(currentHash);}var currentURL=document.URL;newURL=new URL(currentURL);newURL.hash=('#'+currentMap.toString());document.location.href=newURL;changeMainTitle();resetEducatorButton();var callback="/api/v2/"+param1+"/"+param2+"?sy="+yr+"&amp;type=json";if(!Drupal.VizMapHelper.checkIsIE())lea_update(callback);if(current_state!=="United States"&amp;&amp;current_state!=='1035'){st=$("#edit-state option[value='"+current_state+"']").text();fips=Drupal.VizMapHelper.state_info[st].fips;if(!Drupal.VizMapHelper.checkIsIE())showStateMap(fips);}window.scrollTo(0,screenPosition);}function changeMainTitle(){var mt=d3.select('div.field.field--name-field-primary-title');currentMap=(typeof currentMap!='undefined')?currentMap:educator_default;mt.text(educatorParseValue(educator_keys[currentMap],false));}function resetEducatorButton(){if(currentMap.length&gt;0&amp;&amp;document.getElementById(currentMap)){var edubutton=document.getElementById(currentMap);edubutton.checked=true;}}}function replaceHash(hash){if(typeof hash=='string'){var currentURL=document.URL;var currentHash=new URL(currentURL).hash;if(currentHash){var idx=currentURL.indexOf('#');newURL=new URL(document.URL.slice(0,idx));newURL.hash='#'+currentMap.href;document.location.href=newURL;}else{}}}function stripHash(str){if(Array.from(str)[0]=='#')return str.slice(1);else return str;}function extractHash(){var currentHash=new URL(document.URL).hash;if(currentHash)return currentHash.slice(1);else return "";}function array_keys(myArray){my_output=[];for(var key in myArray)my_output.push(key);return my_output;}function educatorParseValue(str,title=true){let breaker="|";let position=0;let result="";if(typeof str=='string'){let pipe=str.includes("|");if(str&amp;&amp;pipe){position=str.indexOf(breaker);result=(title)?str.slice(0,position):str.slice(position+1,str.length);return result;}}return str;}})(jQuery,Drupal,geoAlbersUsaPr);;
(function($){$(document).ready(function(){var qs="";$("#age_opts").click(function(){$("#age_cb").slideToggle("slow",function(){});});$("#filtericon").click(function(){$("#optionform").slideToggle("slow",function(){});});$("#updatefilters").click(function(){console.log("Updating Query String "+qs);return false;});function setqs(){qs=$("input").serialize();qs=qs.replace(/=/g,"[]=");};$("#filteroptions").change(setqs);setqs();});})(jQuery);;
var TITLE_I_PART_A='Title I, Part A';var TITLE_I_PART_C='Title I, Part C';var TITLE_I_PART_D='Title I, Part D';var MCKINNEY_VENTO='McKinney-Vento Act';var TITLE_III='Title III';var EDUCATORS='Educators';(function($){var program_name=$("#edit-program option:selected").text();$(document).ready(function(){if(program_name==MCKINNEY_VENTO){document.getElementById("primary-visbutton").classList.toggle('visible');document.getElementById("funding-visbutton").classList.toggle('visible');document.getElementById("participate-visbutton").classList.toggle('visible');document.getElementById("performance-visbutton").classList.toggle('visible');}[...document.querySelectorAll('.viz-print-button')].forEach((el)=&gt;{return el.addEventListener('click',clickHandler);});return window.addEventListener('afterprint',close);});const clickHandler=(e)=&gt;{const targetDataID=e.target.id.split('-')[0];const sectionClass=`.field--name-field-${targetDataID}-visualization`;const sectionElement=document.querySelector(sectionClass);setPaginationTo($,'All',targetDataID);var program=$('select[name="program"]  option:selected').text();var current_state_name=$('select[name="state"] option:selected').text();var yr=$('select[name="school_year"] option:selected').text();if(targetDataID!=="primary")$('.state-chart-accessible-table, .us-chart-accessible-table').removeClass('visually-hidden-print-visible').addClass('visually-hidden');else $('.state-chart-accessible-table, .us-chart-accessible-table').addClass('visually-hidden-print-visible').removeClass('visually-hidden');let title=`
      &lt;h3 class="visually-hidden-print-visible chart-print-titles"&gt;
         ${program}, ${current_state_name}, ${yr}
     &lt;/h3&gt;
    `;$('table.state-chart-accessible-table, table.bottom-table').prepend(title);let sea_title=`
      &lt;h3 class="visually-hidden-print-visible chart-print-titles"&gt;
         ${program}, US, ${yr}
     &lt;/h3&gt;
    `;$('table.us-chart-accessible-table').prepend(sea_title);console.log("chart accessible table is");console.log($('table.us-chart-accessible-table'));if(sectionElement){sectionElement.classList.add('print');if(targetDataID!=='funding'){open(targetDataID);return asyncPrint(targetDataID);}else return print();}};const viewBlocks={'primary':'block_1','participate':'block_3','performance':'block_2','funding':'block_4'};const setPaginationTo=($,value,targetDataID)=&gt;{const element=verifyInstance(targetDataID);if(element){element['refreshViewAjax']['submit']['items_per_page']=value;$(element?.element_settings.selector).trigger('RefreshView');}};const asyncPrint=(targetDataID)=&gt;{$(document).on('RefreshView').ajaxSuccess(function(e,xhr){const el=verifyInstance(targetDataID);if(xhr.status===200&amp;&amp;xhr.readyState===4&amp;&amp;el.settings.items_per_page==="All"){print();$(document).trigger('ResetView');}});$(document).on('ResetView',function(){console.log('Resetting the view after printing...');location.reload();});};const verifyInstance=(targetDataID)=&gt;{console.log("entering verifyInstance");var viewName='data_notes_by_visualization';var instances=Drupal.views.instances;const myInstances=Object.values(Drupal.views.instances).filter((val)=&gt;val.settings.view_name===viewName&amp;&amp;val.settings.view_display_id===viewBlocks[targetDataID]);const verified=myInstances.filter((instance)=&gt;document.querySelectorAll(`${instance.element_settings.selector}`)?.length&gt;0);if(verified.length&gt;0)return instances[`views_dom_id:${verified[0].settings.view_dom_id}`];};const handleDataNotes=(id,el)=&gt;{console.log("id is");console.log(id);console.log("el is");console.log(el);const container=document.getElementById('dn_content_primary');const subcontainer=document.getElementById('data_notes_content');if(id==='primary')return !el.firstElementChild.firstElementChild.classList.contains('view-header')?container.classList.add('data-notes-hidden'):null;};const open=(targetDataID)=&gt;{console.log("open print called");const notesContainer=document.getElementById('dn_content_primary')?.hasAttribute('open');const accordionNotesOpen=document.getElementById('data_notes_accordion')?.hasAttribute('open');if(targetDataID==='primary'){const notesForm=document.querySelector('.views-element-container.form-group');if(!notesContainer)$('#dn_content_primary summary').trigger('click');if(accordionNotesOpen)$('#data_notes_accordion summary').trigger('click');handleDataNotes(targetDataID,notesForm);}if(targetDataID==='funding')return handleDataNotes(targetDataID);if(targetDataID!=='funding'&amp;&amp;targetDataID!=='primary'){const dataParent=document.getElementById('data_notes_content');if(!accordionNotesOpen)$('#data_notes_accordion summary').trigger('click');if(notesContainer)$('#dn_content_primary summary').trigger('click');if(dataParent)[...dataParent.children].forEach((el)=&gt;{const cleanedID=el.id.split('_')[2];if(cleanedID===targetDataID){el.classList='active';$('#dn_tab_'+cleanedID).addClass("active");$('#dn_tab_'+cleanedID).removeClass("inactive");handleDataNotes(targetDataID,el);}else{el.classList='inactive';$('#dn_tab_'+cleanedID).addClass("inactive");$('#dn_tab_'+cleanedID).removeClass("active");}});}let copyCheck=document.getElementById('data-notes-clone');if(!copyCheck){let origDataNotes=document.getElementById('dn_content_primary');let dataNotesCopy=origDataNotes.cloneNode(true);dataNotesCopy.id="data-notes-clone";document.getElementById('mainVizAccessibleContent').append(dataNotesCopy);origDataNotes.classList.add('data-notes-hidden');}console.log("reached end of open print");};const close=()=&gt;{console.log("closed print called");let dataNotesCopy=document.getElementById('data-notes-clone');if(dataNotesCopy){console.log("removal starts");dataNotesCopy.remove();console.log("removal ends");}let origDataNotes=document.getElementById('dn_content_primary');origDataNotes.classList.remove('data-notes-hidden');$('.chart-print-titles').remove();const targetDataID=document.querySelectorAll('.print')[0]?.id;const sectionClass=`.field--name-field-${targetDataID}-visualization`;const sectionElement=document.querySelector(sectionClass);const notesHidden=document.querySelectorAll('.data-notes-hidden');if(targetDataID==='primary'){const notesContainer=document.getElementById(`dn_content_${targetDataID}`);if(notesContainer.hasAttribute('open'))$('#dn_content_primary summary').trigger('click');}if(targetDataID==='participate'||targetDataID==='performance'||targetDataID==='funding'){const accordionNotesOpen=document.getElementById('data_notes_accordion')?.hasAttribute('open');const dataParent=document.getElementById('data_notes_content');if(accordionNotesOpen)$('#data_notes_accordion summary').trigger('click');if(dataParent)[...dataParent.children].forEach((el)=&gt;{if([...dataParent.children].indexOf(el)===0)el.classList='active';else el.classList='inactive';});}if(targetDataID!=='funding')setPaginationTo($,'3',targetDataID);if(sectionElement&amp;&amp;sectionElement?.classList.contains('print'))sectionElement.classList.toggle('print');if(notesHidden.length&gt;0)[...notesHidden].forEach((el)=&gt;el.classList.remove('data-notes-hidden'));console.log("reached end of close print");};})(jQuery);;
var current_state;var current_year;var state_changed;var year_changed;var program_name;var TITLE_I_PART_A='Title I, Part A';var TITLE_I_PART_C='Title I, Part C';var TITLE_I_PART_D='Title I, Part D';var MCKINNEY_VENTO='McKinney-Vento Act';var TITLE_III='Title III';var EDUCATORS='Educators';var CHRONIC_ABSENTEEISM='Chronic Absenteeism';var container;(function($,Drupal){Drupal.behaviors.hideSubmitButton={attach:function(context,settings){$('#viz-controls select[id*="edit-program"]').change(function(){$(this).parents('form').find('[id*="edit-submit"]').attr('disabled','disabled');});}};function updateQueryParams(state_tid,$year_tid){var queryParams=new URLSearchParams(window.location.search);queryParams.set("s",state_tid);queryParams.set("sy",yr);history.replaceState(null,null,"?"+queryParams.toString());}function getQueryParams($param_key){var queryParams=new URLSearchParams(window.location.search);return queryParams.get($param_key);}var checkReadyState=setInterval(()=&gt;{if(document.readyState==='complete'){clearInterval(checkReadyState);buildVizControls();}},100);function buildVizControls(){current_state=getQueryParams('s');current_year=getQueryParams('sy');state_changed=false;year_changed=false;checkForIEIncompat();program_name=getProgramName();setCurrent();$('#viz-controls').on('load',function(){updateDownloadLink();});$("[name=viztoggle]").click(function(){$('.showhide').hide();$("#vizblock"+$(this).val()).show('slow');});createProgramPopup(program_name);var minRowCount=0;$('#tertiary section').each(function(){var headerLength=$(this).children('h4').html().length;var maxLineLength=45;var currRowCount=Math.ceil(headerLength/maxLineLength);if(currRowCount&gt;minRowCount)minRowCount=currRowCount;if($(this).attr('id')!='funding')$(this).find('h5').remove();$(this).children('h4').css('padding-right','5px');});$('#tertiary section').each(function(){var min_height=80;$(this).children('h4').css('min-height',min_height+'px');});var $tertiarySectionHeading=$('#tertiary section &gt; h3');var maxHeightH3=Math.max.apply(null,$tertiarySectionHeading.map(function(){return $(this).height();}).get());$tertiarySectionHeading.each(function(){$(this).css('min-height',maxHeightH3+'px');});updateDownloadLink();}function setStateLabel(){var current_state_name=$("#edit-state option:selected").text();if(current_state_name=="US")current_state_name="United States";$("#primary .statelabel").html(current_state_name);$("#middlebar .statelabel").html(current_state_name);}function createProgramPopup(program){if(program!=null&amp;&amp;program!=""){var content=getProgramPopupContent(program);if(content!=null&amp;&amp;content!=""){$("label[for='edit-program']").append("&lt;a href='#' class='popup-open' style='display:inline; margin-left: 5px;'&gt;&lt;i class='fas fa-info-circle' style='color:#194a7b; ' title='Program Description'&gt;&lt;/i&gt;&lt;/a&gt;");var popup_div="&lt;div class='popup-overlay'&gt;&lt;div class='popup-content'&gt;";popup_div+=content;popup_div+="&lt;/div&gt;&lt;a href='#' class='close' id='popup_close'&gt;[ Close ]&lt;/a&gt;&lt;/div&gt;";$("body").append(popup_div);$('.popup-open').on("click",function(){$(".popup-overlay").css("position","absolute");$(".popup-overlay").css("top",($(window).height()-$(".popup-overlay").height())/2+$(window).scrollTop()+"px");$(".popup-overlay").css("left",($(window).width()-$(".popup-overlay").width())/2+$(window).scrollLeft()+"px");$(".popup-overlay, .popup-content").addClass("active");return false;});$(".close").on("click",function(){$(".popup-overlay, .popup-content").removeClass("active");return false;});}}}function getProgramPopupContent(program_name){var header="";var description="";var content="";if(program_name==MCKINNEY_VENTO){header="McKinney-Vento Act (Homeless Program)";description="The McKinney-Vento program is designed to address the problems that homeless children and youth have faced in enrolling, attending, and succeeding in school. Under this program,"+" State educational agencies (SEAs) must ensure that each homeless child and youth has equal access to the same free, appropriate public education, including a public preschool education,"+" as other children and youth. Homeless children and youth should have access to the educational and other services that they need to enable them to meet the same challenging State student"+" academic achievement standards to which all students are held. In addition, homeless students may not be separated from the mainstream school environment. States and districts are required"+" to review and undertake steps to revise laws, regulations, practices, or policies that may act as a barrier to the enrollment, attendance, or success in school of homeless children and youth.";}else if(program_name==TITLE_I_PART_A){header="Title I, Part A ";description="Title I, Part A provides financial assistance to local educational agencies (LEAs) and schools with high numbers or high percentages of children from low-income families to help ensure"+" that all children meet challenging state academic standards. Federal funds are currently allocated through four statutory formulas that are based primarily on census poverty estimates and the"+" cost of education in each state.";}else if(program_name==TITLE_I_PART_C){header="Title I, Part C (Migrant Education Program)";description="Title I, Part C Funds support high quality education programs for migratory children and help ensure that migratory children who move among the states are not penalized in any manner"+" by disparities among states in curriculum, graduation requirements, or state academic content and student academic achievement standards. Funds also ensure that migratory children not only"+" are provided with appropriate education services (including supportive services) that address their special needs but also that such children receive full and appropriate opportunities to"+" meet the same challenging state academic content and student academic achievement standards that all children are expected to meet. Federal funds are allocated by formula to SEAs, based"+" on each stateâ€™s per pupil expenditure for education and counts of eligible migratory children, age 3 through 21, residing within the state.";}else if(program_name==TITLE_I_PART_D){header="Title I, Part D";description="The Part D, Subpart 1, State Agency Neglected and Delinquent (N and D) program provides formula grants to SEAs for supplementary education services to help provide education continuity"+" for children and youths in state-run institutions for juveniles and in adult correctional institutions so that these youths can make successful transitions to school or employment once they"+" are released. Funds are allocated by formula to SEAs, which make subgrants to the state agencies responsible for educating neglected or delinquent children and youths. To be eligible for state"+" N and D funds, juvenile institutions must provide 20 hours a week of instruction from nonfederal funds; adult correctional institutions must provide 15 hours. The Subpart 2 Local Education Agency"+" Program requires each SEA to reserve from its Title I, Part A, allocation, funds generated by the number of children in locally operated institutions for delinquent youths. Funds are awarded to "+" LEAs with high proportions of youths in local correctional facilities to support dropout prevention programs for at-risk youths.";}else if(program_name==TITLE_III){header="Title III (English Learners)";description+="This program is designed to improve the education of limited English proficient (LEP) children and youths by helping them learn English and meet challenging state academic content"+" and student academic achievement standards. The program provides enhanced instructional opportunities for immigrant children and youths. Funds are distributed to states based on a formula"+" that takes into account the number of immigrant and LEP students in each state.";}else if(program_name==EDUCATORS){header="Educators";description+="The Educators dashboard is created by using teacher data from three Office of Elementary and Secondary Education (OESE) programs:\n&lt;br /&gt;"+"&lt;ul&gt;"+"&lt;li&gt;Title I, Part A provides financial assistance to local educational agencies (LEAs) and schools with high numbers or high percentages of children from low-income families;&lt;/li&gt;"+"&lt;li&gt;Title II provides grants to State educational agencies and subgrants to LEAs to increase the number of and improve the quality and effectiveness of teachers, principals, and other school leaders;\n&lt;/li&gt;"+"&lt;li&gt;Title III provides grants to SEAs to ensure that English learners achieve at high levels in academic subjects and assists teachers, principals, and other school leaders to establish and implement effective language instruction educational programs.&lt;/li&gt;"+"&lt;/ul&gt;";}else{if(program_name==CHRONIC_ABSENTEEISM){header="Chronic Absenteeism";description+="Chronic absenteeism is defined as the unduplicated number of students absent 10% or more school days during"+"the school year. The data are collected under the authority of the Elementary and Secondary Education Act (ESEA)"+"of 1965, as amended by the Every Student Succeeds Act (ESSA), the McKinney-Vento Homeless Assistance Act "+"(2015), and the Department of Education Organization Act (20 USC 3413(c)(1)).";}}if(description!=""&amp;&amp;header!=""){content="&lt;h2 class='popup-title'&gt;"+header+"&lt;/h2&gt;&lt;br/&gt;";content+="&lt;p&gt;"+description+"&lt;/p&gt;";}return content;}function setCurrent(){state_changed=true;current_state=$("#edit-state option:selected").val();setStateLabel();year_changed=true;current_year=$("#edit-school-year option:selected").val();}function updateDownloadLink(){$("#block-downloadlink a").attr("href",function(){var selected_year=$("#edit-school-year option:selected").html();var selected_program=$("#edit-program option:selected").html();var selected_state=$("#edit-state option:selected").html();if(selected_year!=='2021-2022')if(selected_program.includes('Title I, Part D'))selected_program='Title I, Part D';var link="/download/data-builder/data-download-tool?f[0]=program:"+selected_program+"&amp;f[1]=school_year:"+selected_year;if(selected_program.includes('Educators'))link="/download/data-builder/data-download-tool?f%5B0%5D=file_spec%3A067&amp;f%5B1%5D=file_spec%3A203&amp;f%5B2%5D=file_spec%3AT2PDTOP&amp;f%5B3%5D=file_spec%3AT2PDTYPE&amp;f%5B4%5D=file_spec%3AT2USEPCT&amp;f%5B5%5D=file_spec%3AT2USESHR&amp;f%5B6%5D=school_year:"+selected_year;return link;});}function getProgramName(){var program_name=$("#edit-program option:selected").text();if(program_name!='')if(program_name.indexOf(TITLE_I_PART_D)&gt;=0)program_name=TITLE_I_PART_D;return program_name;}function checkForIEIncompat(){var isIE=false||!!document.documentMode;if(isIE){var msg='&lt;div style="background-color: #FEEFB3; color: #9F6000; padding: 12px; margin: 10px 0;"&gt;&lt;i class="fas fa-exclamation-circle"&gt;&lt;/i&gt;Some visualizations may be incompatible with Internet Explorer. Please try again using another browser (Microsoft Edge, Mozilla Firefox, Chrome, Safari)&lt;/div&gt;';$('#block-controlsblock').after(msg);}}})(jQuery,Drupal);var state_info=[];state_info['US']={fips:'00',abbr:'US'};state_info['United States']={fips:'00',abbr:'US'};state_info['Alabama']={fips:'01',abbr:'AL'};state_info['Alaska']={fips:'02',abbr:'AK'};state_info['Arizona']={fips:'04',abbr:'AZ'};state_info['Arkansas']={fips:'05',abbr:'AR'};state_info['California']={fips:'06',abbr:'CA'};state_info['Colorado']={fips:'08',abbr:'CO'};state_info['Connecticut']={fips:'09',abbr:'CT'};state_info['Delaware']={fips:'10',abbr:'DE'};state_info['District of Columbia']={fips:'11',abbr:'DC'};state_info['Florida']={fips:'12',abbr:'FL'};state_info['Georgia']={fips:'13',abbr:'GA'};state_info['Hawaii']={fips:'15',abbr:'HI'};state_info['Idaho']={fips:'16',abbr:'ID'};state_info['Illinois']={fips:'17',abbr:'IL'};state_info['Indiana']={fips:'18',abbr:'IN'};state_info['Iowa']={fips:'19',abbr:'IA'};state_info['Kansas']={fips:'20',abbr:'KS'};state_info['Kentucky']={fips:'21',abbr:'KY'};state_info['Louisiana']={fips:'22',abbr:'LA'};state_info['Maine']={fips:'23',abbr:'ME'};state_info['Maryland']={fips:'24',abbr:'MD'};state_info['Massachusetts']={fips:'25',abbr:'MA'};state_info['Michigan']={fips:'26',abbr:'MI'};state_info['Minnesota']={fips:'27',abbr:'MN'};state_info['Mississippi']={fips:'28',abbr:'MS'};state_info['Missouri']={fips:'29',abbr:'MO'};state_info['Montana']={fips:'30',abbr:'MT'};state_info['Nebraska']={fips:'31',abbr:'NE'};state_info['Nevada']={fips:'32',abbr:'NV'};state_info['New Hampshire']={fips:'33',abbr:'NH'};state_info['New Jersey']={fips:'34',abbr:'NJ'};state_info['New Mexico']={fips:'35',abbr:'NM'};state_info['New York']={fips:'36',abbr:'NY'};state_info['North Carolina']={fips:'37',abbr:'NC'};state_info['North Dakota']={fips:'38',abbr:'ND'};state_info['Ohio']={fips:'39',abbr:'OH'};state_info['Oklahoma']={fips:'40',abbr:'OK'};state_info['Oregon']={fips:'41',abbr:'OR'};state_info['Pennsylvania']={fips:'42',abbr:'PA'};state_info['Puerto Rico']={fips:'72',abbr:'PR'};state_info['Rhode Island']={fips:'44',abbr:'RI'};state_info['South Carolina']={fips:'45',abbr:'SC'};state_info['South Dakota']={fips:'46',abbr:'SD'};state_info['Tennessee']={fips:'47',abbr:'TN'};state_info['Texas']={fips:'48',abbr:'TX'};state_info['Utah']={fips:'49',abbr:'UT'};state_info['Vermont']={fips:'50',abbr:'VT'};state_info['Virginia']={fips:'51',abbr:'VA'};state_info['Washington']={fips:'53',abbr:'WA'};state_info['West Virginia']={fips:'54',abbr:'WV'};state_info['Wisconsin']={fips:'55',abbr:'WI'};state_info['Wyoming']={fips:'56',abbr:'WY'};state_info['Puerto Rico']={fips:'72',abbr:'PR'};function fips2tid(fipscd){sn=getStateName(fipscd);return jQuery('#edit-state option:contains("'+sn+'")').val();};
(function($,Drupal){'use strict';Drupal.behaviors.visualizationsDataNotes={attach:function(context,settings){if(!$('#dn_content_primary',context).length&amp;&amp;!$('#data_notes_accordion',context).length)return;const state_name=function(){var state_name='';if(typeof ($('#edit-state option:selected'))!='undefined'&amp;&amp;$('#edit-state option:selected')!==null)state_name=$('#edit-state option:selected').val();return state_name;};const school_year=function(){var school_year='';if(typeof ($('#edit-school-year option:selected'))!='undefined'&amp;&amp;$('#edit-school-year option:selected')!=null)school_year=$('#edit-school-year option:selected').val();return school_year;};const program_name=function getProgram(){var program='';if(typeof ($('#edit-program option:selected'))!='undefined'&amp;&amp;$('#edit-program option:selected')!==null)program=$('#edit-program option:selected').text();return program;};if(state_name!=''&amp;&amp;school_year!=''&amp;&amp;program_name!=''){$('#dn_content_primary &gt; div').css('display','none');$('#data_notes_accordion #data_notes_subcontainer').css('display','none');$('#dn_content_primary summary').on('click',function(){if($('#dn_content_primary summary span').data('visible')==='true'){$('#dn_content_primary summary span').data('visible','false').empty().append(`&lt;i class="fa fa-plus" aria-hidden="true" alt="${Drupal.t('Show Data Notes')}"&gt;&lt;/i&gt;`);$('#dn_content_primary &gt; div').css('display','none');}else{$('#dn_content_primary summary span').data('visible','true').empty().append(`&lt;i class="fa fa-minus" aria-hidden="true" alt="${Drupal.t('Hide Data Notes')}"&gt;&lt;/i&gt;`);$('#dn_content_primary &gt; div').css('display','block');}});$('#data_notes_accordion summary').on('click',function(){if($('#data_notes_accordion summary span').data('visible')==='true'){$('#data_notes_accordion summary span').data('visible','false').empty().append(`&lt;i class="fa fa-plus" aria-hidden="true" alt="${Drupal.t('Show Data Notes')}"&gt;&lt;/i&gt;`);$('#data_notes_accordion #data_notes_subcontainer').css('display','none');}else{$('#data_notes_accordion summary span').data('visible','true').empty().append(`&lt;i class="fa fa-minus" aria-hidden="true" alt="${Drupal.t('Hide Data Notes')}"&gt;&lt;/i&gt;`);$('#data_notes_accordion #data_notes_subcontainer').css('display','block');}});}else{$('#dn_content_primary h4 span').empty();$('#dn_content_primary &gt; div').css('display','block');if($('#dn_content_primary_msg').length==0){$('#dn_content_primary h4').css('cursor','default');$('#dn_content_primary').append(`&lt;div id="dn_content_primary_msg"&gt;${Drupal.t('No Data Notes were found.')}&lt;/div&gt;`);}$('#data_notes_accordion h4 span').empty();$('#data_notes_accordion h4').css('cursor','default');$('#part_dn_tbl').empty().html(Drupal.t('No Data Notes were found.'));$('#perf_dn_tbl').empty().html(Drupal.t('No Data Notes were found.'));}}};})(jQuery,Drupal);;
</pre></body></html>